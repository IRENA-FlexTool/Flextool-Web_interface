(function(e){function t(t){for(var a,c,o=t[0],l=t[1],u=t[2],d=0,b=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);s&&s(t);while(b.length)b.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={entities:0},i=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var s=l;i.push([3,"chunk-vendors"]),n()})({"0274":function(e,t,n){"use strict";var a=n("7a23");function r(e,t,n,r,i,c){var o=Object(a["N"])("n-spin"),l=Object(a["N"])("n-result");return"loading"===n.state?(Object(a["G"])(),Object(a["i"])(o,{key:0})):"error"===n.state?(Object(a["G"])(),Object(a["i"])(l,{key:1,status:"error",title:"Error",description:n.errorMessage},null,8,["description"])):"waiting"===n.state?Object(a["M"])(e.$slots,"waiting",{key:2}):Object(a["M"])(e.$slots,"default",{key:3})}var i={props:{state:{type:String,required:!0},errorMessage:{type:String,required:!1,default:""}},state:{loading:"loading",waiting:"waiting",ready:"ready",error:"error"}},c=n("6b0d"),o=n.n(c);const l=o()(i,[["render",r]]);t["a"]=l},1530:function(e,t,n){},"1d6d":function(e,t,n){"use strict";var a=n("7a23");function r(e,t,n,r,i,c){var o=Object(a["N"])("n-input");return Object(a["G"])(),Object(a["i"])(o,{value:r.value,ref:"instance","onUpdate:value":r.updateValue,onBlur:r.cancel,onKeydown:r.handleKey,maxlength:"155",size:"small",clearable:""},null,8,["value","onUpdate:value","onBlur","onKeydown"])}n("b0c0"),n("498a");var i=n("f2bf"),c={props:{name:String},emits:["accept","cancel"],setup:function(e,t){var n=Object(i["e"])(e.name),a=Object(i["e"])(null);return Object(i["d"])((function(){var e;null===(e=a.value)||void 0===e||e.select()})),{instance:a,value:n,cancel:function(){n.value=e.name,t.emit("cancel")},updateValue:function(e){n.value=e},handleKey:function(a){var r=n.value.trim();switch(a.key){case"Enter":r&&r!==e.name?t.emit("accept",r):(n.value=e.name,t.emit("cancel"));break;case"Escape":n.value=e.name,t.emit("cancel");break}}}}},o=n("6b0d"),l=n.n(o);const u=l()(c,[["render",r]]);t["a"]=u},"1e4f":function(e,t,n){"use strict";n("1530")},2225:function(e,t,n){"use strict";n("a2d1")},3:function(e,t,n){e.exports=n("c30c")},"315d":function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"k",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"i",(function(){return j})),n.d(t,"h",(function(){return O})),n.d(t,"m",(function(){return m})),n.d(t,"j",(function(){return v})),n.d(t,"l",(function(){return y}));var a=n("5530");n("ac1f"),n("1276"),n("498a"),n("e9c4"),n("d3b7"),n("d9e2"),n("99af");function r(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var i=r("csrftoken");function c(){return{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":i,"Content-Type":"application/json"}}}function o(e){var t=c();return t["body"]=JSON.stringify({type:"project list?"}),fetch(e,t).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load project list: ".concat(e))}))}))}function l(e,t){var n=c();return n["body"]=JSON.stringify({type:"create project?",name:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to create project: ".concat(e))}))}))}function u(e,t){var n=c();return n["body"]=JSON.stringify({type:"destroy project?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to delete project: ".concat(e))}))}))}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=c();return i["body"]=JSON.stringify(Object(a["a"])({type:e,projectId:t},r)),fetch(n,i).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error("Failed to fetch ".concat(e,": ").concat(t))}))}))}function d(e,t,n,r){var i=c();return i.body=JSON.stringify(Object(a["a"])({type:"commit",projectId:n,message:t},e)),fetch(r,i).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))}))}function b(e,t){var n=c();return n.body=JSON.stringify({type:"current execution?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch current run: ".concat(e))}))}))}function p(e,t,n){var a=c();return a["body"]=JSON.stringify({type:"execute?",projectId:e,scenarios:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to execute: ".concat(e))}))}))}function f(e,t){var n=c();return n["body"]=JSON.stringify({type:"abort?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to abort execution: ".concat(e))}))}))}function j(e,t){var n=c();return n["body"]=JSON.stringify({type:"briefing?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch execution status: ".concat(e))}))}))}function m(e,t,n){var a=c();return a.body=JSON.stringify({type:"summary?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load summary: ".concat(e))}))}))}function v(e,t,n){var a=c();return a.body=JSON.stringify({type:"output directory?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load output directory path: ".concat(e))}))}))}function O(e,t){var n=c();return n.body=JSON.stringify({type:"scenario list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load scenarios: ".concat(e))}))}))}function y(e,t,n){var a=c();return a.body=JSON.stringify({type:"result alternative?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to result alternative: ".concat(e))}))}))}},"703f":function(e,t,n){"use strict";function a(e){e?addEventListener("beforeunload",r,{capture:!0}):removeEventListener("beforeunload",r,{capture:!0})}function r(e){return e.preventDefault(),e.returnValue="There are uncommitted changes."}n.d(t,"a",(function(){return a}))},"8e39":function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["m"])("Delete");function i(e,t,n,i,c,o){var l=Object(a["N"])("n-button");return Object(a["G"])(),Object(a["i"])(l,{size:"tiny",onClick:i.emitDelete},{default:Object(a["V"])((function(){return[r]})),_:1},8,["onClick"])}var c={props:{emblem:{type:[String,Array],required:!0}},emits:["delete"],setup:function(e,t){return{emitDelete:function(){t.emit("delete",e.emblem)}}}},o=n("6b0d"),l=n.n(o);const u=l()(c,[["render",i]]);t["a"]=u},"966e":function(e,t,n){"use strict";n("ea95")},9973:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),r={class:"page-content"},i={class:"page-content"};function c(e,t,n,c,o,l){var u=Object(a["N"])("navigation-menu"),s=Object(a["N"])("n-card"),d=Object(a["N"])("n-layout-header"),b=Object(a["N"])("n-layout");return Object(a["G"])(),Object(a["i"])(b,{position:"absolute"},{default:Object(a["V"])((function(){return[Object(a["n"])(d,null,{default:Object(a["V"])((function(){return[Object(a["n"])(s,{size:"small"},{default:Object(a["V"])((function(){return[Object(a["n"])(u,{current:n.name,"index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},null,8,["current","index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])]})),_:1}),Object(a["l"])("div",r,[Object(a["M"])(e.$slots,"header")])]})),_:3}),Object(a["l"])("div",i,[Object(a["M"])(e.$slots,"default")])]})),_:3})}var o=Object(a["m"])(" Log out ");function l(e,t,n,r,i,c){var l=Object(a["N"])("n-image"),u=Object(a["N"])("n-menu"),s=Object(a["N"])("n-space"),d=Object(a["N"])("n-button");return Object(a["G"])(),Object(a["i"])(s,{justify:"space-between",align:"baseline"},{default:Object(a["V"])((function(){return[Object(a["n"])(s,{align:"start"},{default:Object(a["V"])((function(){return[Object(a["n"])(l,{src:n.logoUrl,alt:"FlexTool",width:90,"preview-disabled":""},null,8,["src"]),Object(a["n"])(u,{"default-value":n.current,mode:"horizontal",options:r.links},null,8,["default-value","options"])]})),_:1}),Object(a["n"])(d,{onClick:r.logout},{default:Object(a["V"])((function(){return[o]})),_:1},8,["onClick"])]})),_:1})}var u=n("f2bf"),s=n("ac88");function d(e,t){return function(){return Object(u["c"])(s["a"],{href:t},(function(){return e}))}}function b(e){var t={Projects:e.indexUrl,"Manage project":e.projectUrl,"Edit model":e.editUrl,Run:e.runUrl,Results:e.resultsUrl},n=[];for(var a in t){var r=t[a],i=null!==r,c=i?d(a,r):a;n.push({label:c,key:a,disabled:!i})}return n}var p={props:{current:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},setup:function(e){var t=Object(u["e"])(b(e)),n=Object(u["e"])(null);return{links:t,activeKey:n,logout:function(){location.assign(e.logoutUrl)}}}},f=n("6b0d"),j=n.n(f);const m=j()(p,[["render",l]]);var v=m,O={props:{name:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"navigation-menu":v}};n("2225");const y=j()(O,[["render",c]]);t["a"]=y},a2d1:function(e,t,n){},c30c:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("f2bf"),r=n("5333"),i=n("7a23");function c(e,t,n,a,r,c){var o=Object(i["N"])("page-path"),l=Object(i["N"])("n-h1"),u=Object(i["N"])("n-p"),s=Object(i["N"])("commit-button"),d=Object(i["N"])("entity-list"),b=Object(i["N"])("alternative-selection"),p=Object(i["N"])("n-space"),f=Object(i["N"])("n-layout-sider"),j=Object(i["N"])("parameter-table"),m=Object(i["N"])("n-grid-item"),v=Object(i["N"])("indexed-value-editor"),O=Object(i["N"])("n-grid"),y=Object(i["N"])("n-layout-content"),h=Object(i["N"])("n-layout"),g=Object(i["N"])("page");return Object(i["G"])(),Object(i["i"])(g,{name:"Edit model","index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},{header:Object(i["V"])((function(){return[Object(i["n"])(o,{path:[{name:"Projects",url:n.indexUrl},{name:n.projectName,url:n.projectUrl},{name:"Model",url:n.editUrl}],"leaf-name":n.className},null,8,["path","leaf-name"]),Object(i["n"])(l,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.className),1)]})),_:1}),Object(i["W"])(Object(i["n"])(u,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.classDescription),1)]})),_:1},512),[[i["S"],"None"!==n.classDescription]]),Object(i["n"])(s,{"has-pending-changes":a.pendingChanges,committing:a.committing,"error-message":a.commitErrorMessage,onCommitRequest:a.commit},null,8,["has-pending-changes","committing","error-message","onCommitRequest"])]})),default:Object(i["V"])((function(){return[Object(i["n"])(h,{id:"main-layout","has-sider":"",position:"absolute"},{default:Object(i["V"])((function(){return[Object(i["n"])(f,{width:a.siderWidth},{default:Object(i["V"])((function(){return[Object(i["n"])(p,null,{default:Object(i["V"])((function(){return[Object(i["n"])(d,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"class-name":n.className,"class-type":n.classType,inserted:a.insertedEntities,onEntitySelect:a.setSelectedEntity,onEntityInsert:a.storeEntityInsertion,onEntityUpdate:a.storeEntityUpdate,onEntityDelete:a.storeEntityDeletion,onRelationshipsClash:a.setRelationshipsClashErrorState,onEntityDimensionsReveal:a.setEntityDimensions},null,8,["project-id","model-url","class-id","class-name","class-type","inserted","onEntitySelect","onEntityInsert","onEntityUpdate","onEntityDelete","onRelationshipsClash","onEntityDimensionsReveal"]),Object(i["n"])(b,{"project-id":n.projectId,"model-url":n.modelUrl,onAlternativeSelect:a.setSelectedAlternative},null,8,["project-id","model-url","onAlternativeSelect"])]})),_:1})]})),_:1},8,["width"]),Object(i["n"])(y,{"content-style":"margin-left: 1em; margin-right: 1em"},{default:Object(i["V"])((function(){return[Object(i["n"])(O,{cols:"1 m:2",responsive:"screen"},{default:Object(i["V"])((function(){return[Object(i["n"])(m,null,{default:Object(i["V"])((function(){return[Object(i["n"])(j,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"entity-key":a.currentEntityKey,diff:a.pendingModelChanges,onOpenValueEditorRequest:a.setValueEditorData,onCloseValueEditorRequest:a.possiblyClearValueEditor,onValueInsert:a.storeValueInsertion,onValueUpdate:a.storeValueUpdate,onValueDelete:a.storeValueDeletion},null,8,["project-id","model-url","class-id","entity-key","diff","onOpenValueEditorRequest","onCloseValueEditorRequest","onValueInsert","onValueUpdate","onValueDelete"])]})),_:1}),Object(i["n"])(m,null,{default:Object(i["V"])((function(){return[Object(i["n"])(v,{"value-data":a.valueEditorData,diff:a.pendingModelChanges,onValueUpdate:a.storeValueUpdate},null,8,["value-data","diff","onValueUpdate"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])}var o=n("5530"),l=(n("a9e3"),n("d3b7"),n("7317")),u=n("4d91"),s=n("315d"),d=n("d5e4"),b=n("5364"),p=n("9bd1"),f=n("53ca"),j=n("bee2"),m=n("d4ec");n("a4d3"),n("e01a"),n("4ec9"),n("3ca3"),n("ddb0"),n("159b"),n("ac1f"),n("1276"),n("498a"),n("b0c0"),n("d9e2"),n("10d1");function v(e){if(!e.trim())return null;var t=parseFloat(e);return isNaN(t)?"NAN"===e.toUpperCase()?t:e:t}n("a15b");function O(e,t){return e+"_"+t.join("__")}function y(e,t){return"string"===typeof t?t:O(e,t)}var h=Symbol("insert action"),g=Symbol("delete action"),E=Symbol("update action"),N=Object(j["a"])((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(m["a"])(this,e),this.action=t,this.parameters=new Map}));function w(e,t){var n=e.parameters.get(t);return void 0===n&&(n=new Map,e.parameters.set(t,n)),n}function k(e){if("object"!==Object(f["a"])(e)||!("content"in e))return e;var t=[];return e.content.split("\n").forEach((function(e){if(e=e.trim(),e){var n=e.split(/\s+/);1===n.length?t.push(v(n[0])):t.push([n[0],v(n[1])])}})),!t||t[0].length>1?{type:"map",index_type:"str",index_name:e.index_name,data:t}:{type:"array",value_type:"number"===typeof t[0]?"float":"str",data:t}}var V=new WeakMap,I=new WeakMap,S=new WeakMap,U=function(){function e(t,n){Object(m["a"])(this,e),Object(d["a"])(this,V,{writable:!0,value:void 0}),Object(d["a"])(this,I,{writable:!0,value:void 0}),Object(d["a"])(this,S,{writable:!0,value:void 0}),Object(p["a"])(this,V,t),Object(p["a"])(this,I,n),Object(p["a"])(this,S,new Map)}return Object(j["a"])(e,[{key:"makeCommitData",value:function(){var e=[],t=[],n=[],a=[],r=[],i=[],c=[],o=[],l=[];return Object(b["a"])(this,S).forEach((function(i,u){var s=i.action;if(s)if(s.action===h)void 0===s.objectNames?e.push({name:s.name}):a.push({name:s.name,object_name_list:s.objectNames});else{if(s.action!==E){if(s.action===g)return void n.push(s.id);throw Error("Unknown object action.")}void 0===s.objects?t.push({id:s.id,name:s.name}):r.push({id:s.id,name:s.name,object_name_list:s.objects})}i.parameters.forEach((function(e,t){e.forEach((function(e,n){e.action===h?c.push({entity_name:u,definition_id:t,alternative_id:n,value:k(e.value)}):e.action===E?o.push({id:e.id,value:k(e.value)}):e.action===g&&l.push(e.id)}))}))})),{class_id:Object(b["a"])(this,V),insertions:{object:e,relationship:a,parameter_value:c},updates:{object:t,relationship:r,parameter_value:o},deletions:{object:n,relationship:i,parameter_value:l}}}},{key:"isPending",value:function(){return Object(b["a"])(this,S).size>0}},{key:"clearPending",value:function(){Object(b["a"])(this,S).clear()}},{key:"getPendingEntity",value:function(e){var t=y(Object(b["a"])(this,I),e),n=Object(b["a"])(this,S).get(t);return void 0===n&&(n=new N,Object(b["a"])(this,S).set(t,n)),n}},{key:"insertEntity",value:function(e){if("string"===typeof e)Object(b["a"])(this,S).set(e,new N({action:h,name:e}));else{var t=O(Object(b["a"])(this,I),e);Object(b["a"])(this,S).set(t,new N({action:h,name:t,objectNames:e}))}}},{key:"updateEntity",value:function(e,t,n){var a=function(e,t){return void 0===e||e.action===E&&t!==e.originalName};if("string"===typeof n){var r=Object(b["a"])(this,S).get(e);void 0===r?Object(b["a"])(this,S).set(n,new N({action:E,id:t,name:n,originalName:e})):a(r.action,n)?r.action={action:E,id:t,name:n,originalName:r.action.originalName}:r.action.action===h&&(r.action.name=n)}else{var i=O(Object(b["a"])(this,I),e),c=O(Object(b["a"])(this,I),n),o=Object(b["a"])(this,S).get(i);void 0===o?Object(b["a"])(this,S).set(c,new N({action:E,id:t,name:c,objects:n,originalName:i,originalObjects:e})):a(o.action,c)?o.action={action:E,id:t,name:c,objects:n,originalName:i,originalEmblem:e}:o.action.action===h&&(o.action.name=c,o.action.objectNames=n)}}},{key:"deleteEntity",value:function(e,t){var n=y(Object(b["a"])(this,I),t),a=Object(b["a"])(this,S).get(n);void 0===a?Object(b["a"])(this,S).set(n,new N({action:g,id:e})):void 0===a.action||a.action.action!==h?(a.action={action:g,id:e},a.parameters.clear()):Object(b["a"])(this,S).delete(n)}},{key:"insertValue",value:function(e,t,n,a){var r=y(Object(b["a"])(this,I),t),i=this.getPendingEntity(r),c={action:h,entity_name:r,definition_id:n,alternative_id:a,value:e},o=w(i,n);o.set(a,c)}},{key:"updateValue",value:function(e,t,n,a,r){var i=this.getPendingEntity(n),c=w(i,a),o=void 0;o=void 0===t?{action:h,entity_name:y(Object(b["a"])(this,I),n),definition_id:a,alternative_id:r,value:e}:{action:E,id:t,value:e},c.set(r,o)}},{key:"deleteValue",value:function(e,t,n,a){var r=this.getPendingEntity(t),i=w(r,n);void 0===e?(i.delete(a),0===i.size&&(r.parameters.delete(n),0===r.parameters.size&&void 0===r.action&&Object(b["a"])(this,S).delete(t))):i.set(a,{action:g,id:e})}},{key:"pendingValue",value:function(e,t,n){var a=y(Object(b["a"])(this,I),e),r=Object(b["a"])(this,S).get(a);if(void 0!==r){var i=r.parameters.get(t);if(void 0!==i){var c=i.get(n);return void 0!==c?c.value:void 0}}}},{key:"isPendingDeletion",value:function(e,t,n){var a=y(Object(b["a"])(this,I),e),r=Object(b["a"])(this,S).get(a);if(void 0===r)return!1;var i=r.parameters.get(t);if(void 0===i)return!1;var c=i.get(n);return void 0!==c&&i.get(n).action===g}}]),e}(),_=n("703f"),q=n("f77a");function x(e,t,n,a,r,c){var o=Object(i["N"])("n-tree"),l=Object(i["N"])("new-named-item-row"),u=Object(i["N"])("entity-list-new-relationship-row"),s=Object(i["N"])("n-space"),d=Object(i["N"])("fetchable");return Object(i["G"])(),Object(i["i"])(d,{state:a.state,"error-message":a.errorMessage},{default:Object(i["V"])((function(){return[Object(i["n"])(s,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(o,{selectable:"","block-node":"",data:a.entityList,"render-label":a.renderLabel,"render-suffix":a.renderSuffix,"selected-keys":a.selectedKeys,size:"tiny","onUpdate:selectedKeys":a.emitEntitySelect},null,8,["data","render-label","render-suffix","selected-keys","onUpdate:selectedKeys"]),1===n.classType?(Object(i["G"])(),Object(i["i"])(l,{key:0,"item-name":"object",onCreate:a.addObject},null,8,["onCreate"])):(Object(i["G"])(),Object(i["i"])(u,{key:1,"available-objects":a.availableObjects,onRelationshipCreate:a.addRelationship},null,8,["available-objects","onRelationshipCreate"]))]})),_:1})]})),_:1},8,["state","error-message"])}var C=n("b85c"),D=n("2909"),G=n("c7eb"),R=n("1da1");n("4e82"),n("a434"),n("7db0"),n("c740");function M(e,t){return"string"===typeof e?e===t:K(e,t)}function K(e,t){for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0}var A=n("0274");function P(e,t,n,a,r,c){var o=Object(i["N"])("n-text"),l=Object(i["N"])("item-name-input"),u=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(u,{align:"baseline"},{default:Object(i["V"])((function(){return[a.editing?(Object(i["G"])(),Object(i["i"])(l,{key:1,name:n.objectName,onAccept:a.emitRename,onCancel:a.hideInput},null,8,["name","onAccept","onCancel"])):(Object(i["G"])(),Object(i["i"])(o,{key:0,onDblclick:a.showInput},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.objectName),1)]})),_:1},8,["onDblclick"]))]})),_:1})}var z=n("1d6d"),T={props:{objectName:{type:String,required:!0},objectId:{type:Number,required:!1}},emits:["rename"],components:{"item-name-input":z["a"]},setup:function(e,t){var n=Object(a["e"])(!1),r=Object(a["e"])(e.objectName),i=Object(a["e"])(null);return{editing:n,editValue:r,inputInstance:i,showInput:function(){n.value=!0},hideInput:function(){n.value=!1},emitRename:function(a){n.value=!1,t.emit("rename",{id:e.objectId,previousEmblem:e.objectName,entityEmblem:a})}}}},J=n("6b0d"),F=n.n(J);const L=F()(T,[["render",P]]);var B=L;function $(e,t,n,a,r,c){var o=Object(i["N"])("entity-list-relationship-object"),l=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(l,{align:"baseline"},{default:Object(i["V"])((function(){return[(Object(i["G"])(!0),Object(i["k"])(i["b"],null,Object(i["L"])(n.objects,(function(e,t){return Object(i["G"])(),Object(i["i"])(o,{"object-name":e,"object-names-clash":n.objectNamesClash,dimension:t,"available-objects":n.availableObjects[t],key:t,onAccept:a.emitObjectsUpdate},null,8,["object-name","object-names-clash","dimension","available-objects","onAccept"])})),128))]})),_:1})}function W(e,t,n,a,r,c){var o=Object(i["N"])("n-tag"),l=Object(i["N"])("entity-list-relationship-object-input");return a.editing?(Object(i["G"])(),Object(i["i"])(l,{key:1,"object-name":n.objectName,"available-objects":n.availableObjects,onAccept:a.accept,onCancel:a.hideInput},null,8,["object-name","available-objects","onAccept","onCancel"])):(Object(i["G"])(),Object(i["i"])(o,{key:0,type:a.tagType,onClick:a.startEditing,size:"small"},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.objectName),1)]})),_:1},8,["type","onClick"]))}function X(e,t,n,a,r,c){var o=Object(i["N"])("n-select");return Object(i["G"])(),Object(i["i"])(o,{value:a.currentObject,"onUpdate:value":t[0]||(t[0]=function(e){return a.currentObject=e}),ref:"instance",filterable:"",options:a.options,size:"tiny","show-arrow":!1,class:"entity-list-select",onBlur:a.accept,onKeydown:a.handleKey},null,8,["value","options","onBlur","onKeydown"])}var H={props:{objectName:{type:String,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept","cancel"],setup:function(e,t){var n=[];e.availableObjects.forEach((function(e){n.push({label:e,value:e,style:{"font-size":"12px"}})}));var r=Object(a["e"])(n),i=Object(a["e"])(e.objectName),c=Object(a["e"])(null);Object(a["d"])((function(){var e;null===(e=c.value)||void 0===e||e.focus()}));var o=function(){i.value!==e.objectName?t.emit("accept",i.value):t.emit("cancel")},l=function(){t.emit("cancel")};return{options:r,currentObject:i,instance:c,accept:o,cancel:l,handleKey:function(e){switch(e.key){case"Enter":o();break;case"Escape":l();break}}}}};const Q=F()(H,[["render",X]]);var Y=Q,Z={props:{objectName:{type:String,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1},dimension:{type:Number,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept"],components:{"entity-list-relationship-object-input":Y},setup:function(e,t){var n=Object(a["a"])((function(){return e.objectNamesClash?"error":"default"})),r=Object(a["e"])(!1);return{tagType:n,editing:r,startEditing:function(){r.value=!0},accept:function(n){r.value=!1,t.emit("accept",{dimension:e.dimension,objectName:n})},hideInput:function(){r.value=!1}}}};const ee=F()(Z,[["render",W]]);var te=ee,ne={props:{objects:{type:Array,required:!0},originalObjects:{type:Array,required:!0},relationshipId:{type:Number,required:!1},availableObjects:{type:Array,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1}},emits:["objectsUpdate"],components:{"entity-list-relationship-object":te},setup:function(e,t){return{emitObjectsUpdate:function(n){var a=[];e.objects.forEach((function(e,t){t!==n.dimension?a.push(e):a.push(n.objectName)}));var r=null!==e.originalObjects?e.originalObjects:e.objects;t.emit("objectsUpdate",{id:e.relationshipId,previousEmblem:r,entityEmblem:a})}}}};const ae=F()(ne,[["render",$]]);var re=ae,ie=n("8e39"),ce=n("d6ec"),oe=Object(i["m"])(" Create ");function le(e,t,n,a,r,c){var o=Object(i["N"])("n-select"),l=Object(i["N"])("n-button"),u=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(u,{align:"baseline",size:"small"},{default:Object(i["V"])((function(){return[(Object(i["G"])(!0),Object(i["k"])(i["b"],null,Object(i["L"])(a.dimensions,(function(e){return Object(i["G"])(),Object(i["i"])(o,{key:e,options:a.options[e],filterable:"",placeholder:a.placeholderText(e),"show-arrow":!1,size:"tiny","consistent-menu-width":!1,"onUpdate:value":a.updateSelection,class:"entity-list-select"},null,8,["options","placeholder","onUpdate:value"])})),128)),Object(i["n"])(l,{onClick:a.emitRelationshipCreate,size:"tiny",disabled:!a.wellDefined},{default:Object(i["V"])((function(){return[oe]})),_:1},8,["onClick","disabled"])]})),_:1})}n("99af");function ue(e){var t=[];return e.forEach((function(e,n){var a=[];e.forEach((function(e){a.push({label:e,value:e,dimension:n,style:{"font-size":"12px"}})})),t.push(a)})),t}var se={props:{availableObjects:{type:Array,required:!0}},emits:["relationshipCreate"],setup:function(e,t){var n=Object(a["e"])(Object(D["a"])(Array(e.availableObjects.length).keys())),r=Object(a["e"])(ue(e.availableObjects)),i=Array(e.availableObjects.length),c=Object(a["e"])(!1);return{dimensions:n,options:r,wellDefined:c,emitRelationshipCreate:function(){t.emit("relationshipCreate",i)},updateSelection:function(e,t){i[t.dimension]=e,i.forEach((function(e,t){void 0!==e&&t===i.length-1&&(c.value=!0)}))},placeholderText:function(e){var t=null;switch(e){case 0:t="st";break;case 1:t="nd";break;case 2:t="rd";break;default:t="th"}return"".concat(e+1).concat(t," object")}}}};const de=F()(se,[["render",le]]);var be=de;function pe(e,t,n,a,r,i){var c={object_class_id:n};s["g"]("objects?",e,t,c).then(function(){var e=Object(R["a"])(Object(G["a"])().mark((function e(t){var n,i;return Object(G["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.objects,i=[],n.forEach((function(e){i.push({entityEmblem:e.name,entityId:e.id,key:e.name})})),a.value=i,r.value=A["a"].state.ready;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.value=e.message,r.value=A["a"].state.error}))}function fe(e,t,n){var a={relationship_class_id:n};return s["g"]("available relationship objects?",e,t,a).then((function(e){return e.available_objects}))}function je(e,t,n,a,r,i,c,o){var l={relationship_class_id:n};s["g"]("relationships?",e,t,l).then(function(){var o=Object(R["a"])(Object(G["a"])().mark((function o(l){var u,s,d;return Object(G["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return u=l.relationships,s=new Map,u.forEach((function(e){var t=s.get(e.id);void 0===t&&(t=[],s.set(e.id,t)),t.push(e.object_name)})),o.next=5,fe(e,t,n);case 5:r.value=o.sent,i("entityDimensionsReveal",r.value.length),d=[],s.forEach((function(e,t){d.push({entityEmblem:e,originalEmblem:Object(D["a"])(e),entityId:t,availableObjects:r,objectNamesClash:!1,key:e.join(",")})})),d.sort((function(e,t){for(var n=0;n<e.entityEmblem.length;++n){var a=e.entityEmblem[n].toUpperCase(),r=t.entityEmblem[n].toUpperCase();if(a!==r)return a>r}return!1})),a.value=d,c.value=A["a"].state.ready;case 12:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){o.value=e.message,c.value=A["a"].state.error}))}function me(e){return{entityEmblem:e.entityEmblem,entityId:e.entityId}}var ve={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},inserted:{type:Object,required:!1}},emits:["entitySelect","entityInsert","entityUpdate","entityDelete","relationshipsClash","entityDimensionsReveal"],components:{fetchable:A["a"],"new-named-item-row":ce["a"],"entity-list-new-relationship-row":be},setup:function(e,t){var n=Object(a["e"])(A["a"].state.loading),r=Object(a["e"])([]),i=Object(a["e"])(""),c=Object(a["e"])([]),o=Object(a["e"])([]),l=Object(u["a"])();Object(a["d"])((function(){1===e.classType?pe(e.projectId,e.modelUrl,e.classId,r,n,i):je(e.projectId,e.modelUrl,e.classId,r,o,t.emit,n,i)}));var s=function(e){for(var n=void 0,a=r.value.length-1;-1!=a;--a){var i=r.value[a];M(i.entityEmblem,e)&&(n=i.entityId,r.value.splice(a,1))}t.emit("entityDelete",{id:n,entityEmblem:e})},d=function(e){var n=r.value.find((function(t){return e.entityEmblem===t.entityEmblem}));n?l.error({title:"Cannot rename",content:"An object with the same name already exists."}):(r.value.forEach((function(t){t.entityEmblem==e.previousEmblem&&(t.entityEmblem=e.entityEmblem)})),t.emit("entityUpdate",e))},b=function(e){var n,a=r.value.find((function(t){return K(e.entityEmblem,t.entityEmblem)})),i=void 0!==a,c=Object(C["a"])(r.value);try{for(c.s();!(n=c.n()).done;){var o=n.value;if(K(e.previousEmblem,o.originalEmblem)){o.objectNamesClash=i,o.entityEmblem=e.entityEmblem,i||(o.originalEmblem=Object(D["a"])(e.entityEmblem));break}}}catch(l){c.e(l)}finally{c.f()}t.emit("relationshipsClash",a),a||t.emit("entityUpdate",e)};return Object(a["g"])(Object(a["f"])(e).inserted,(function(n){n&&(r.value.forEach((function(t){var a=y(e.className,t.entityEmblem),r=n[a];void 0!==r&&(t.entityId=r)})),c.value.length=0,t.emit("entitySelect",null))})),{state:n,entityList:r,errorMessage:i,selectedKeys:c,availableObjects:o,renderLabel:function(t){return 1===e.classType?Object(a["c"])(B,{objectName:t.option.entityEmblem,objectId:t.option.entityId,onRename:d}):Object(a["c"])(re,{objects:t.option.entityEmblem,originalObjects:t.option.originalEmblem,relationshipId:t.option.entityId,availableObjects:t.option.availableObjects,objectNamesClash:t.option.objectNamesClash,onObjectsUpdate:b})},renderSuffix:function(e){return Object(a["c"])(ie["a"],{emblem:e.option.entityEmblem,onDelete:s})},emitEntitySelect:function(e,n){if(0!==e.length){var a=n[0];c.value=[a.key],t.emit("entitySelect",me(a))}else c.value.length=0},addObject:function(e){var n=r.value.find((function(t){return e===t.entityEmblem}));if(n)l.error({title:"Cannot create",content:"An entity with the same name already exists."});else{var a={entityEmblem:e,entityId:void 0,key:e},i=r.value.findIndex((function(t){return e<t.entityEmblem}));r.value.splice(i>=0?i:r.value.length,0,a),t.emit("entityInsert",e),c.value=[a.key],t.emit("entitySelect",me(a))}},addRelationship:function(e){var n=r.value.find((function(t){return K(e,t.entityEmblem)}));if(n)l.error({title:"Cannot create relationship",content:"A relationship with the same objects already exists."});else{var a=Object(D["a"])(e),i={entityEmblem:a,originalEmblem:Object(D["a"])(a),entityId:void 0,availableObjects:o,objectNamesClash:!1,key:e.join(",")},u=r.value.findIndex((function(t){return e[0]<t.entityEmblem}));r.value.splice(u>=0?u:r.value.length,0,i),t.emit("entityInsert",a),c.value=[i.key],t.emit("entitySelect",me(i))}}}}};n("1e4f");const Oe=F()(ve,[["render",x]]);var ye=Oe;function he(e,t,n,a,r,c){var o=Object(i["N"])("n-tree"),l=Object(i["N"])("fetchable");return Object(i["G"])(),Object(i["i"])(l,{state:a.state,"error-message":a.errorMessage},{default:Object(i["V"])((function(){return[Object(i["n"])(o,{selectable:"","block-node":"",data:a.alternatives,"selected-keys":a.selectedIds,"onUpdate:selectedKeys":a.emitSelected},null,8,["data","selected-keys","onUpdate:selectedKeys"])]})),_:1},8,["state","error-message"])}function ge(e,t){return Object(s["g"])("make base alternative",e,t,{}).then((function(e){return e.alternatives}))}var Ee={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0}},emits:["alternativeSelect"],components:{fetchable:A["a"]},setup:function(e,t){var n=Object(a["e"])([]),r=Object(a["e"])([]),i=Object(a["e"])(A["a"].state.loading),c=Object(a["e"])("");return Object(a["d"])((function(){Object(s["g"])("alternatives?",e.projectId,e.modelUrl).then(function(){var t=Object(R["a"])(Object(G["a"])().mark((function t(a){var r,c,o;return Object(G["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==a.alternatives.length){t.next=4;break}return t.next=3,ge(e.projectId,e.modelUrl);case 3:a.alternatives=t.sent;case 4:r=Object(C["a"])(a.alternatives);try{for(r.s();!(c=r.n()).done;)o=c.value,n.value.push({label:o.name,key:o.id})}catch(l){r.e(l)}finally{r.f()}i.value=A["a"].state.ready;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){i.value=A["a"].state.error,c.value=e.message}))})),{alternatives:n,selectedIds:r,state:i,errorMessage:c,emitSelected:function(e,n){var a=n[0];r.value=[a.key],t.emit("alternativeSelect",{alternativeId:a.key,alternativeName:a.label})}}}};const Ne=F()(Ee,[["render",he]]);var we=Ne,ke=Object(i["m"])("―");function Ve(e,t,n,a,r,c){var o=Object(i["N"])("n-text"),l=Object(i["N"])("n-space"),u=Object(i["N"])("hand-point-left-regular"),s=Object(i["N"])("n-icon"),d=Object(i["N"])("n-empty"),b=Object(i["N"])("hand-paper-regular"),p=Object(i["N"])("n-data-table"),f=Object(i["N"])("n-result");return Object(i["G"])(),Object(i["i"])(l,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(l,null,{default:Object(i["V"])((function(){return[Object(i["n"])(o,{strong:""},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(a.entityName),1)]})),_:1}),Object(i["n"])(o,null,{default:Object(i["V"])((function(){return[ke]})),_:1}),Object(i["n"])(o,{italic:""},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(a.alternativeName),1)]})),_:1})]})),_:1}),a.errorMessage?(Object(i["G"])(),Object(i["i"])(f,{key:1,status:"error",title:"Error",description:a.errorMessage},null,8,["description"])):(Object(i["G"])(),Object(i["i"])(p,{key:0,size:"tiny",columns:a.columns,data:a.data,loading:a.loading,"row-key":a.rowKey},{empty:Object(i["V"])((function(){return[null===n.entityKey?(Object(i["G"])(),Object(i["i"])(d,{key:0,description:"Select an entity on the left to load its parameters here."},{icon:Object(i["V"])((function(){return[Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(u)]})),_:1})]})),_:1})):(Object(i["G"])(),Object(i["i"])(d,{key:1,description:"Entity has no parameters."},{icon:Object(i["V"])((function(){return[Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(b)]})),_:1})]})),_:1}))]})),_:1},8,["columns","data","loading","row-key"]))]})),_:1})}n("00b4"),n("d81d");var Ie=n("35ce"),Se=n("9790");function Ue(e,t,n,a,r,c){var o=Object(i["N"])("n-tooltip");return Object(i["G"])(),Object(i["i"])(o,null,{trigger:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.name),1)]})),default:Object(i["V"])((function(){return[Object(i["m"])(" "+Object(i["O"])(n.description),1)]})),_:1})}var _e={props:{name:String,description:String}};const qe=F()(_e,[["render",Ue]]);var xe=qe,Ce=Object(i["m"])(" Edit ");function De(e,t,n,a,r,c){var o=Object(i["N"])("n-select"),l=Object(i["N"])("n-input"),u=Object(i["N"])("n-button"),s=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(o,{options:a.species,value:a.currentSpecie,size:"tiny","consistent-menu-width":!1,"onUpdate:value":a.changeState},null,8,["options","value","onUpdate:value"]),"single value"===a.state?(Object(i["G"])(),Object(i["i"])(l,{key:0,value:a.currentValue,"onUpdate:value":a.changeSingleValue,size:"tiny"},null,8,["value","onUpdate:value"])):"value list"===a.state?(Object(i["G"])(),Object(i["i"])(o,{key:1,value:a.currentValue,options:a.valueOptions,size:"tiny","consistent-menu-width":!1,"onUpdate:value":a.changeSingleValue},null,8,["value","options","onUpdate:value"])):"indexed value"===a.state?(Object(i["G"])(),Object(i["i"])(u,{key:2,size:"tiny",onClick:a.emitOpenValueEditorRequest},{default:Object(i["V"])((function(){return[Ce]})),_:1},8,["onClick"])):Object(i["j"])("",!0)]})),_:1})}function Ge(e){var t=[{label:"none",value:"none"}];return e.constant&&t.push({label:"constant",value:"constant"}),e.period&&t.push({label:"period",value:"period"}),e.time&&t.push({label:"time",value:"time"}),t}function Re(e,t){return"none"===e?"empty":"constant"===e?t?"value list":"single value":"indexed value"}function Me(e){if(e){var t=[];return e.forEach((function(e){t.push({label:e,value:e})})),t}}function Ke(e,t,n,a,r){if("none"!==e){if("constant"!==e)return"object"===Object(f["a"])(n)?n:"object"===Object(f["a"])(a)?a:{type:"map",index_type:"str",index_name:e,data:[["T0001",0]]};switch(Object(f["a"])(n)){case"string":return n;case"number":return new String(n);default:return"constant"===t?null!==a?new String(a):"":r?r[0]:""}}}var Ae={props:{valueData:{type:Object,required:!0},valueId:{type:Number,required:!1}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],setup:function(e,t){var n=Object(a["e"])(Ge(e.valueData.allowedSpecies)),r=Object(a["e"])(Re(e.valueData.specie,e.valueData.allowedValues)),i=Object(a["e"])(e.valueData.specie),c=Object(a["e"])(Ke(e.valueData.specie,e.valueData.specie,e.valueData.parameterValue,e.valueData.parameterValue,e.valueData.allowedValues)),o=Object(a["e"])(Me(e.valueData.allowedValues));return Object(a["g"])(Object(a["f"])(e).valueData,(function(e){n.value=Ge(e.allowedSpecies),r.value=Re(e.specie,e.allowedValues),i.value=e.specie,c.value=Ke(e.specie,e.specie,e.parameterValue,e.parameterValue,e.allowedValues),o.value=Me(e.allowedValues)})),{species:n,state:r,currentSpecie:i,currentValue:c,valueOptions:o,changeState:function(n){i.value=n;var a=Re(n,e.valueData.allowedValues);"indexed value"===r.value&&t.emit("closeValueEditorRequest"),r.value=a;var o=Ke(n,e.valueData.specie,c.value,e.valueData.parameterValue,e.valueData.allowedValues);if(void 0===o)t.emit("valueDelete",{id:e.valueId});else{var l="object"===Object(f["a"])(o),u=l?o:v(o);void 0===e.valueId?t.emit("valueInsert",{value:u}):t.emit("valueUpdate",{id:e.valueId,value:u})}c.value=o},changeSingleValue:function(n){var a=v(n);void 0===e.valueId?t.emit("valueInsert",{value:a}):t.emit("valueUpdate",{id:e.valueId,value:a}),c.value=n},emitOpenValueEditorRequest:function(){t.emit("openValueEditorRequest",{valueId:e.valueId,parameterValue:c})}}}};const Pe=F()(Ae,[["render",De]]);var ze=Pe;function Te(e,t){var n={title:"Parameter",key:"name",render:function(e){return Object(a["c"])(xe,{name:e.name,description:e.description})}},r=function(t,n){return void 0===t.id?Object(o["a"])({entityEmblem:e.value.entityEmblem,definitionId:n.definitionId,alternativeId:e.value.alternativeId},t):Object(o["a"])({entityEmblem:e.value.entityEmblem},t)},i={title:"Value",key:"value",render:function(n){return Object(a["c"])(ze,{valueData:{allowedSpecies:n.allowedSpecies,specie:n.specie,parameterValue:n.value,allowedValues:n.allowedValues},valueId:n.valueId,onOpenValueEditorRequest:function(a){t.emit("openValueEditorRequest",{value:a.parameterValue,valueId:a.valueId,entityEmblem:e.value.entityEmblem,parameterName:n.name,definitionId:n.definitionId,alternativeId:e.value.alternativeId})},onCloseValueEditorRequest:function(){t.emit("closeValueEditorRequest",n.name)},onValueInsert:function(e){t.emit("valueInsert",r(e,n))},onValueUpdate:function(e){t.emit("valueUpdate",r(e,n))},onValueDelete:function(e){t.emit("valueDelete",r(e,n))}})}};return[n,i]}var Je=/constant[^.]*\.?$/i,Fe=/period[^.]*\.?$/i,Le=/time[^.]*\.?$/i;function Be(e){var t=Fe.test(e),n=Le.test(e),a=Je.test(e)||!t&&!n;return{constant:a,period:t,time:n}}function $e(e,t){return"object"!==Object(f["a"])(e)||null===e||"map"!==e.type&&"array"!==e.type&&!("content"in e)?"constant":"period"===e.index_name&&t.period?"period":"time"===e.index_name&&t.time?"time":"period"}function We(e,t,n,a){n.forEach((function(n){if(a.isPendingDeletion(e,n.definitionId,t))return n.specie=void 0,void(n.value=void 0);var r=a.pendingValue(e,n.definitionId,t);void 0!==r&&(n.specie=$e(r,n.allowedSpecies),n.value=r)}))}function Xe(e,t,n){return s["g"]("parameter definitions?",e,t,{class_id:n}).then((function(e){return e.definitions}))}function He(e,t,n){return Xe(e,t,n).then(function(){var n=Object(R["a"])(Object(G["a"])().mark((function n(a){var r,i,c;return Object(G["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=[],i=new Map,a.forEach((function(e){var t={};t.name=e.name,t.description=e.description,t.definitionId=e.id,t.allowedSpecies=Be(e.description),t.specie="none",e.parameter_value_list_id&&i.set(e.id,e.parameter_value_list_id),r.push(t)})),!(i.size>0)){n.next=8;break}return n.next=6,s["g"]("parameter value lists?",e,t,{value_list_ids:Object(D["a"])(i.values())}).then((function(e){return e.lists}));case 6:c=n.sent,r.forEach((function(e){var t=i.get(e.definitionId);if(t){var n=c.find((function(e){return t===e.id}));e.allowedValues=n.value_list.map((function(e){return JSON.parse(e)}))}}));case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function Qe(e,t,n,a,r,i,c,l,u,d,b){null===e.promise&&(e.promise=He(a,r,i)),e.promise.then((function(e){var n=[];e.forEach((function(e){n.push(Object(o["a"])({},e))})),void 0===l?(We(c,u,n,d),t.value=n):s["g"]("parameter values?",a,r,{entity_id:l,alternative_id:u}).then(function(){var e=Object(R["a"])(Object(G["a"])().mark((function e(a){return Object(G["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.values.forEach((function(e){var t=n.find((function(t){return e.parameter_definition_id===t.definitionId})),a=JSON.parse(e.value);null!==a&&"object"===Object(f["a"])(a)&&(a.type=e.type),t.value=a,t.specie=$e(a,t.allowedSpecies),t.valueId=e.id})),We(c,u,n,d),t.value=n;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){b.value=e.message})).finally((function(){n.value=!1}))}var Ye={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},entityKey:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],components:{"hand-paper-regular":Ie["a"],"hand-point-left-regular":Se["a"]},setup:function(e,t){var n=Object(a["f"])(e),r=n.entityKey,i=Object(a["e"])(Te(r,t)),c=Object(a["e"])([]),o=Object(a["e"])(!1),l=Object(a["e"])(""),u={promise:null},s=Object(a["a"])((function(){return null===e.entityKey?"":"string"===typeof e.entityKey.entityEmblem?e.entityKey.entityEmblem:e.entityKey.entityEmblem.join(" | ")})),d=Object(a["a"])((function(){return null!==e.entityKey?e.entityKey.alternativeName:""}));return Object(a["g"])(r,(function(t){null!==t?(o.value=!0,Qe(u,c,o,e.projectId,e.modelUrl,e.classId,t.entityEmblem,t.entityId,t.alternativeId,e.diff,l)):c.value.length=0})),{columns:i,data:c,loading:o,errorMessage:l,entityName:s,alternativeName:d,rowKey:function(e){return e.definitionId}}}};const Ze=F()(Ye,[["render",Ve]]);var et=Ze,tt={key:0,strong:""},nt={key:1};function at(e,t,n,a,r,c){var o=Object(i["N"])("n-input"),l=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(l,{vertical:""},{default:Object(i["V"])((function(){return[a.disabled?(Object(i["G"])(),Object(i["k"])("text",nt," - ")):(Object(i["G"])(),Object(i["k"])("text",tt,Object(i["O"])(a.parameterName)+"("+Object(i["O"])(a.indexName)+") ",1)),Object(i["n"])(o,{disabled:a.disabled,value:a.content,type:"textarea",placeholder:"index value",rows:20,"onUpdate:value":a.updateContent},null,8,["disabled","value","onUpdate:value"])]})),_:1})}function rt(e){var t=e.index_name;return void 0!==t?t:"x"}function it(e){if("content"in e)return e.content;var t="";if("map"===e.type)if(Array.isArray(e.data))e.data.forEach((function(e){t=t+"".concat(e[0],"\t").concat(e[1])+"\n"}));else for(var n in e.data)t=t+"".concat(n,"\t").concat(e.data[n])+"\n";else e.data.forEach((function(e){t+="".concat(e,"\n")}));return t}function ct(e,t){return{index_name:t,content:e}}var ot={props:{valueData:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["valueUpdate"],setup:function(e,t){var n=Object(a["e"])(!0),r=Object(a["e"])(""),i=Object(a["e"])(""),c=Object(a["e"])("");return Object(a["g"])(Object(a["f"])(e).valueData,(function(t){if(null===t)return n.value=!0,r.value="",i.value="",void(c.value="");n.value=!1,i.value=t.parameterName;var a=e.diff.pendingValue(t.entityEmblem,t.definitionId,t.alternativeId);void 0===a?(r.value=rt(t.value),c.value=it(t.value)):void 0!==a.contest?(r.value=a.index_name,c.value=a.content):(r.value=rt(a),c.value=it(a))})),{disabled:n,indexName:r,parameterName:i,content:c,updateContent:function(n){c.value=n;var a={value:ct(n,r.value),id:e.valueData.valueId,entityEmblem:e.valueData.entityEmblem,definitionId:e.valueData.definitionId,alternativeId:e.valueData.alternativeId};t.emit("valueUpdate",a)}}}};const lt=F()(ot,[["render",at]]);var ut=lt,st=n("9973"),dt=n("c46e"),bt={props:{indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!0},projectName:{type:String,required:!0},projectId:{type:Number,required:!0},editUrl:{type:String,required:!0},runUrl:{type:String,required:!0},resultsUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},classDescription:{type:String,required:!0},modelUrl:{type:String,required:!0},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"alternative-selection":we,"commit-button":q["a"],"entity-list":ye,"indexed-value-editor":ut,page:st["a"],"page-path":dt["a"],"parameter-table":et},setup:function(e){var t=Object(a["e"])(null),n=Object(a["e"])(!1),r=Object(a["e"])(""),i=Object(a["e"])(!1),c=Object(a["e"])({}),d=new U(e.classId,e.className),b=Object(a["e"])(null),p=Object(a["e"])(null),f=Object(a["e"])(1),j=Object(a["a"])((function(){return"".concat(10+Math.max(20,10*f.value),"em")})),m=Object(l["a"])(),v=Object(u["a"])();return Object(a["g"])(i,_["a"]),{currentEntityKey:Object(a["a"])((function(){return null===b.value||null===p.value?null:Object(o["a"])(Object(o["a"])({},b.value),p.value)})),valueEditorData:t,committing:n,commitErrorMessage:r,pendingChanges:i,insertedEntities:c,pendingModelChanges:d,siderWidth:j,setValueEditorData:function(e){t.value=e},possiblyClearValueEditor:function(e){t.value&&t.value.parameterName===e&&(t.value=null)},storeEntityInsertion:function(e){d.insertEntity(e),i.value=!0},storeEntityUpdate:function(e){d.updateEntity(e.previousEmblem,e.id,e.entityEmblem),i.value=!0},storeEntityDeletion:function(e){d.deleteEntity(e.id,e.entityEmblem),i.value=d.isPending()},storeValueInsertion:function(e){d.insertValue(e.value,e.entityEmblem,e.definitionId,e.alternativeId),i.value=!0},storeValueUpdate:function(e){d.updateValue(e.value,e.id,e.entityEmblem,e.definitionId,e.alternativeId),i.value=!0},storeValueDeletion:function(e){d.deleteValue(e.id,e.entityEmblem,e.definitionId,e.alternativeId),i.value=d.isPending()},commit:function(){n.value=!0;var t=d.makeCommitData();s["b"](t,"Modified entities.",e.projectId,e.modelUrl).then((function(e){e.inserted&&(e.inserted.object?c.value=e.inserted.object:e.inserted.relationship&&(c.value=e.inserted.relationship)),m.success("Commit successful."),i.value=!1})).catch((function(e){v.error({title:"Commit failure",content:e.message})})).finally((function(){d.clearPending(),n.value=!1}))},setRelationshipsClashErrorState:function(e){r.value=e?"Cannot commit: some relationships have the same objects.":""},setEntityDimensions:function(e){f.value=e},setSelectedEntity:function(e){b.value=e,t.value=null},setSelectedAlternative:function(e){p.value=e,t.value=null}}}};n("966e");const pt=F()(bt,[["render",c]]);var ft=pt,jt=a["b"]({});jt.use(r["a"]),jt.component("entities-app",ft),jt.mount("#entities-app")},c46e:function(e,t,n){"use strict";n("b0c0");var a=n("7a23");function r(e,t,n,r,i,c){var o=Object(a["N"])("n-breadcrumb-item"),l=Object(a["N"])("n-breadcrumb");return Object(a["G"])(),Object(a["i"])(l,null,{default:Object(a["V"])((function(){return[(Object(a["G"])(!0),Object(a["k"])(a["b"],null,Object(a["L"])(n.path,(function(e,t){return Object(a["G"])(),Object(a["i"])(o,{href:e.url,key:t},{default:Object(a["V"])((function(){return[Object(a["m"])(Object(a["O"])(e.name),1)]})),_:2},1032,["href"])})),128)),Object(a["n"])(o,null,{default:Object(a["V"])((function(){return[Object(a["m"])(Object(a["O"])(n.leafName),1)]})),_:1})]})),_:1})}var i={props:{path:Array,leafName:String}},c=n("6b0d"),o=n.n(c);const l=o()(i,[["render",r]]);t["a"]=l},d6ec:function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["m"])(" Create ");function i(e,t,n,i,c,o){var l=Object(a["N"])("n-input"),u=Object(a["N"])("n-button"),s=Object(a["N"])("n-space");return Object(a["G"])(),Object(a["i"])(s,null,{default:Object(a["V"])((function(){return[Object(a["n"])(l,{clearable:"",placeholder:i.placeholder,value:i.currentName,"onUpdate:value":t[0]||(t[0]=function(e){return i.currentName=e}),size:"tiny"},null,8,["placeholder","value"]),Object(a["n"])(u,{onClick:i.emitCreate,size:"tiny"},{default:Object(a["V"])((function(){return[r]})),_:1},8,["onClick"])]})),_:1})}n("498a"),n("ac1f"),n("00b4"),n("fb6a");var c=n("f2bf"),o=n("7317"),l={props:{itemName:{type:String,required:!0}},emits:["create"],setup:function(e,t){var n=Object(c["e"])(""),a=Object(c["a"])((function(){return"Enter ".concat(e.itemName," name")})),r=Object(o["a"])();return{currentName:n,placeholder:a,emitCreate:function(){var a=new String(n.value).trim();if(a){var i=/[,]/;if(i.test(a)){var c=e.itemName.charAt(0).toUpperCase()+e.itemName.slice(1);r.error("".concat(c," name contains invalid special characters."))}else t.emit("create",a),n.value=""}else r.error("Please enter name for the new ".concat(e.itemName,"."))}}}},u=n("6b0d"),s=n.n(u);const d=s()(l,[["render",i]]);t["a"]=d},ea95:function(e,t,n){},f77a:function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["m"])(" Commit "),i=Object(a["m"])(" There are pending changes. "),c=Object(a["m"])(" Nothing to commit. ");function o(e,t,n,o,l,u){var s=Object(a["N"])("n-button"),d=Object(a["N"])("n-text"),b=Object(a["N"])("n-space");return Object(a["G"])(),Object(a["i"])(b,{align:"baseline"},{default:Object(a["V"])((function(){return[Object(a["n"])(s,{disabled:o.buttonDisabled,loading:n.committing,onClick:o.emitCommitRequest},{default:Object(a["V"])((function(){return[r]})),_:1},8,["disabled","loading","onClick"]),n.errorMessage?(Object(a["G"])(),Object(a["i"])(d,{key:0,type:"error"},{default:Object(a["V"])((function(){return[Object(a["m"])(Object(a["O"])(n.errorMessage),1)]})),_:1})):n.hasPendingChanges?(Object(a["G"])(),Object(a["i"])(d,{key:1},{default:Object(a["V"])((function(){return[i]})),_:1})):(Object(a["G"])(),Object(a["i"])(d,{key:2},{default:Object(a["V"])((function(){return[c]})),_:1}))]})),_:1})}var l=n("f2bf"),u={props:{hasPendingChanges:{type:Boolean,required:!0},committing:{type:Boolean,required:!0},errorMessage:{type:String,required:!1,default:""}},emit:["commitRequest"],setup:function(e,t){var n=Object(l["a"])((function(){return!e.hasPendingChanges||0!==e.errorMessage.length}));return{buttonDisabled:n,emitCommitRequest:function(){t.emit("commitRequest")}}}},s=n("6b0d"),d=n.n(s);const b=d()(u,[["render",o]]);t["a"]=b}});