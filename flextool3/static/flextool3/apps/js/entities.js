(function(e){function t(t){for(var a,c,o=t[0],u=t[1],l=t[2],d=0,b=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);s&&s(t);while(b.length)b.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={entities:0},i=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;i.push([3,"chunk-vendors"]),n()})({"0274":function(e,t,n){"use strict";var a=n("649f");function r(e,t,n,r,i,c){var o=Object(a["N"])("n-spin"),u=Object(a["N"])("n-result");return"loading"===n.state?(Object(a["G"])(),Object(a["i"])(o,{key:0})):"error"===n.state?(Object(a["G"])(),Object(a["i"])(u,{key:1,status:"error",title:"Error",description:n.errorMessage},null,8,["description"])):"waiting"===n.state?Object(a["M"])(e.$slots,"waiting",{key:2}):Object(a["M"])(e.$slots,"default",{key:3})}var i={props:{state:{type:String,required:!0},errorMessage:{type:String,required:!1,default:""}},state:{loading:"loading",waiting:"waiting",ready:"ready",error:"error"}},c=n("e582"),o=n.n(c);const u=o()(i,[["render",r]]);t["a"]=u},"1d6d":function(e,t,n){"use strict";var a=n("649f");function r(e,t,n,r,i,c){var o=Object(a["N"])("n-input");return Object(a["G"])(),Object(a["i"])(o,{value:r.value,"onUpdate:value":t[0]||(t[0]=function(e){return r.value=e}),ref:"instance",onBlur:r.cancel,onKeydown:r.handleKey,maxlength:"155",size:"small",clearable:""},null,8,["value","onBlur","onKeydown"])}n("a01d"),n("0151");var i=n("a8ce"),c={props:{name:String},emits:["accept","cancel"],setup:function(e,t){var n=Object(i["f"])(e.name),a=Object(i["f"])(null);return Object(i["e"])((function(){var e;null===(e=a.value)||void 0===e||e.select()})),{instance:a,value:n,cancel:function(){n.value=e.name,t.emit("cancel")},handleKey:function(a){var r=n.value.trim();switch(a.key){case"Enter":r&&r!==e.name?t.emit("accept",r):(n.value=e.name,t.emit("cancel"));break;case"Escape":n.value=e.name,t.emit("cancel");break}}}}},o=n("e582"),u=n.n(o);const l=u()(c,[["render",r]]);t["a"]=l},"1e4f":function(e,t,n){"use strict";n("3966")},2225:function(e,t,n){"use strict";n("810a")},3:function(e,t,n){e.exports=n("c30c")},"315d":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"o",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"m",(function(){return j})),n.d(t,"l",(function(){return O})),n.d(t,"q",(function(){return m})),n.d(t,"n",(function(){return v})),n.d(t,"p",(function(){return y})),n.d(t,"g",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"b",(function(){return E}));var a=n("0312");n("ca00"),n("8261"),n("0151"),n("4254"),n("4f18"),n("dad8"),n("b2a6");function r(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var i=r("csrftoken");function c(){return{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":i,"Content-Type":"application/json"}}}function o(e){var t=c();return t["body"]=JSON.stringify({type:"project list?"}),fetch(e,t).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load project list: ".concat(e))}))}))}function u(e,t){var n=c();return n["body"]=JSON.stringify({type:"create project?",name:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to create project: ".concat(e))}))}))}function l(e,t){var n=c();return n["body"]=JSON.stringify({type:"destroy project?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to delete project: ".concat(e))}))}))}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=c();return i["body"]=JSON.stringify(Object(a["a"])({type:e,projectId:t},r)),fetch(n,i).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error("Failed to fetch ".concat(e,": ").concat(t))}))}))}function d(e,t,n,r){var i=c();return i.body=JSON.stringify(Object(a["a"])({type:"commit",projectId:n,message:t},e)),fetch(r,i).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))}))}function b(e,t){var n=c();return n.body=JSON.stringify({type:"current execution?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch current run: ".concat(e))}))}))}function f(e,t,n){var a=c();return a["body"]=JSON.stringify({type:"execute?",projectId:e,scenarios:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to execute: ".concat(e))}))}))}function p(e,t){var n=c();return n["body"]=JSON.stringify({type:"abort?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to abort execution: ".concat(e))}))}))}function j(e,t){var n=c();return n["body"]=JSON.stringify({type:"briefing?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch execution status: ".concat(e))}))}))}function m(e,t,n){var a=c();return a.body=JSON.stringify({type:"summary?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load summary: ".concat(e))}))}))}function v(e,t,n){var a=c();return a.body=JSON.stringify({type:"output directory?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load output directory path: ".concat(e))}))}))}function O(e,t){var n=c();return n.body=JSON.stringify({type:"scenario list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load scenarios: ".concat(e))}))}))}function y(e,t,n){var a=c();return a.body=JSON.stringify({type:"result alternative?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch result alternative: ".concat(e))}))}))}function h(e,t,n){var a=c();return a.body=JSON.stringify({type:"destroy execution?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){if(!e.ok)return e.text().then((function(e){throw new Error("Failed to destroy scenario execution: ".concat(e))}))}))}function g(e,t){var n=c();return n["body"]=JSON.stringify({type:"example list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load example list: ".concat(e))}))}))}function E(e,t,n){var a=c();return a["body"]=JSON.stringify({type:"add to model",name:n,projectId:e}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to add example to model: ".concat(e))}))}))}},3196:function(e,t,n){},3966:function(e,t,n){},"703f":function(e,t,n){"use strict";function a(e){e?addEventListener("beforeunload",r,{capture:!0}):removeEventListener("beforeunload",r,{capture:!0})}function r(e){return e.preventDefault(),e.returnValue="There are uncommitted changes."}n.d(t,"a",(function(){return a}))},"810a":function(e,t,n){},"8e39":function(e,t,n){"use strict";var a=n("649f"),r=Object(a["m"])("Delete");function i(e,t,n,i,c,o){var u=Object(a["N"])("n-button");return Object(a["G"])(),Object(a["i"])(u,{size:"tiny",onClick:i.emitDelete},{default:Object(a["V"])((function(){return[r]})),_:1},8,["onClick"])}var c={props:{emblem:{type:[String,Array],required:!0}},emits:["delete"],setup:function(e,t){return{emitDelete:function(){t.emit("delete",e.emblem)}}}},o=n("e582"),u=n.n(o);const l=u()(c,[["render",i]]);t["a"]=l},9973:function(e,t,n){"use strict";n("a01d");var a=n("649f"),r={class:"page-content"},i={class:"page-content"};function c(e,t,n,c,o,u){var l=Object(a["N"])("navigation-menu"),s=Object(a["N"])("n-card"),d=Object(a["N"])("n-layout-header"),b=Object(a["N"])("n-layout");return Object(a["G"])(),Object(a["i"])(b,{position:"absolute"},{default:Object(a["V"])((function(){return[Object(a["n"])(d,null,{default:Object(a["V"])((function(){return[Object(a["n"])(s,{size:"small"},{default:Object(a["V"])((function(){return[Object(a["n"])(l,{current:n.name,"index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},null,8,["current","index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])]})),_:1}),Object(a["l"])("div",r,[Object(a["M"])(e.$slots,"header")])]})),_:3}),Object(a["l"])("div",i,[Object(a["M"])(e.$slots,"default")])]})),_:3})}var o=Object(a["m"])("User guide"),u=Object(a["m"])(" Log out ");function l(e,t,n,r,i,c){var l=Object(a["N"])("n-image"),s=Object(a["N"])("n-menu"),d=Object(a["N"])("n-space"),b=Object(a["N"])("n-a"),f=Object(a["N"])("n-divider"),p=Object(a["N"])("n-button");return Object(a["G"])(),Object(a["i"])(d,{justify:"space-between",align:"baseline"},{default:Object(a["V"])((function(){return[Object(a["n"])(d,{align:"start"},{default:Object(a["V"])((function(){return[Object(a["n"])(l,{src:n.logoUrl,alt:"FlexTool",width:90,"preview-disabled":""},null,8,["src"]),Object(a["n"])(s,{"default-value":n.current,mode:"horizontal",options:r.links},null,8,["default-value","options"])]})),_:1}),Object(a["n"])(d,{align:"baseline"},{default:Object(a["V"])((function(){return[Object(a["n"])(b,{href:"https://irena-flextool.github.io/flextool/"},{default:Object(a["V"])((function(){return[o]})),_:1}),Object(a["n"])(f,{vertical:""}),Object(a["n"])(p,{onClick:r.logout},{default:Object(a["V"])((function(){return[u]})),_:1},8,["onClick"])]})),_:1})]})),_:1})}var s=n("a8ce"),d=n("d70b");function b(e,t){return function(){return Object(s["c"])(d["a"],{href:t},(function(){return e}))}}function f(e){var t={Projects:e.indexUrl,"Manage project":e.projectUrl,"Edit model":e.editUrl,Run:e.runUrl,Results:e.resultsUrl},n=[];for(var a in t){var r=t[a],i=null!==r,c=i?b(a,r):a;n.push({label:c,key:a,disabled:!i})}return n}var p={props:{current:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},setup:function(e){var t=f(e),n=Object(s["f"])(null);return{links:t,activeKey:n,logout:function(){location.assign(e.logoutUrl)}}}},j=n("e582"),m=n.n(j);const v=m()(p,[["render",l]]);var O=v,y={props:{name:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"navigation-menu":O}};n("2225");const h=m()(y,[["render",c]]);t["a"]=h},bc2a:function(e,t,n){"use strict";n("3196")},c30c:function(e,t,n){"use strict";n.r(t);n("b2c9"),n("2ae8"),n("b75d"),n("ce9f");var a=n("a8ce"),r=n("937e"),i=n("649f"),c=Object(i["m"])("Alternatives");function o(e,t,n,a,r,o){var u=Object(i["N"])("page-path"),l=Object(i["N"])("n-h1"),s=Object(i["N"])("n-p"),d=Object(i["N"])("commit-button"),b=Object(i["N"])("n-h2"),f=Object(i["N"])("entity-list"),p=Object(i["N"])("n-space"),j=Object(i["N"])("alternative-selection"),m=Object(i["N"])("n-layout-sider"),v=Object(i["N"])("parameter-table"),O=Object(i["N"])("n-grid-item"),y=Object(i["N"])("indexed-value-editor"),h=Object(i["N"])("n-grid"),g=Object(i["N"])("n-layout-content"),E=Object(i["N"])("n-layout"),N=Object(i["N"])("page");return Object(i["G"])(),Object(i["i"])(N,{name:"Edit model","index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},{header:Object(i["V"])((function(){return[Object(i["n"])(u,{path:[{name:"Projects",url:n.indexUrl},{name:n.projectName,url:n.projectUrl},{name:"Model",url:n.editUrl}],"leaf-name":n.className},null,8,["path","leaf-name"]),Object(i["n"])(l,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.className),1)]})),_:1}),Object(i["W"])(Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.classDescription),1)]})),_:1},512),[[i["S"],"None"!==n.classDescription]]),Object(i["n"])(d,{"has-pending-changes":a.pendingChanges,committing:a.committing,"error-message":a.commitErrorMessage,onCommitRequest:a.commit},null,8,["has-pending-changes","committing","error-message","onCommitRequest"])]})),default:Object(i["V"])((function(){return[Object(i["n"])(E,{id:"main-layout","has-sider":"",position:"absolute"},{default:Object(i["V"])((function(){return[Object(i["n"])(m,{width:a.siderWidth},{default:Object(i["V"])((function(){return[Object(i["n"])(p,null,{default:Object(i["V"])((function(){return[Object(i["n"])(p,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(b,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(a.entityTypeName),1)]})),_:1}),Object(i["n"])(f,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"class-name":n.className,"class-type":n.classType,inserted:a.insertedEntities,onEntitySelect:a.setSelectedEntity,onEntityInsert:a.storeEntityInsertion,onEntityUpdate:a.storeEntityUpdate,onEntityDelete:a.storeEntityDeletion,onRelationshipsClash:a.setRelationshipsClashErrorState,onEntityDimensionsReveal:a.setEntityDimensions},null,8,["project-id","model-url","class-id","class-name","class-type","inserted","onEntitySelect","onEntityInsert","onEntityUpdate","onEntityDelete","onRelationshipsClash","onEntityDimensionsReveal"])]})),_:1}),Object(i["n"])(p,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(b,null,{default:Object(i["V"])((function(){return[c]})),_:1}),Object(i["n"])(j,{"project-id":n.projectId,"model-url":n.modelUrl,onAlternativeSelect:a.setSelectedAlternative},null,8,["project-id","model-url","onAlternativeSelect"])]})),_:1})]})),_:1})]})),_:1},8,["width"]),Object(i["n"])(g,{"content-style":"margin-left: 1em; margin-right: 1em"},{default:Object(i["V"])((function(){return[Object(i["n"])(h,{cols:"1 m:2",responsive:"screen"},{default:Object(i["V"])((function(){return[Object(i["n"])(O,null,{default:Object(i["V"])((function(){return[Object(i["n"])(v,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"entity-key":a.currentEntityKey,diff:a.pendingModelChanges,onOpenValueEditorRequest:a.setValueEditorData,onCloseValueEditorRequest:a.possiblyClearValueEditor,onValueInsert:a.storeValueInsertion,onValueUpdate:a.storeValueUpdate,onValueDelete:a.storeValueDeletion},null,8,["project-id","model-url","class-id","entity-key","diff","onOpenValueEditorRequest","onCloseValueEditorRequest","onValueInsert","onValueUpdate","onValueDelete"])]})),_:1}),Object(i["n"])(O,null,{default:Object(i["V"])((function(){return[Object(i["n"])(y,{"value-data":a.valueEditorData,diff:a.pendingModelChanges,onValueUpdate:a.storeValueUpdate},null,8,["value-data","diff","onValueUpdate"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])}var u=n("0312"),l=(n("f2d5"),n("4f18"),n("a253")),s=n("274c"),d=n("315d"),b=n("2341"),f=n("e83a"),p=n("cc33"),j=n("c86a"),m=n("6f2c"),v=n("1f45");n("d6a1"),n("5385"),n("4c87"),n("5ee3"),n("66a1"),n("3865"),n("ca00"),n("8261"),n("0151"),n("a01d"),n("dad8"),n("ff84");function O(e){if(!e.trim())return null;var t=parseFloat(e);return isNaN(t)?"NAN"===e.toUpperCase()?t:e:t}n("cf25");function y(e,t){return e+"_"+t.join("__")}function h(e,t){return"string"===typeof t?t:y(e,t)}var g=Symbol("insert action"),E=Symbol("delete action"),N=Symbol("update action"),w=Object(m["a"])((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(v["a"])(this,e),this.action=t,this.parameters=new Map}));function k(e,t){var n=e.parameters.get(t);return void 0===n&&(n=new Map,e.parameters.set(t,n)),n}function V(e){if("object"!==Object(j["a"])(e)||!("content"in e))return e;var t=[];return e.content.split("\n").forEach((function(e){if(e=e.trim(),e){var n=e.split(/\s+/);1===n.length?t.push(O(n[0])):t.push([n[0],O(n[1])])}})),!t||t[0].length>1?{type:"map",index_type:"str",index_name:e.index_name,data:t}:{type:"array",value_type:"number"===typeof t[0]?"float":"str",data:t}}var I=new WeakMap,S=new WeakMap,_=new WeakMap,U=function(){function e(t,n){Object(v["a"])(this,e),Object(b["a"])(this,I,{writable:!0,value:void 0}),Object(b["a"])(this,S,{writable:!0,value:void 0}),Object(b["a"])(this,_,{writable:!0,value:void 0}),Object(p["a"])(this,I,t),Object(p["a"])(this,S,n),Object(p["a"])(this,_,new Map)}return Object(m["a"])(e,[{key:"makeCommitData",value:function(){var e=[],t=[],n=[],a=[],r=[],i=[],c=[],o=[],u=[];return Object(f["a"])(this,_).forEach((function(i,l){var s=i.action;if(s)if(s.action===g)void 0===s.objectNames?e.push({name:s.name}):a.push({name:s.name,object_name_list:s.objectNames});else{if(s.action!==N){if(s.action===E)return void n.push(s.id);throw Error("Unknown object action.")}void 0===s.objects?t.push({id:s.id,name:s.name}):r.push({id:s.id,name:s.name,object_name_list:s.objects})}i.parameters.forEach((function(e,t){e.forEach((function(e,n){e.action===g?c.push({entity_name:l,definition_id:t,alternative_id:n,value:V(e.value)}):e.action===N?o.push({id:e.id,value:V(e.value)}):e.action===E&&u.push(e.id)}))}))})),{class_id:Object(f["a"])(this,I),insertions:{object:e,relationship:a,parameter_value:c},updates:{object:t,relationship:r,parameter_value:o},deletions:{object:n,relationship:i,parameter_value:u}}}},{key:"isPending",value:function(){return Object(f["a"])(this,_).size>0}},{key:"clearPending",value:function(){Object(f["a"])(this,_).clear()}},{key:"getPendingEntity",value:function(e){var t=h(Object(f["a"])(this,S),e),n=Object(f["a"])(this,_).get(t);return void 0===n&&(n=new w,Object(f["a"])(this,_).set(t,n)),n}},{key:"insertEntity",value:function(e){if("string"===typeof e)Object(f["a"])(this,_).set(e,new w({action:g,name:e}));else{var t=y(Object(f["a"])(this,S),e);Object(f["a"])(this,_).set(t,new w({action:g,name:t,objectNames:e}))}}},{key:"updateEntity",value:function(e,t,n){var a=function(e,t){return void 0===e||e.action===N&&t!==e.originalName};if("string"===typeof n){var r=Object(f["a"])(this,_).get(e);void 0===r?Object(f["a"])(this,_).set(n,new w({action:N,id:t,name:n,originalName:e})):a(r.action,n)?r.action={action:N,id:t,name:n,originalName:r.action.originalName}:r.action.action===g&&(r.action.name=n)}else{var i=y(Object(f["a"])(this,S),e),c=y(Object(f["a"])(this,S),n),o=Object(f["a"])(this,_).get(i);void 0===o?Object(f["a"])(this,_).set(c,new w({action:N,id:t,name:c,objects:n,originalName:i,originalObjects:e})):a(o.action,c)?o.action={action:N,id:t,name:c,objects:n,originalName:i,originalEmblem:e}:o.action.action===g&&(o.action.name=c,o.action.objectNames=n)}}},{key:"deleteEntity",value:function(e,t){var n=h(Object(f["a"])(this,S),t),a=Object(f["a"])(this,_).get(n);void 0===a?Object(f["a"])(this,_).set(n,new w({action:E,id:e})):void 0===a.action||a.action.action!==g?(a.action={action:E,id:e},a.parameters.clear()):Object(f["a"])(this,_).delete(n)}},{key:"insertValue",value:function(e,t,n,a){var r=h(Object(f["a"])(this,S),t),i=this.getPendingEntity(r),c={action:g,entity_name:r,definition_id:n,alternative_id:a,value:e},o=k(i,n);o.set(a,c)}},{key:"updateValue",value:function(e,t,n,a,r){var i=this.getPendingEntity(n),c=k(i,a),o=void 0;o=void 0===t?{action:g,entity_name:h(Object(f["a"])(this,S),n),definition_id:a,alternative_id:r,value:e}:{action:N,id:t,value:e},c.set(r,o)}},{key:"deleteValue",value:function(e,t,n,a){var r=this.getPendingEntity(t),i=k(r,n);void 0===e?(i.delete(a),0===i.size&&(r.parameters.delete(n),0===r.parameters.size&&void 0===r.action&&Object(f["a"])(this,_).delete(t))):i.set(a,{action:E,id:e})}},{key:"pendingValue",value:function(e,t,n){var a=h(Object(f["a"])(this,S),e),r=Object(f["a"])(this,_).get(a);if(void 0!==r){var i=r.parameters.get(t);if(void 0!==i){var c=i.get(n);return void 0!==c?c.value:void 0}}}},{key:"isPendingDeletion",value:function(e,t,n){var a=h(Object(f["a"])(this,S),e),r=Object(f["a"])(this,_).get(a);if(void 0===r)return!1;var i=r.parameters.get(t);if(void 0===i)return!1;var c=i.get(n);return void 0!==c&&i.get(n).action===E}}]),e}(),x=n("703f"),q=n("f77a");function C(e,t,n,a,r,c){var o=Object(i["N"])("n-tree"),u=Object(i["N"])("new-named-item-row"),l=Object(i["N"])("entity-list-new-relationship-row"),s=Object(i["N"])("n-space"),d=Object(i["N"])("fetchable");return Object(i["G"])(),Object(i["i"])(d,{state:a.state,"error-message":a.errorMessage},{default:Object(i["V"])((function(){return[Object(i["n"])(s,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(o,{selectable:"","block-node":"",data:a.entityList,"render-label":a.renderLabel,"render-suffix":a.renderSuffix,"selected-keys":a.selectedKeys,size:"tiny","onUpdate:selectedKeys":a.emitEntitySelect},null,8,["data","render-label","render-suffix","selected-keys","onUpdate:selectedKeys"]),1===n.classType?(Object(i["G"])(),Object(i["i"])(u,{key:0,"item-name":"object",onCreate:a.addObject},null,8,["onCreate"])):(Object(i["G"])(),Object(i["i"])(l,{key:1,"available-objects":a.availableObjects,onRelationshipCreate:a.addRelationship},null,8,["available-objects","onRelationshipCreate"]))]})),_:1})]})),_:1},8,["state","error-message"])}var D=n("8f57"),G=n("51c8"),R=n("b655"),M=n("39a3");n("0997"),n("4d96"),n("e014"),n("c6fb");function A(e,t){return"string"===typeof e?e===t:K(e,t)}function K(e,t){for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0}var P=n("0274");function z(e,t,n,a,r,c){var o=Object(i["N"])("n-text"),u=Object(i["N"])("item-name-input"),l=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(l,{align:"baseline"},{default:Object(i["V"])((function(){return[a.editing?(Object(i["G"])(),Object(i["i"])(u,{key:1,name:n.objectName,onAccept:a.emitRename,onCancel:a.hideInput},null,8,["name","onAccept","onCancel"])):(Object(i["G"])(),Object(i["i"])(o,{key:0,onDblclick:a.showInput},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.objectName),1)]})),_:1},8,["onDblclick"]))]})),_:1})}var T=n("1d6d"),J={props:{objectName:{type:String,required:!0},objectId:{type:Number,required:!1}},emits:["rename"],components:{"item-name-input":T["a"]},setup:function(e,t){var n=Object(a["f"])(!1),r=Object(a["f"])(null);return{editing:n,inputInstance:r,showInput:function(){n.value=!0},hideInput:function(){n.value=!1},emitRename:function(a){n.value=!1,t.emit("rename",{id:e.objectId,previousEmblem:e.objectName,entityEmblem:a})}}}},F=n("e582"),L=n.n(F);const B=L()(J,[["render",z]]);var $=B;function W(e,t,n,a,r,c){var o=Object(i["N"])("entity-list-relationship-object"),u=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(u,{align:"baseline"},{default:Object(i["V"])((function(){return[(Object(i["G"])(!0),Object(i["k"])(i["b"],null,Object(i["L"])(n.objects,(function(e,t){return Object(i["G"])(),Object(i["i"])(o,{"object-name":e,"object-names-clash":n.objectNamesClash,dimension:t,"available-objects":n.availableObjects[t],key:t,onAccept:a.emitObjectsUpdate},null,8,["object-name","object-names-clash","dimension","available-objects","onAccept"])})),128))]})),_:1})}function X(e,t,n,a,r,c){var o=Object(i["N"])("n-tag"),u=Object(i["N"])("entity-list-relationship-object-input");return a.editing?(Object(i["G"])(),Object(i["i"])(u,{key:1,"object-name":n.objectName,"available-objects":n.availableObjects,onAccept:a.accept,onCancel:a.hideInput},null,8,["object-name","available-objects","onAccept","onCancel"])):(Object(i["G"])(),Object(i["i"])(o,{key:0,type:a.tagType,onClick:a.startEditing,size:"small"},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.objectName),1)]})),_:1},8,["type","onClick"]))}function H(e,t,n,a,r,c){var o=Object(i["N"])("n-select");return Object(i["G"])(),Object(i["i"])(o,{value:a.currentObject,"onUpdate:value":t[0]||(t[0]=function(e){return a.currentObject=e}),ref:"instance",filterable:"",options:a.options,size:"tiny","show-arrow":!1,class:"entity-list-select","consistent-menu-width":!1,onBlur:a.accept,onKeydown:a.handleKey},null,8,["value","options","onBlur","onKeydown"])}var Q={props:{objectName:{type:String,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept","cancel"],setup:function(e,t){var n=[];e.availableObjects.forEach((function(e){n.push({label:e,value:e,style:{"font-size":"12px"}})}));var r=Object(a["f"])(e.objectName),i=Object(a["f"])(null);Object(a["e"])((function(){var e;null===(e=i.value)||void 0===e||e.focus()}));var c=function(){r.value!==e.objectName?t.emit("accept",r.value):t.emit("cancel")},o=function(){t.emit("cancel")};return{options:n,currentObject:r,instance:i,accept:c,cancel:o,handleKey:function(e){switch(e.key){case"Enter":c();break;case"Escape":o();break}}}}};const Y=L()(Q,[["render",H]]);var Z=Y,ee={props:{objectName:{type:String,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1},dimension:{type:Number,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept"],components:{"entity-list-relationship-object-input":Z},setup:function(e,t){var n=Object(a["a"])((function(){return e.objectNamesClash?"error":"default"})),r=Object(a["f"])(!1);return{tagType:n,editing:r,startEditing:function(){r.value=!0},accept:function(n){r.value=!1,t.emit("accept",{dimension:e.dimension,objectName:n})},hideInput:function(){r.value=!1}}}};const te=L()(ee,[["render",X]]);var ne=te,ae={props:{objects:{type:Array,required:!0},originalObjects:{type:Array,required:!0},relationshipId:{type:Number,required:!1},availableObjects:{type:Array,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1}},emits:["objectsUpdate"],components:{"entity-list-relationship-object":ne},setup:function(e,t){return{emitObjectsUpdate:function(n){var a=[];e.objects.forEach((function(e,t){t!==n.dimension?a.push(e):a.push(n.objectName)}));var r=null!==e.originalObjects?e.originalObjects:e.objects;t.emit("objectsUpdate",{id:e.relationshipId,previousEmblem:r,entityEmblem:a})}}}};const re=L()(ae,[["render",W]]);var ie=re,ce=n("8e39"),oe=n("d6ec"),ue=Object(i["m"])(" Create ");function le(e,t,n,a,r,c){var o=Object(i["N"])("n-select"),u=Object(i["N"])("n-button"),l=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(l,{align:"baseline",size:"small"},{default:Object(i["V"])((function(){return[(Object(i["G"])(!0),Object(i["k"])(i["b"],null,Object(i["L"])(a.dimensions,(function(e){return Object(i["G"])(),Object(i["i"])(o,{key:e,options:a.options[e],filterable:"",placeholder:a.placeholderText(e),"show-arrow":!1,size:"tiny","consistent-menu-width":!1,"onUpdate:value":a.updateSelection,class:"entity-list-select"},null,8,["options","placeholder","onUpdate:value"])})),128)),Object(i["n"])(u,{onClick:a.emitRelationshipCreate,size:"tiny",disabled:!a.wellDefined},{default:Object(i["V"])((function(){return[ue]})),_:1},8,["onClick","disabled"])]})),_:1})}n("b2a6");function se(e){var t=[];return e.forEach((function(e,n){var a=[];e.forEach((function(e){a.push({label:e,value:e,dimension:n,style:{"font-size":"12px"}})})),t.push(a)})),t}var de={props:{availableObjects:{type:Array,required:!0}},emits:["relationshipCreate"],setup:function(e,t){var n=Object(G["a"])(Array(e.availableObjects.length).keys()),r=se(e.availableObjects),i=Array(e.availableObjects.length),c=Object(a["f"])(!1);return{dimensions:n,options:r,wellDefined:c,emitRelationshipCreate:function(){t.emit("relationshipCreate",i)},updateSelection:function(e,t){i[t.dimension]=e,i.forEach((function(e,t){void 0!==e&&t===i.length-1&&(c.value=!0)}))},placeholderText:function(e){var t=null;switch(e){case 0:t="st";break;case 1:t="nd";break;case 2:t="rd";break;default:t="th"}return"".concat(e+1).concat(t," object")}}}};const be=L()(de,[["render",le]]);var fe=be;function pe(e,t,n,a,r,i){var c={object_class_id:n};d["j"]("objects?",e,t,c).then(function(){var e=Object(M["a"])(Object(R["a"])().mark((function e(t){var n,i;return Object(R["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.objects,i=[],n.forEach((function(e){i.push({entityEmblem:e.name,entityId:e.id,key:e.name})})),a.value=i,r.value=P["a"].state.ready;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.value=e.message,r.value=P["a"].state.error}))}function je(e,t,n){var a={relationship_class_id:n};return d["j"]("available relationship objects?",e,t,a).then((function(e){return e.available_objects}))}function me(e,t,n,a,r,i,c,o){var u={relationship_class_id:n};d["j"]("relationships?",e,t,u).then(function(){var o=Object(M["a"])(Object(R["a"])().mark((function o(u){var l,s,d;return Object(R["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return l=u.relationships,s=new Map,l.forEach((function(e){var t=s.get(e.id);void 0===t&&(t=[],s.set(e.id,t)),t.push(e.object_name)})),o.next=5,je(e,t,n);case 5:r.value=o.sent,i("entityDimensionsReveal",r.value.length),d=[],s.forEach((function(e,t){d.push({entityEmblem:e,originalEmblem:Object(G["a"])(e),entityId:t,availableObjects:r,objectNamesClash:!1,key:e.join(",")})})),d.sort((function(e,t){for(var n=0;n<e.entityEmblem.length;++n){var a=e.entityEmblem[n].toUpperCase(),r=t.entityEmblem[n].toUpperCase();if(a!==r)return a>r}return!1})),a.value=d,c.value=P["a"].state.ready;case 12:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){o.value=e.message,c.value=P["a"].state.error}))}function ve(e){return{entityEmblem:e.entityEmblem,entityId:e.entityId}}var Oe={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},inserted:{type:Object,required:!1}},emits:["entitySelect","entityInsert","entityUpdate","entityDelete","relationshipsClash","entityDimensionsReveal"],components:{fetchable:P["a"],"new-named-item-row":oe["a"],"entity-list-new-relationship-row":fe},setup:function(e,t){var n=Object(a["f"])(P["a"].state.loading),r=Object(a["f"])([]),i=Object(a["f"])(""),c=Object(a["f"])([]),o=Object(a["f"])([]),u=Object(s["a"])();Object(a["e"])((function(){1===e.classType?pe(e.projectId,e.modelUrl,e.classId,r,n,i):me(e.projectId,e.modelUrl,e.classId,r,o,t.emit,n,i)}));var l=function(e){for(var n=void 0,a=r.value.length-1;-1!=a;--a){var i=r.value[a];A(i.entityEmblem,e)&&(n=i.entityId,r.value.splice(a,1))}t.emit("entityDelete",{id:n,entityEmblem:e})},d=function(e){var n=r.value.find((function(t){return e.entityEmblem===t.entityEmblem}));n?u.error({title:"Cannot rename",content:"An object with the same name already exists."}):(r.value.forEach((function(t){t.entityEmblem==e.previousEmblem&&(t.entityEmblem=e.entityEmblem)})),t.emit("entityUpdate",e))},b=function(e){var n,a=r.value.find((function(t){return K(e.entityEmblem,t.entityEmblem)})),i=void 0!==a,c=Object(D["a"])(r.value);try{for(c.s();!(n=c.n()).done;){var o=n.value;if(K(e.previousEmblem,o.originalEmblem)){o.objectNamesClash=i,o.entityEmblem=e.entityEmblem,i||(o.originalEmblem=Object(G["a"])(e.entityEmblem));break}}}catch(u){c.e(u)}finally{c.f()}t.emit("relationshipsClash",a),a||t.emit("entityUpdate",e)};return Object(a["h"])(Object(a["g"])(e).inserted,(function(n){n&&(r.value.forEach((function(t){var a=h(e.className,t.entityEmblem),r=n[a];void 0!==r&&(t.entityId=r)})),c.value.length=0,t.emit("entitySelect",null))})),{state:n,entityList:r,errorMessage:i,selectedKeys:c,availableObjects:o,renderLabel:function(t){return 1===e.classType?Object(a["c"])($,{objectName:t.option.entityEmblem,objectId:t.option.entityId,onRename:d}):Object(a["c"])(ie,{objects:t.option.entityEmblem,originalObjects:t.option.originalEmblem,relationshipId:t.option.entityId,availableObjects:t.option.availableObjects,objectNamesClash:t.option.objectNamesClash,onObjectsUpdate:b})},renderSuffix:function(e){return Object(a["c"])(ce["a"],{emblem:e.option.entityEmblem,onDelete:l})},emitEntitySelect:function(e,n){if(0!==e.length){var a=n[0];c.value=[a.key],t.emit("entitySelect",ve(a))}else c.value.length=0},addObject:function(e){var n=r.value.find((function(t){return e===t.entityEmblem}));if(n)u.error({title:"Cannot create",content:"An entity with the same name already exists."});else{var a={entityEmblem:e,entityId:void 0,key:e},i=r.value.findIndex((function(t){return e<t.entityEmblem}));r.value.splice(i>=0?i:r.value.length,0,a),t.emit("entityInsert",e),c.value=[a.key],t.emit("entitySelect",ve(a))}},addRelationship:function(e){var n=r.value.find((function(t){return K(e,t.entityEmblem)}));if(n)u.error({title:"Cannot create relationship",content:"A relationship with the same objects already exists."});else{var a=Object(G["a"])(e),i={entityEmblem:a,originalEmblem:Object(G["a"])(a),entityId:void 0,availableObjects:o,objectNamesClash:!1,key:e.join(",")},l=r.value.findIndex((function(t){return e[0]<t.entityEmblem}));r.value.splice(l>=0?l:r.value.length,0,i),t.emit("entityInsert",a),c.value=[i.key],t.emit("entitySelect",ve(i))}}}}};n("1e4f");const ye=L()(Oe,[["render",C]]);var he=ye;function ge(e,t,n,a,r,c){var o=Object(i["N"])("n-tree"),u=Object(i["N"])("fetchable");return Object(i["G"])(),Object(i["i"])(u,{state:a.state,"error-message":a.errorMessage},{default:Object(i["V"])((function(){return[Object(i["n"])(o,{selectable:"","block-node":"",data:a.alternatives,"selected-keys":a.selectedIds,"onUpdate:selectedKeys":a.emitSelected},null,8,["data","selected-keys","onUpdate:selectedKeys"])]})),_:1},8,["state","error-message"])}function Ee(e,t){return Object(d["j"])("make base alternative",e,t,{}).then((function(e){return e.alternatives}))}var Ne={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0}},emits:["alternativeSelect"],components:{fetchable:P["a"]},setup:function(e,t){var n=Object(a["f"])([]),r=Object(a["f"])([]),i=Object(a["f"])(P["a"].state.loading),c=Object(a["f"])("");return Object(a["e"])((function(){Object(d["j"])("alternatives?",e.projectId,e.modelUrl).then(function(){var t=Object(M["a"])(Object(R["a"])().mark((function t(a){var r,c,o;return Object(R["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==a.alternatives.length){t.next=4;break}return t.next=3,Ee(e.projectId,e.modelUrl);case 3:a.alternatives=t.sent;case 4:r=Object(D["a"])(a.alternatives);try{for(r.s();!(c=r.n()).done;)o=c.value,n.value.push({label:o.name,key:o.id})}catch(u){r.e(u)}finally{r.f()}i.value=P["a"].state.ready;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){i.value=P["a"].state.error,c.value=e.message}))})),{alternatives:n,selectedIds:r,state:i,errorMessage:c,emitSelected:function(e,n){var a=n[0];r.value=[a.key],t.emit("alternativeSelect",{alternativeId:a.key,alternativeName:a.label})}}}};const we=L()(Ne,[["render",ge]]);var ke=we,Ve=Object(i["m"])("―");function Ie(e,t,n,a,r,c){var o=Object(i["N"])("n-text"),u=Object(i["N"])("n-space"),l=Object(i["N"])("hand-point-left-regular"),s=Object(i["N"])("n-icon"),d=Object(i["N"])("n-empty"),b=Object(i["N"])("hand-paper-regular"),f=Object(i["N"])("n-data-table"),p=Object(i["N"])("n-result");return Object(i["G"])(),Object(i["i"])(u,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(u,null,{default:Object(i["V"])((function(){return[Object(i["n"])(o,{strong:""},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(a.entityName),1)]})),_:1}),Object(i["n"])(o,null,{default:Object(i["V"])((function(){return[Ve]})),_:1}),Object(i["n"])(o,{italic:""},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(a.alternativeName),1)]})),_:1})]})),_:1}),a.errorMessage?(Object(i["G"])(),Object(i["i"])(p,{key:1,status:"error",title:"Error",description:a.errorMessage},null,8,["description"])):(Object(i["G"])(),Object(i["i"])(f,{key:0,size:"tiny",columns:a.columns,data:a.data,loading:a.loading,"row-key":a.rowKey},{empty:Object(i["V"])((function(){return[null===n.entityKey?(Object(i["G"])(),Object(i["i"])(d,{key:0,description:"Select an entity on the left to load its parameters here."},{icon:Object(i["V"])((function(){return[Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(l)]})),_:1})]})),_:1})):(Object(i["G"])(),Object(i["i"])(d,{key:1,description:"Entity has no parameters."},{icon:Object(i["V"])((function(){return[Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(b)]})),_:1})]})),_:1}))]})),_:1},8,["columns","data","loading","row-key"]))]})),_:1})}n("3cef"),n("cf64");var Se=n("5ea7"),_e=n("70c6");function Ue(e,t,n,a,r,c){var o=Object(i["N"])("n-tooltip");return Object(i["G"])(),Object(i["i"])(o,null,{trigger:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.name),1)]})),default:Object(i["V"])((function(){return[Object(i["m"])(" "+Object(i["O"])(n.description),1)]})),_:1})}var xe={props:{name:{type:String,required:!0},description:{type:String,required:!0}}};const qe=L()(xe,[["render",Ue]]);var Ce=qe,De=Object(i["m"])(" Edit ");function Ge(e,t,n,a,r,c){var o=Object(i["N"])("n-select"),u=Object(i["N"])("n-input"),l=Object(i["N"])("n-button"),s=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(o,{options:a.species,value:a.currentSpecie,size:"tiny","consistent-menu-width":!1,"onUpdate:value":a.changeState},null,8,["options","value","onUpdate:value"]),"single value"===a.state?(Object(i["G"])(),Object(i["i"])(u,{key:0,value:a.currentValue,"onUpdate:value":a.changeSingleValue,size:"tiny"},null,8,["value","onUpdate:value"])):"value list"===a.state?(Object(i["G"])(),Object(i["i"])(o,{key:1,value:a.currentValue,options:a.valueOptions,size:"tiny","consistent-menu-width":!1,"onUpdate:value":a.changeSingleValue},null,8,["value","options","onUpdate:value"])):"indexed value"===a.state?(Object(i["G"])(),Object(i["i"])(l,{key:2,size:"tiny",onClick:a.emitOpenValueEditorRequest},{default:Object(i["V"])((function(){return[De]})),_:1},8,["onClick"])):Object(i["j"])("",!0)]})),_:1})}function Re(e){var t=[{label:"none",value:"none"}];return e.constant&&t.push({label:"constant",value:"constant"}),e.period&&t.push({label:"period",value:"period"}),e.time&&t.push({label:"time",value:"time"}),t}function Me(e,t){return"none"===e?"empty":"constant"===e?t?"value list":"single value":"indexed value"}function Ae(e){if(e){var t=[];return e.forEach((function(e){t.push({label:e,value:e})})),t}}function Ke(e,t,n,a,r){if("none"!==e){if("constant"!==e)return"object"===Object(j["a"])(n)?n:"object"===Object(j["a"])(a)?a:{type:"map",index_type:"str",index_name:e,data:[["T0001",0]]};switch(Object(j["a"])(n)){case"string":return n;case"number":return new String(n);default:return"constant"===t?null!==a?new String(a):"":r?r[0]:""}}}var Pe={props:{valueData:{type:Object,required:!0},valueId:{type:Number,required:!1}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],setup:function(e,t){var n=Object(a["f"])(Re(e.valueData.allowedSpecies)),r=Object(a["f"])(Me(e.valueData.specie,e.valueData.allowedValues)),i=Object(a["f"])(e.valueData.specie),c=Object(a["f"])(Ke(e.valueData.specie,e.valueData.specie,e.valueData.parameterValue,e.valueData.parameterValue,e.valueData.allowedValues)),o=Object(a["f"])(Ae(e.valueData.allowedValues));return Object(a["h"])(Object(a["g"])(e).valueData,(function(e){n.value=Re(e.allowedSpecies),r.value=Me(e.specie,e.allowedValues),i.value=e.specie,c.value=Ke(e.specie,e.specie,e.parameterValue,e.parameterValue,e.allowedValues),o.value=Ae(e.allowedValues)})),{species:n,state:r,currentSpecie:i,currentValue:c,valueOptions:o,changeState:function(n){i.value=n;var a=Me(n,e.valueData.allowedValues);"indexed value"===r.value&&t.emit("closeValueEditorRequest"),r.value=a;var o=Ke(n,e.valueData.specie,c.value,e.valueData.parameterValue,e.valueData.allowedValues);if(void 0===o)t.emit("valueDelete",{id:e.valueId});else{var u="object"===Object(j["a"])(o),l=u?o:O(o);void 0===e.valueId?t.emit("valueInsert",{value:l}):t.emit("valueUpdate",{id:e.valueId,value:l})}c.value=o},changeSingleValue:function(n){var a=O(n);void 0===e.valueId?t.emit("valueInsert",{value:a}):t.emit("valueUpdate",{id:e.valueId,value:a}),c.value=n},emitOpenValueEditorRequest:function(){t.emit("openValueEditorRequest",{valueId:e.valueId,parameterValue:c})}}}};const ze=L()(Pe,[["render",Ge]]);var Te=ze;function Je(e,t){var n={title:"Parameter",key:"name",render:function(e){return Object(a["c"])(Ce,{name:e.name,description:e.description})}},r=function(t,n){return void 0===t.id?Object(u["a"])({entityEmblem:e.value.entityEmblem,definitionId:n.definitionId,alternativeId:e.value.alternativeId},t):Object(u["a"])({entityEmblem:e.value.entityEmblem},t)},i={title:"Value",key:"value",render:function(n){return Object(a["c"])(Te,{valueData:{allowedSpecies:n.allowedSpecies,specie:n.specie,parameterValue:n.value,allowedValues:n.allowedValues},valueId:n.valueId,onOpenValueEditorRequest:function(a){t.emit("openValueEditorRequest",{value:a.parameterValue,valueId:a.valueId,entityEmblem:e.value.entityEmblem,parameterName:n.name,definitionId:n.definitionId,alternativeId:e.value.alternativeId})},onCloseValueEditorRequest:function(){t.emit("closeValueEditorRequest",n.name)},onValueInsert:function(e){t.emit("valueInsert",r(e,n))},onValueUpdate:function(e){t.emit("valueUpdate",r(e,n))},onValueDelete:function(e){t.emit("valueDelete",r(e,n))}})}};return[n,i]}var Fe=/constant[^.]*\.?$/i,Le=/period[^.]*\.?$/i,Be=/time[^.]*\.?$/i;function $e(e){var t=Le.test(e),n=Be.test(e),a=Fe.test(e)||!t&&!n;return{constant:a,period:t,time:n}}function We(e,t){return"object"!==Object(j["a"])(e)||null===e||"map"!==e.type&&"array"!==e.type&&!("content"in e)?"constant":"period"===e.index_name&&t.period?"period":"time"===e.index_name&&t.time?"time":"period"}function Xe(e,t,n,a){n.forEach((function(n){if(a.isPendingDeletion(e,n.definitionId,t))return n.specie=void 0,void(n.value=void 0);var r=a.pendingValue(e,n.definitionId,t);void 0!==r&&(n.specie=We(r,n.allowedSpecies),n.value=r)}))}function He(e,t,n){return d["j"]("parameter definitions?",e,t,{class_id:n}).then((function(e){return e.definitions}))}function Qe(e,t,n){return He(e,t,n).then(function(){var n=Object(M["a"])(Object(R["a"])().mark((function n(a){var r,i,c;return Object(R["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=[],i=new Map,a.forEach((function(e){var t={};t.name=e.name,t.description=e.description,t.definitionId=e.id,t.allowedSpecies=$e(e.description),t.specie="none",e.parameter_value_list_id&&i.set(e.id,e.parameter_value_list_id),r.push(t)})),!(i.size>0)){n.next=8;break}return n.next=6,d["j"]("parameter value lists?",e,t,{value_list_ids:Object(G["a"])(i.values())}).then((function(e){return e.lists}));case 6:c=n.sent,r.forEach((function(e){var t=i.get(e.definitionId);if(t){var n=c.find((function(e){return t===e.id}));e.allowedValues=n.value_list.map((function(e){return JSON.parse(e)}))}}));case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function Ye(e,t,n,a,r,i,c,o,l,s,b){null===e.promise&&(e.promise=Qe(a,r,i)),e.promise.then((function(e){var n=[];e.forEach((function(e){n.push(Object(u["a"])({},e))})),void 0===o?(Xe(c,l,n,s),t.value=n):d["j"]("parameter values?",a,r,{entity_id:o,alternative_id:l}).then(function(){var e=Object(M["a"])(Object(R["a"])().mark((function e(a){return Object(R["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.values.forEach((function(e){var t=n.find((function(t){return e.parameter_definition_id===t.definitionId})),a=JSON.parse(e.value);null!==a&&"object"===Object(j["a"])(a)&&(a.type=e.type),t.value=a,t.specie=We(a,t.allowedSpecies),t.valueId=e.id})),Xe(c,l,n,s),t.value=n;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){b.value=e.message})).finally((function(){n.value=!1}))}var Ze={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},entityKey:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],components:{"hand-paper-regular":Se["a"],"hand-point-left-regular":_e["a"]},setup:function(e,t){var n=Object(a["g"])(e),r=n.entityKey,i=Object(a["f"])(Je(r,t)),c=Object(a["f"])([]),o=Object(a["f"])(!1),u=Object(a["f"])(""),l={promise:null},s=Object(a["a"])((function(){return null===e.entityKey?"":"string"===typeof e.entityKey.entityEmblem?e.entityKey.entityEmblem:e.entityKey.entityEmblem.join(" | ")})),d=Object(a["a"])((function(){return null!==e.entityKey?e.entityKey.alternativeName:""}));return Object(a["h"])(r,(function(t){null!==t?(o.value=!0,Ye(l,c,o,e.projectId,e.modelUrl,e.classId,t.entityEmblem,t.entityId,t.alternativeId,e.diff,u)):c.value.length=0})),{columns:i,data:c,loading:o,errorMessage:u,entityName:s,alternativeName:d,rowKey:function(e){return e.definitionId}}}};const et=L()(Ze,[["render",Ie]]);var tt=et,nt={key:0,strong:""},at={key:1};function rt(e,t,n,a,r,c){var o=Object(i["N"])("n-input"),u=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(u,{vertical:""},{default:Object(i["V"])((function(){return[a.disabled?(Object(i["G"])(),Object(i["k"])("text",at," - ")):(Object(i["G"])(),Object(i["k"])("text",nt,Object(i["O"])(a.parameterName)+"("+Object(i["O"])(a.indexName)+") ",1)),Object(i["n"])(o,{disabled:a.disabled,value:a.content,type:"textarea",placeholder:"index value",rows:20,"onUpdate:value":a.updateContent},null,8,["disabled","value","onUpdate:value"])]})),_:1})}function it(e){var t=e.index_name;return void 0!==t?t:"x"}function ct(e){if("content"in e)return e.content;var t="";if("map"===e.type)if(Array.isArray(e.data))e.data.forEach((function(e){t=t+"".concat(e[0],"\t").concat(e[1])+"\n"}));else for(var n in e.data)t=t+"".concat(n,"\t").concat(e.data[n])+"\n";else e.data.forEach((function(e){t+="".concat(e,"\n")}));return t}function ot(e,t){return{index_name:t,content:e}}var ut={props:{valueData:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["valueUpdate"],setup:function(e,t){var n=Object(a["f"])(!0),r=Object(a["f"])(""),i=Object(a["f"])(""),c=Object(a["f"])("");return Object(a["h"])(Object(a["g"])(e).valueData,(function(t){if(null===t)return n.value=!0,r.value="",i.value="",void(c.value="");n.value=!1,i.value=t.parameterName;var a=e.diff.pendingValue(t.entityEmblem,t.definitionId,t.alternativeId);void 0===a?(r.value=it(t.value),c.value=ct(t.value)):void 0!==a.contest?(r.value=a.index_name,c.value=a.content):(r.value=it(a),c.value=ct(a))})),{disabled:n,indexName:r,parameterName:i,content:c,updateContent:function(n){c.value=n;var a={value:ot(n,r.value),id:e.valueData.valueId,entityEmblem:e.valueData.entityEmblem,definitionId:e.valueData.definitionId,alternativeId:e.valueData.alternativeId};t.emit("valueUpdate",a)}}}};const lt=L()(ut,[["render",rt]]);var st=lt,dt=n("9973"),bt=n("c46e"),ft={props:{indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!0},projectName:{type:String,required:!0},projectId:{type:Number,required:!0},editUrl:{type:String,required:!0},runUrl:{type:String,required:!0},resultsUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},classDescription:{type:String,required:!0},modelUrl:{type:String,required:!0},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"alternative-selection":ke,"commit-button":q["a"],"entity-list":he,"indexed-value-editor":st,page:dt["a"],"page-path":bt["a"],"parameter-table":tt},setup:function(e){var t=Object(a["f"])(null),n=Object(a["f"])(!1),r=Object(a["f"])(""),i=Object(a["f"])(!1),c=Object(a["f"])({}),o=new U(e.classId,e.className),b=Object(a["f"])(null),f=Object(a["f"])(null),p=Object(a["f"])(1),j=Object(a["a"])((function(){return 1==e.classType?"Objects":"Relationships"})),m=Object(a["a"])((function(){return"".concat(10+Math.max(20,10*p.value),"em")})),v=Object(l["a"])(),O=Object(s["a"])();return Object(a["h"])(i,x["a"]),{currentEntityKey:Object(a["a"])((function(){return null===b.value||null===f.value?null:Object(u["a"])(Object(u["a"])({},b.value),f.value)})),valueEditorData:t,committing:n,commitErrorMessage:r,pendingChanges:i,insertedEntities:c,pendingModelChanges:o,entityTypeName:j,siderWidth:m,setValueEditorData:function(e){t.value=e},possiblyClearValueEditor:function(e){t.value&&t.value.parameterName===e&&(t.value=null)},storeEntityInsertion:function(e){o.insertEntity(e),i.value=!0},storeEntityUpdate:function(e){o.updateEntity(e.previousEmblem,e.id,e.entityEmblem),i.value=!0},storeEntityDeletion:function(e){o.deleteEntity(e.id,e.entityEmblem),i.value=o.isPending()},storeValueInsertion:function(e){o.insertValue(e.value,e.entityEmblem,e.definitionId,e.alternativeId),i.value=!0},storeValueUpdate:function(e){o.updateValue(e.value,e.id,e.entityEmblem,e.definitionId,e.alternativeId),i.value=!0},storeValueDeletion:function(e){o.deleteValue(e.id,e.entityEmblem,e.definitionId,e.alternativeId),i.value=o.isPending()},commit:function(){n.value=!0;var t=o.makeCommitData();d["c"](t,"Modified entities.",e.projectId,e.modelUrl).then((function(e){e.inserted&&(e.inserted.object?c.value=e.inserted.object:e.inserted.relationship&&(c.value=e.inserted.relationship)),v.success("Commit successful."),i.value=!1})).catch((function(e){O.error({title:"Commit failure",content:e.message})})).finally((function(){o.clearPending(),n.value=!1}))},setRelationshipsClashErrorState:function(e){r.value=e?"Cannot commit: some relationships have the same objects.":""},setEntityDimensions:function(e){p.value=e},setSelectedEntity:function(e){b.value=e,t.value=null},setSelectedAlternative:function(e){f.value=e,t.value=null}}}};n("bc2a");const pt=L()(ft,[["render",o]]);var jt=pt,mt=a["b"]({});mt.use(r["a"]),mt.component("entities-app",jt),mt.mount("#entities-app")},c46e:function(e,t,n){"use strict";n("a01d");var a=n("649f");function r(e,t,n,r,i,c){var o=Object(a["N"])("n-breadcrumb-item"),u=Object(a["N"])("n-breadcrumb");return Object(a["G"])(),Object(a["i"])(u,null,{default:Object(a["V"])((function(){return[(Object(a["G"])(!0),Object(a["k"])(a["b"],null,Object(a["L"])(n.path,(function(e,t){return Object(a["G"])(),Object(a["i"])(o,{href:e.url,key:t},{default:Object(a["V"])((function(){return[Object(a["m"])(Object(a["O"])(e.name),1)]})),_:2},1032,["href"])})),128)),Object(a["n"])(o,null,{default:Object(a["V"])((function(){return[Object(a["m"])(Object(a["O"])(n.leafName),1)]})),_:1})]})),_:1})}var i={props:{path:Array,leafName:String}},c=n("e582"),o=n.n(c);const u=o()(i,[["render",r]]);t["a"]=u},d6ec:function(e,t,n){"use strict";var a=n("649f"),r=Object(a["m"])(" Create ");function i(e,t,n,i,c,o){var u=Object(a["N"])("n-input"),l=Object(a["N"])("n-button"),s=Object(a["N"])("n-space");return Object(a["G"])(),Object(a["i"])(s,null,{default:Object(a["V"])((function(){return[Object(a["n"])(u,{clearable:"",placeholder:i.placeholder,value:i.currentName,"onUpdate:value":t[0]||(t[0]=function(e){return i.currentName=e}),size:"tiny"},null,8,["placeholder","value"]),Object(a["n"])(l,{onClick:i.emitCreate,size:"tiny"},{default:Object(a["V"])((function(){return[r]})),_:1},8,["onClick"])]})),_:1})}n("0151"),n("ca00"),n("3cef"),n("b581");var c=n("a8ce"),o=n("a253"),u={props:{itemName:{type:String,required:!0}},emits:["create"],setup:function(e,t){var n=Object(c["f"])(""),a="Enter ".concat(e.itemName," name"),r=Object(o["a"])();return{currentName:n,placeholder:a,emitCreate:function(){var a=new String(n.value).trim();if(a){var i=/[,]/;if(i.test(a)){var c=e.itemName.charAt(0).toUpperCase()+e.itemName.slice(1);r.error("".concat(c," name contains invalid special characters."))}else t.emit("create",a),n.value=""}else r.error("Please enter name for the new ".concat(e.itemName,"."))}}}},l=n("e582"),s=n.n(l);const d=s()(u,[["render",i]]);t["a"]=d},f77a:function(e,t,n){"use strict";var a=n("649f"),r=Object(a["m"])(" Commit "),i=Object(a["m"])(" There are pending changes. "),c=Object(a["m"])(" Nothing to commit. ");function o(e,t,n,o,u,l){var s=Object(a["N"])("n-button"),d=Object(a["N"])("n-text"),b=Object(a["N"])("n-space");return Object(a["G"])(),Object(a["i"])(b,{align:"baseline"},{default:Object(a["V"])((function(){return[Object(a["n"])(s,{disabled:o.buttonDisabled,loading:n.committing,onClick:o.emitCommitRequest},{default:Object(a["V"])((function(){return[r]})),_:1},8,["disabled","loading","onClick"]),n.errorMessage?(Object(a["G"])(),Object(a["i"])(d,{key:0,type:"error"},{default:Object(a["V"])((function(){return[Object(a["m"])(Object(a["O"])(n.errorMessage),1)]})),_:1})):n.hasPendingChanges?(Object(a["G"])(),Object(a["i"])(d,{key:1},{default:Object(a["V"])((function(){return[i]})),_:1})):(Object(a["G"])(),Object(a["i"])(d,{key:2},{default:Object(a["V"])((function(){return[c]})),_:1}))]})),_:1})}var u=n("a8ce"),l={props:{hasPendingChanges:{type:Boolean,required:!0},committing:{type:Boolean,required:!0},errorMessage:{type:String,required:!1,default:""}},emit:["commitRequest"],setup:function(e,t){var n=Object(u["a"])((function(){return!e.hasPendingChanges||0!==e.errorMessage.length}));return{buttonDisabled:n,emitCommitRequest:function(){t.emit("commitRequest")}}}},s=n("e582"),d=n.n(s);const b=d()(l,[["render",o]]);t["a"]=b}});