(function(e){function t(t){for(var a,c,o=t[0],u=t[1],l=t[2],d=0,b=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&b.push(i[c][0]),i[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);s&&s(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==i[u]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={entities:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;r.push([3,"chunk-vendors"]),n()})({"0274":function(e,t,n){"use strict";var a=n("7a23");function i(e,t,n,i,r,c){var o=Object(a["L"])("n-spin"),u=Object(a["L"])("n-result");return"loading"===n.state?(Object(a["E"])(),Object(a["h"])(o,{key:0})):"error"===n.state?(Object(a["E"])(),Object(a["h"])(u,{key:1,status:"error",title:"Error",description:n.errorMessage},null,8,["description"])):Object(a["K"])(e.$slots,"default",{key:2})}var r={props:{state:{type:String,required:!0},errorMessage:{type:String,required:!1,default:""}}},c=n("6b0d"),o=n.n(c);const u=o()(r,[["render",i]]);t["a"]=u},"0b10":function(e,t,n){"use strict";var a=n("7a23"),i=Object(a["l"])(" Commit "),r=Object(a["l"])(" Cancel ");function c(e,t,n,c,o,u){var l=Object(a["L"])("n-input"),s=Object(a["L"])("n-button"),d=Object(a["L"])("n-space"),b=Object(a["L"])("n-card");return Object(a["E"])(),Object(a["h"])(b,{title:"Commit changes",closable:"",onClose:c.cancel},{footer:Object(a["S"])((function(){return[Object(a["m"])(d,{justify:"end"},{default:Object(a["S"])((function(){return[Object(a["m"])(s,{disabled:!c.commitMessage,type:"primary",onClick:c.commit},{default:Object(a["S"])((function(){return[i]})),_:1},8,["disabled","onClick"]),Object(a["m"])(s,{onClick:c.cancel},{default:Object(a["S"])((function(){return[r]})),_:1},8,["onClick"])]})),_:1})]})),default:Object(a["S"])((function(){return[Object(a["m"])(l,{type:"textarea",placeholder:"Type commit message",value:c.commitMessage,"onUpdate:value":c.updateCommitMessage},null,8,["value","onUpdate:value"])]})),_:1},8,["onClose"])}var o=n("f2bf"),u={emits:["commit","cancel"],setup:function(e,t){var n=Object(o["e"])("");return{commitMessage:n,cancel:function(){t.emit("cancel")},commit:function(){t.emit("commit",n.value)},updateCommitMessage:function(e){n.value=e}}}},l=n("6b0d"),s=n.n(l);const d=s()(u,[["render",c]]);t["a"]=d},"1d6d":function(e,t,n){"use strict";var a=n("7a23");function i(e,t,n,i,r,c){var o=Object(a["L"])("n-input");return Object(a["E"])(),Object(a["h"])(o,{value:i.value,ref:"instance","onUpdate:value":i.updateValue,onBlur:i.cancel,onKeydown:i.handleKey,maxlength:"155",size:"small",clearable:""},null,8,["value","onUpdate:value","onBlur","onKeydown"])}n("b0c0"),n("498a");var r=n("f2bf"),c={props:{name:String},emits:["accept","cancel"],setup:function(e,t){var n=Object(r["e"])(e.name),a=Object(r["e"])(null);return Object(r["d"])((function(){var e;null===(e=a.value)||void 0===e||e.select()})),{instance:a,value:n,cancel:function(){n.value=e.name,t.emit("cancel")},updateValue:function(e){n.value=e},handleKey:function(a){var i=n.value.trim();switch(a.key){case"Enter":i&&i!==e.name?t.emit("accept",i):(n.value=e.name,t.emit("cancel"));break;case"Escape":n.value=e.name,t.emit("cancel");break}}}}},o=n("6b0d"),u=n.n(o);const l=u()(c,[["render",i]]);t["a"]=l},3:function(e,t,n){e.exports=n("c30c")},"315d":function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"k",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"i",(function(){return j})),n.d(t,"l",(function(){return O}));var a=n("5530");n("ac1f"),n("1276"),n("498a"),n("e9c4"),n("d3b7"),n("d9e2"),n("99af");function i(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}var r=i("csrftoken");function c(){return{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":r,"Content-Type":"application/json"}}}function o(e){var t=c();return t["body"]=JSON.stringify({type:"project list?"}),fetch(e,t).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load project list: ".concat(e))}))}))}function u(e,t){var n=c();return n["body"]=JSON.stringify({type:"create project?",name:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to create project: ".concat(e))}))}))}function l(e,t){var n=c();return n["body"]=JSON.stringify({type:"destroy project?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to delete project: ".concat(e))}))}))}function s(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=c();return r["body"]=JSON.stringify(Object(a["a"])({type:e,projectId:t},i)),fetch(n,r).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error("Failed to fetch ".concat(e,": ").concat(t))}))}))}function d(e,t,n,i){var r=c();return r.body=JSON.stringify(Object(a["a"])({type:"commit",projectId:n,message:t},e)),fetch(i,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))}))}function b(e,t){var n=c();return n.body=JSON.stringify({type:"execution list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load run list: ".concat(e))}))}))}function m(e,t){var n=c();return n.body=JSON.stringify({type:"create execution?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to create run: ".concat(e))}))}))}function f(e,t){var n=c();return n["body"]=JSON.stringify({type:"destroy execution?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to delete execution: ".concat(e))}))}))}function p(e,t){var n=c();return n["body"]=JSON.stringify({type:"execute?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to execute: ".concat(e))}))}))}function v(e,t){var n=c();return n["body"]=JSON.stringify({type:"abort?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to abort execution: ".concat(e))}))}))}function j(e,t){var n=c();return n["body"]=JSON.stringify({type:"briefing?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch execution status: ".concat(e))}))}))}function O(e,t){var n=c();return n.body=JSON.stringify({type:"summary?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load summary: ".concat(e))}))}))}},"8e39":function(e,t,n){"use strict";var a=n("7a23"),i=Object(a["l"])("Delete");function r(e,t,n,r,c,o){var u=Object(a["L"])("n-button");return Object(a["E"])(),Object(a["h"])(u,{size:"tiny",onClick:r.emitDelete},{default:Object(a["S"])((function(){return[i]})),_:1},8,["onClick"])}var c={props:{emblem:{type:[String,Array],required:!0}},emits:["delete"],setup:function(e,t){return{emitDelete:function(){t.emit("delete",e.emblem)}}}},o=n("6b0d"),u=n.n(o);const l=u()(c,[["render",r]]);t["a"]=l},c30c:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("f2bf"),i=n("5333"),r=n("7a23");function c(e,t,n,a,i,c){var o=Object(r["L"])("page-path"),u=Object(r["L"])("commit-button"),l=Object(r["L"])("n-h1"),s=Object(r["L"])("n-p"),d=Object(r["L"])("entity-list"),b=Object(r["L"])("n-grid-item"),m=Object(r["L"])("parameter-table"),f=Object(r["L"])("indexed-value-editor"),p=Object(r["L"])("n-grid"),v=Object(r["L"])("commit-message-editor"),j=Object(r["L"])("n-modal");return Object(r["E"])(),Object(r["j"])(r["b"],null,[Object(r["m"])(o,{path:[{name:"Projects",url:n.indexUrl},{name:n.projectName,url:n.projectUrl},{name:"Model",url:n.editUrl}],"leaf-name":n.className},null,8,["path","leaf-name"]),Object(r["m"])(u,{"has-pending-changes":a.pendingChanges,committing:a.committing,"error-message":a.commitErrorMessage,onCommitRequest:t[0]||(t[0]=function(e){return a.showCommitMessageEditor=!0})},null,8,["has-pending-changes","committing","error-message"]),Object(r["m"])(l,null,{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.className),1)]})),_:1}),Object(r["T"])(Object(r["m"])(s,null,{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.classDescription),1)]})),_:1},512),[[r["P"],"None"!==n.classDescription]]),Object(r["m"])(p,{cols:6,"x-gap":12},{default:Object(r["S"])((function(){return[Object(r["m"])(b,{span:2},{default:Object(r["S"])((function(){return[Object(r["m"])(d,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"class-name":n.className,"class-type":n.classType,inserted:a.insertedEntities,onEntitySelect:a.changeCurrentParameters,onEntityInsert:a.storeEntityInsertion,onEntityUpdate:a.storeEntityUpdate,onEntityDelete:a.storeEntityDeletion,onRelationshipsClash:a.setRelationshipsClashErrorState},null,8,["project-id","model-url","class-id","class-name","class-type","inserted","onEntitySelect","onEntityInsert","onEntityUpdate","onEntityDelete","onRelationshipsClash"])]})),_:1}),Object(r["m"])(b,{span:2},{default:Object(r["S"])((function(){return[Object(r["m"])(m,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"entity-key":a.currentEntityKey,diff:a.pendingModelChanges,onOpenValueEditorRequest:a.setValueEditorData,onCloseValueEditorRequest:a.possiblyClearValueEditor,onValueInsert:a.storeValueInsertion,onValueUpdate:a.storeValueUpdate,onValueDelete:a.storeValueDeletion},null,8,["project-id","model-url","class-id","entity-key","diff","onOpenValueEditorRequest","onCloseValueEditorRequest","onValueInsert","onValueUpdate","onValueDelete"])]})),_:1}),Object(r["m"])(b,{span:2},{default:Object(r["S"])((function(){return[Object(r["m"])(f,{"value-data":a.valueEditorData,diff:a.pendingModelChanges,onValueUpdate:a.storeValueUpdate},null,8,["value-data","diff","onValueUpdate"])]})),_:1})]})),_:1}),Object(r["m"])(j,{show:a.showCommitMessageEditor,"onUpdate:show":a.updateShowCommitMessageEditor},{default:Object(r["S"])((function(){return[Object(r["k"])("div",null,[Object(r["m"])(v,{onCommit:a.commit,onCancel:t[1]||(t[1]=function(e){return a.showCommitMessageEditor=!1})},null,8,["onCommit"])])]})),_:1},8,["show","onUpdate:show"])],64)}n("a9e3"),n("d3b7");var o=n("7317"),u=n("4d91"),l=n("f77a"),s=n("0b10"),d=n("315d"),b=n("d5e4"),m=n("5364"),f=n("9bd1"),p=n("53ca"),v=n("bee2"),j=n("d4ec");n("a4d3"),n("e01a"),n("4ec9"),n("3ca3"),n("ddb0"),n("159b"),n("ac1f"),n("1276"),n("498a"),n("b0c0"),n("d9e2"),n("10d1");function O(e){if(!e.trim())return null;var t=parseFloat(e);return isNaN(t)?"NAN"===e.toUpperCase()?t:e:t}n("a15b");function h(e,t){return e+"_"+t.join("__")}function y(e,t){return"string"===typeof t?t:h(e,t)}var g=Symbol("insert action"),E=Symbol("delete action"),S=Symbol("update action"),I=Object(v["a"])((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(j["a"])(this,e),this.action=t,this.parameters=new Map}));function w(e,t){var n=e.parameters.get(t);return void 0===n&&(n=new Map,e.parameters.set(t,n)),n}function k(e){if("object"!==Object(p["a"])(e)||!("content"in e))return e;var t=[];return e.content.split("\n").forEach((function(e){if(e=e.trim(),e){var n=e.split(/\s+/);1===n.length?t.push(O(n[0])):t.push([n[0],O(n[1])])}})),!t||t[0].length>1?{type:"map",index_type:"str",index_name:e.index_name,data:t}:{type:"array",value_type:"number"===typeof t[0]?"float":"str",data:t}}var N=new WeakMap,_=new WeakMap,C=new WeakMap,x=function(){function e(t,n){Object(j["a"])(this,e),Object(b["a"])(this,N,{writable:!0,value:void 0}),Object(b["a"])(this,_,{writable:!0,value:void 0}),Object(b["a"])(this,C,{writable:!0,value:void 0}),Object(f["a"])(this,N,t),Object(f["a"])(this,_,n),Object(f["a"])(this,C,new Map)}return Object(v["a"])(e,[{key:"makeCommitData",value:function(){var e=[],t=[],n=[],a=[],i=[],r=[],c=[],o=[],u=[];return Object(m["a"])(this,C).forEach((function(r,l){var s=r.action;if(s)if(s.action===g)void 0===s.objectNames?e.push({name:s.name}):a.push({name:s.name,object_name_list:s.objectNames});else{if(s.action!==S){if(s.action===E)return void n.push(s.id);throw Error("Unknown object action.")}void 0===s.objects?t.push({id:s.id,name:s.name}):i.push({id:s.id,name:s.name,object_name_list:s.objects})}r.parameters.forEach((function(e,t){e.forEach((function(e,n){e.action===g?c.push({entity_name:l,definition_id:t,alternative_id:n,value:k(e.value)}):e.action===S?o.push({id:e.id,value:k(e.value)}):e.action===E&&u.push(e.id)}))}))})),{class_id:Object(m["a"])(this,N),insertions:{object:e,relationship:a,parameter_value:c},updates:{object:t,relationship:i,parameter_value:o},deletions:{object:n,relationship:r,parameter_value:u}}}},{key:"isPending",value:function(){return Object(m["a"])(this,C).size>0}},{key:"clearPending",value:function(){Object(m["a"])(this,C).clear()}},{key:"getPendingEntity",value:function(e){var t=y(Object(m["a"])(this,_),e),n=Object(m["a"])(this,C).get(t);return void 0===n&&(n=new I,Object(m["a"])(this,C).set(t,n)),n}},{key:"insertEntity",value:function(e){if("string"===typeof e)Object(m["a"])(this,C).set(e,new I({action:g,name:e}));else{var t=h(Object(m["a"])(this,_),e);Object(m["a"])(this,C).set(t,new I({action:g,name:t,objectNames:e}))}}},{key:"updateEntity",value:function(e,t,n){var a=function(e,t){return void 0===e||e.action===S&&t!==e.originalName};if("string"===typeof n){var i=Object(m["a"])(this,C).get(e);void 0===i?Object(m["a"])(this,C).set(n,new I({action:S,id:t,name:n,originalName:e})):a(i.action,n)?i.action={action:S,id:t,name:n,originalName:i.action.originalName}:i.action.action===g&&(i.action.name=n)}else{var r=h(Object(m["a"])(this,_),e),c=h(Object(m["a"])(this,_),n),o=Object(m["a"])(this,C).get(r);void 0===o?Object(m["a"])(this,C).set(c,new I({action:S,id:t,name:c,objects:n,originalName:r,originalObjects:e})):a(o.action,c)?o.action={action:S,id:t,name:c,objects:n,originalName:r,originalEmblem:e}:o.action.action===g&&(o.action.name=c,o.action.objectNames=n)}}},{key:"deleteEntity",value:function(e,t){var n=y(Object(m["a"])(this,_),t),a=Object(m["a"])(this,C).get(n);void 0===a?Object(m["a"])(this,C).set(n,new I({action:E,id:e})):void 0===a.action||a.action.action!==g?(a.action={action:E,id:e},a.parameters.clear()):Object(m["a"])(this,C).delete(n)}},{key:"insertValue",value:function(e,t,n,a){var i=y(Object(m["a"])(this,_),t),r=this.getPendingEntity(i),c={action:g,entity_name:i,definition_id:n,alternative_id:a,value:e},o=w(r,n);o.set(a,c)}},{key:"updateValue",value:function(e,t,n,a,i){var r=this.getPendingEntity(n),c=w(r,a),o=void 0;o=void 0===t?{action:g,entity_name:y(Object(m["a"])(this,_),n),definition_id:a,alternative_id:i,value:e}:{action:S,id:t,value:e},c.set(i,o)}},{key:"deleteValue",value:function(e,t,n,a){var i=this.getPendingEntity(t),r=w(i,n);void 0===e?(r.delete(a),0===r.size&&(i.parameters.delete(n),0===i.parameters.size&&void 0===i.action&&Object(m["a"])(this,C).delete(t))):r.set(a,{action:E,id:e})}},{key:"pendingValue",value:function(e,t,n){var a=y(Object(m["a"])(this,_),e),i=Object(m["a"])(this,C).get(a);if(void 0!==i){var r=i.parameters.get(t);if(void 0!==r){var c=r.get(n);return void 0!==c?c.value:void 0}}}},{key:"isPendingDeletion",value:function(e,t,n){var a=y(Object(m["a"])(this,_),e),i=Object(m["a"])(this,C).get(a);if(void 0===i)return!1;var r=i.parameters.get(t);if(void 0===r)return!1;var c=r.get(n);return void 0!==c&&r.get(n).action===E}}]),e}();function V(e,t,n,a,i,c){var o=Object(r["L"])("n-tree"),u=Object(r["L"])("new-named-item-row"),l=Object(r["L"])("entity-list-new-relationship-row"),s=Object(r["L"])("n-space"),d=Object(r["L"])("fetchable");return Object(r["E"])(),Object(r["h"])(d,{state:a.state,"error-message":a.errorMessage},{default:Object(r["S"])((function(){return[Object(r["m"])(s,{vertical:""},{default:Object(r["S"])((function(){return[Object(r["m"])(o,{selectable:"","block-node":"",data:a.entityList,"render-label":a.renderLabel,"render-suffix":a.renderSuffix,"selected-keys":a.selectedKeys,"onUpdate:selectedKeys":a.emitEntitySelect},null,8,["data","render-label","render-suffix","selected-keys","onUpdate:selectedKeys"]),1===n.classType?Object(r["T"])((Object(r["E"])(),Object(r["h"])(u,{key:0,"item-name":"object",onCreate:a.addObject},null,8,["onCreate"])),[[r["P"],a.alternatives]]):Object(r["T"])((Object(r["E"])(),Object(r["h"])(l,{key:1,"available-objects":a.availableObjects,onRelationshipCreate:a.addRelationship},null,8,["available-objects","onRelationshipCreate"])),[[r["P"],a.alternatives]])]})),_:1})]})),_:1},8,["state","error-message"])}var U=n("2909"),L=n("1da1");n("96cf"),n("99af"),n("4e82"),n("a434"),n("7db0"),n("c740");function D(e,t){return"string"===typeof e?e===t:q(e,t)}function q(e,t){for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0}var M=n("0274"),R=Object(r["l"])("―");function P(e,t,n,a,i,c){var o=Object(r["L"])("n-text"),u=Object(r["L"])("item-name-input"),l=Object(r["L"])("n-space");return Object(r["E"])(),Object(r["h"])(l,{align:"baseline"},{default:Object(r["S"])((function(){return[a.editing?(Object(r["E"])(),Object(r["h"])(u,{key:1,name:n.objectName,onAccept:a.emitRename,onCancel:a.hideInput},null,8,["name","onAccept","onCancel"])):(Object(r["E"])(),Object(r["h"])(o,{key:0,onDblclick:a.showInput},{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.objectName),1)]})),_:1},8,["onDblclick"])),Object(r["m"])(o,null,{default:Object(r["S"])((function(){return[R]})),_:1}),Object(r["m"])(o,{italic:""},{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.alternativeName),1)]})),_:1})]})),_:1})}var K=n("1d6d"),A={props:{objectName:{type:String,required:!0},objectId:{type:Number,required:!1},alternativeName:{type:String,required:!0}},emits:["rename"],components:{"item-name-input":K["a"]},setup:function(e,t){var n=Object(a["e"])(!1),i=Object(a["e"])(e.objectName),r=Object(a["e"])(null);return{editing:n,editValue:i,inputInstance:r,showInput:function(){n.value=!0},hideInput:function(){n.value=!1},emitRename:function(a){n.value=!1,t.emit("rename",{id:e.objectId,previousEmblem:e.objectName,entityEmblem:a})}}}},J=n("6b0d"),T=n.n(J);const z=T()(A,[["render",P]]);var F=z,B=Object(r["l"])("―");function $(e,t,n,a,i,c){var o=Object(r["L"])("entity-list-relationship-object"),u=Object(r["L"])("n-text"),l=Object(r["L"])("n-space");return Object(r["E"])(),Object(r["h"])(l,{align:"baseline"},{default:Object(r["S"])((function(){return[(Object(r["E"])(!0),Object(r["j"])(r["b"],null,Object(r["J"])(n.objects,(function(e,t){return Object(r["E"])(),Object(r["h"])(o,{"object-name":e,"object-names-clash":a.objectNamesClash,dimension:t,"available-objects":n.availableObjects[t],key:t,onAccept:a.emitObjectsUpdate},null,8,["object-name","object-names-clash","dimension","available-objects","onAccept"])})),128)),Object(r["m"])(u,null,{default:Object(r["S"])((function(){return[B]})),_:1}),Object(r["m"])(u,{italic:""},{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.alternativeName),1)]})),_:1})]})),_:1})}function W(e,t,n,a,i,c){var o=Object(r["L"])("n-tag"),u=Object(r["L"])("entity-list-relationship-object-input");return a.editing?(Object(r["E"])(),Object(r["h"])(u,{key:1,"object-name":n.objectName,"available-objects":n.availableObjects,onAccept:a.accept,onCancel:a.hideInput},null,8,["object-name","available-objects","onAccept","onCancel"])):(Object(r["E"])(),Object(r["h"])(o,{key:0,type:a.tagType,onDblclick:a.startEditing,size:"small"},{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.objectName),1)]})),_:1},8,["type","onDblclick"]))}function X(e,t,n,a,i,c){var o=Object(r["L"])("n-select");return Object(r["E"])(),Object(r["h"])(o,{value:a.currentObject,"onUpdate:value":t[0]||(t[0]=function(e){return a.currentObject=e}),ref:"instance",filterable:"",options:a.options,size:"small",onBlur:a.accept,onKeydown:a.handleKey},null,8,["value","options","onBlur","onKeydown"])}var G={props:{objectName:{type:String,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept","cancel"],setup:function(e,t){var n=[];e.availableObjects.forEach((function(e){n.push({label:e,value:e})}));var i=Object(a["e"])(n),r=Object(a["e"])(e.objectName),c=Object(a["e"])(null);Object(a["d"])((function(){var e;null===(e=c.value)||void 0===e||e.focus()}));var o=function(){r.value!==e.objectName?t.emit("accept",r.value):t.emit("cancel")},u=function(){t.emit("cancel")};return{options:i,currentObject:r,instance:c,accept:o,cancel:u,handleKey:function(e){switch(e.key){case"Enter":o();break;case"Escape":u();break}}}}};const H=T()(G,[["render",X]]);var Q=H,Y={props:{objectName:{type:String,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1},dimension:{type:Number,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept"],components:{"entity-list-relationship-object-input":Q},setup:function(e,t){var n=Object(a["a"])((function(){return e.objectNamesClash?"error":"default"})),i=Object(a["e"])(!1);return{tagType:n,editing:i,startEditing:function(){i.value=!0},accept:function(n){i.value=!1,t.emit("accept",{dimension:e.dimension,objectName:n})},hideInput:function(){i.value=!1}}}};const Z=T()(Y,[["render",W]]);var ee=Z,te={props:{objects:{type:Array,required:!0},relationshipId:{type:Number,required:!1},alternativeName:{type:String,required:!0},availableObjects:{type:Array,required:!0},groupId:{type:Number,required:!0}},emits:["objectsUpdate"],components:{"entity-list-relationship-object":ee},setup:function(e,t){var n=Object(a["e"])(!1);return{objectNamesClash:n,emitObjectsUpdate:function(a){var i=[];e.objects.forEach((function(e,t){t!==a.dimension?i.push(e):i.push(a.objectName)})),t.emit("objectsUpdate",{id:e.relationshipId,previousEmblem:e.objects,entityEmblem:i,groupId:e.groupId,setObjectNamesClash:function(e){return n.value=e}})}}}};const ne=T()(te,[["render",$]]);var ae=ne,ie=n("8e39"),re=n("d6ec"),ce=Object(r["l"])(" Create ");function oe(e,t,n,a,i,c){var o=Object(r["L"])("n-select"),u=Object(r["L"])("n-button"),l=Object(r["L"])("n-space");return Object(r["E"])(),Object(r["h"])(l,{align:"baseline",size:"small"},{default:Object(r["S"])((function(){return[(Object(r["E"])(!0),Object(r["j"])(r["b"],null,Object(r["J"])(a.dimensions,(function(e){return Object(r["E"])(),Object(r["h"])(o,{key:e,options:a.options[e],filterable:"",size:"small","onUpdate:value":a.updateSelection},null,8,["options","onUpdate:value"])})),128)),Object(r["m"])(u,{onClick:a.emitRelationshipCreate,size:"small",disabled:!a.wellDefined},{default:Object(r["S"])((function(){return[ce]})),_:1},8,["onClick","disabled"])]})),_:1})}function ue(e){var t=[];return e.forEach((function(e,n){var a=[];e.forEach((function(e){a.push({label:e,value:e,dimension:n})})),t.push(a)})),t}var le={props:{availableObjects:{type:Array,required:!0}},emits:["relationshipCreate"],setup:function(e,t){var n=Object(a["e"])(Object(U["a"])(Array(e.availableObjects.length).keys())),i=Object(a["e"])(ue(e.availableObjects)),r=Array(e.availableObjects.length),c=Object(a["e"])(!1);return{dimensions:n,options:i,wellDefined:c,emitRelationshipCreate:function(){t.emit("relationshipCreate",r)},updateSelection:function(e,t){r[t.dimension]=e,r.forEach((function(e,t){void 0!==e&&t===r.length-1&&(c.value=!0)}))}}}};const se=T()(le,[["render",oe]]);var de=se;function be(e,t){return d["h"]("alternatives?",e,t).then((function(e){return e.alternatives}))}function me(e,t){return d["h"]("make base alternative",e,t,{}).then((function(e){return e.alternatives}))}function fe(e,t,n,a,i,r,c){var o=be(e,t),u={object_class_id:n};d["h"]("objects?",e,t,u).then(function(){var n=Object(L["a"])(regeneratorRuntime.mark((function n(c){var u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u=c.objects,n.next=3,o;case 3:if(i.value=n.sent,0!==i.value.length){n.next=8;break}return n.next=7,me(e,t);case 7:i.value=n.sent;case 8:l=[],u.forEach((function(e){i.value.forEach((function(t){l.push({entityEmblem:e.name,entityId:e.id,alternativeName:t.name,alternativeId:t.id,key:"".concat(e.name,":").concat(t.id)})}))})),a.value=l,r.value="ready";case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){c.value=e.message,r.value="error"}))}function pe(e,t,n){var a={relationship_class_id:n};return d["h"]("available relationship objects?",e,t,a).then((function(e){return e.available_objects}))}var ve=0;function je(){return ve+=1,ve}function Oe(e,t,n,a,i,r,c,o){var u=be(e,t),l={relationship_class_id:n};d["h"]("relationships?",e,t,l).then(function(){var o=Object(L["a"])(regeneratorRuntime.mark((function o(l){var s,d,b;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=l.relationships,d=new Map,s.forEach((function(e){var t=d.get(e.id);void 0===t&&(t=[],d.set(e.id,t)),t.push(e.object_name)})),o.next=5,u;case 5:if(r.value=o.sent,0!==r.value.length){o.next=10;break}return o.next=9,me(e,t);case 9:r.value=o.sent;case 10:return o.next=12,pe(e,t,n);case 12:i.value=o.sent,b=[],d.forEach((function(e,t){var n=je();r.value.forEach((function(a){b.push({entityEmblem:e,entityId:t,alternativeName:a.name,alternativeId:a.id,availableObjects:i,key:"".concat(e.join(","),":").concat(a.id),groupId:n})}))})),b.sort((function(e,t){for(var n=0;n<e.entityEmblem.length;++n){var a=e.entityEmblem[n].toUpperCase(),i=t.entityEmblem[n].toUpperCase();if(a!==i)return a>i}return!1})),a.value=b,c.value="ready";case 18:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){o.value=e.message,c.value="error"}))}var he={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},inserted:{type:Object,required:!1}},emits:["entitySelect","entityInsert","entityUpdate","entityDelete","relationshipsClash"],components:{fetchable:M["a"],"new-named-item-row":re["a"],"entity-list-new-relationship-row":de},setup:function(e,t){var n=Object(a["e"])("loading"),i=Object(a["e"])([]),r=Object(a["e"])(""),c=Object(a["e"])([]),o=Object(a["e"])([]),l=Object(a["e"])([]),s=Object(u["a"])();Object(a["d"])((function(){1===e.classType?fe(e.projectId,e.modelUrl,e.classId,i,o,n,r):Oe(e.projectId,e.modelUrl,e.classId,i,l,o,n,r)}));var d=function(e){for(var n=void 0,a=i.value.length-1;-1!=a;--a){var r=i.value[a];D(r.entityEmblem,e)&&(n=r.entityId,i.value.splice(a,1))}t.emit("entityDelete",{id:n,entityEmblem:e})},b=function(e){var n=i.value.find((function(t){return e.entityEmblem===t.entityEmblem}));n?s.error({title:"Cannot rename",content:"An object with the same name already exists."}):(i.value.forEach((function(t){t.entityEmblem==e.previousEmblem&&(t.entityEmblem=e.entityEmblem)})),t.emit("entityUpdate",e))},m=function(e){var n=i.value.find((function(t){return q(e.entityEmblem,t.entityEmblem)}));e.setObjectNamesClash(void 0!==n),i.value.forEach((function(t){e.groupId===t.groupId&&(t.entityEmblem=e.entityEmblem)})),t.emit("relationshipsClash",n),n||t.emit("entityUpdate",e)};return Object(a["g"])(Object(a["f"])(e).inserted,(function(n){n&&(i.value.forEach((function(t){var a=y(e.className,t.entityEmblem),i=n[a];void 0!==i&&(t.entityId=i)})),c.value.length=0,t.emit("entitySelect",null))})),{state:n,entityList:i,errorMessage:r,selectedKeys:c,alternatives:o,availableObjects:l,renderLabel:function(t){return 1===e.classType?Object(a["c"])(F,{objectName:t.option.entityEmblem,objectId:t.option.entityId,alternativeName:t.option.alternativeName,onRename:b}):Object(a["c"])(ae,{objects:t.option.entityEmblem,relationshipId:t.option.entityId,alternativeName:t.option.alternativeName,availableObjects:t.option.availableObjects,groupId:t.option.groupId,onObjectsUpdate:m})},renderSuffix:function(e){return Object(a["c"])(ie["a"],{emblem:e.option.entityEmblem,onDelete:d})},emitEntitySelect:function(e,n){var a=n.find((function(t){return t&&t.key===e[0]}));t.emit("entitySelect",a?{entityEmblem:a.entityEmblem,entityId:a.entityId,alternativeName:a.alternativeName,alternativeId:a.alternativeId}:null)},addObject:function(e){var n,a=i.value.find((function(t){return e===t.entityEmblem}));if(a)s.error({title:"Cannot create",content:"An entity with the same name already exists."});else{var r=[];o.value.forEach((function(t){r.push({entityEmblem:e,entityId:void 0,alternativeName:t.name,alternativeId:t.id,key:"".concat(e,":").concat(t.id)})}));var c=i.value.findIndex((function(t){return e<t.entityEmblem}));(n=i.value).splice.apply(n,[c>=0?c:i.value.length,0].concat(r)),t.emit("entityInsert",e)}},addRelationship:function(e){var n,a=i.value.find((function(t){return q(e,t.entityEmblem)}));if(a)s.error({title:"Cannot create relationship",content:"A relationship with the same objects already exists."});else{var r=je(),c=[],u=Object(U["a"])(e);o.value.forEach((function(t){c.push({entityEmblem:u,entityId:void 0,alternativeName:t.name,alternativeId:t.id,availableObjects:l,key:"".concat(e.join(","),":").concat(t.id),groupId:r})}));var d=i.value.findIndex((function(t){return e[0]<t.entityEmblem}));(n=i.value).splice.apply(n,[d>=0?d:i.value.length,0].concat(c)),t.emit("entityInsert",u)}}}}};const ye=T()(he,[["render",V]]);var ge=ye,Ee=Object(r["l"])("―");function Se(e,t,n,a,i,c){var o=Object(r["L"])("n-text"),u=Object(r["L"])("n-space"),l=Object(r["L"])("hand-point-left-regular"),s=Object(r["L"])("n-icon"),d=Object(r["L"])("n-empty"),b=Object(r["L"])("hand-paper-regular"),m=Object(r["L"])("n-data-table"),f=Object(r["L"])("n-result");return Object(r["E"])(),Object(r["h"])(u,{vertical:""},{default:Object(r["S"])((function(){return[Object(r["m"])(u,null,{default:Object(r["S"])((function(){return[Object(r["m"])(o,{strong:""},{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(a.entityName),1)]})),_:1}),Object(r["m"])(o,null,{default:Object(r["S"])((function(){return[Ee]})),_:1}),Object(r["m"])(o,{italic:""},{default:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(a.alternativeName),1)]})),_:1})]})),_:1}),a.errorMessage?(Object(r["E"])(),Object(r["h"])(f,{key:1,status:"error",title:"Error",description:a.errorMessage},null,8,["description"])):(Object(r["E"])(),Object(r["h"])(m,{key:0,size:"small",columns:a.columns,data:a.data,loading:a.loading,"row-key":a.rowKey},{empty:Object(r["S"])((function(){return[null===n.entityKey?(Object(r["E"])(),Object(r["h"])(d,{key:0,description:"Select an entity on the left to load its parameters here."},{icon:Object(r["S"])((function(){return[Object(r["m"])(s,null,{default:Object(r["S"])((function(){return[Object(r["m"])(l)]})),_:1})]})),_:1})):(Object(r["E"])(),Object(r["h"])(d,{key:1,description:"Entity has no parameters."},{icon:Object(r["S"])((function(){return[Object(r["m"])(s,null,{default:Object(r["S"])((function(){return[Object(r["m"])(b)]})),_:1})]})),_:1}))]})),_:1},8,["columns","data","loading","row-key"]))]})),_:1})}var Ie=n("5530"),we=(n("00b4"),n("d81d"),n("35ce")),ke=n("9790");function Ne(e,t,n,a,i,c){var o=Object(r["L"])("n-tooltip");return Object(r["E"])(),Object(r["h"])(o,null,{trigger:Object(r["S"])((function(){return[Object(r["l"])(Object(r["M"])(n.name),1)]})),default:Object(r["S"])((function(){return[Object(r["l"])(" "+Object(r["M"])(n.description),1)]})),_:1})}var _e={props:{name:String,description:String}};const Ce=T()(_e,[["render",Ne]]);var xe=Ce,Ve=Object(r["l"])(" Edit ");function Ue(e,t,n,a,i,c){var o=Object(r["L"])("n-select"),u=Object(r["L"])("n-input"),l=Object(r["L"])("n-button"),s=Object(r["L"])("n-space");return Object(r["E"])(),Object(r["h"])(s,null,{default:Object(r["S"])((function(){return[Object(r["m"])(o,{options:a.species,value:a.currentSpecie,size:"small","onUpdate:value":a.changeState},null,8,["options","value","onUpdate:value"]),"single value"===a.state?(Object(r["E"])(),Object(r["h"])(u,{key:0,value:a.currentValue,"onUpdate:value":a.changeSingleValue,size:"small"},null,8,["value","onUpdate:value"])):"value list"===a.state?(Object(r["E"])(),Object(r["h"])(o,{key:1,value:a.currentValue,options:a.valueOptions,size:"small","onUpdate:value":a.changeSingleValue},null,8,["value","options","onUpdate:value"])):"indexed value"===a.state?(Object(r["E"])(),Object(r["h"])(l,{key:2,size:"small",onClick:a.emitOpenValueEditorRequest},{default:Object(r["S"])((function(){return[Ve]})),_:1},8,["onClick"])):Object(r["i"])("",!0)]})),_:1})}function Le(e){var t=[{label:"none",value:"none"}];return e.constant&&t.push({label:"constant",value:"constant"}),e.period&&t.push({label:"period",value:"period"}),e.time&&t.push({label:"time",value:"time"}),t}function De(e,t){return"none"===e?"empty":"constant"===e?t?"value list":"single value":"indexed value"}function qe(e){if(e){var t=[];return e.forEach((function(e){t.push({label:e,value:e})})),t}}function Me(e,t,n,a,i){if("none"!==e){if("constant"!==e)return"object"===Object(p["a"])(n)?n:"object"===Object(p["a"])(a)?a:{type:"map",index_type:"str",index_name:e,data:[["T0001",0]]};switch(Object(p["a"])(n)){case"string":return n;case"number":return new String(n);default:return"constant"===t?null!==a?new String(a):"":i?i[0]:""}}}var Re={props:{valueData:{type:Object,required:!0},valueId:{type:Number,required:!1}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],setup:function(e,t){var n=Object(a["e"])(Le(e.valueData.allowedSpecies)),i=Object(a["e"])(De(e.valueData.specie,e.valueData.allowedValues)),r=Object(a["e"])(e.valueData.specie),c=Object(a["e"])(Me(e.valueData.specie,e.valueData.specie,e.valueData.parameterValue,e.valueData.parameterValue,e.valueData.allowedValues)),o=Object(a["e"])(qe(e.valueData.allowedValues));return Object(a["g"])(Object(a["f"])(e).valueData,(function(e){n.value=Le(e.allowedSpecies),i.value=De(e.specie,e.allowedValues),r.value=e.specie,c.value=Me(e.specie,e.specie,e.parameterValue,e.parameterValue,e.allowedValues),o.value=qe(e.allowedValues)})),{species:n,state:i,currentSpecie:r,currentValue:c,valueOptions:o,changeState:function(n){r.value=n;var a=De(n,e.valueData.allowedValues);"indexed value"===i.value&&t.emit("closeValueEditorRequest"),i.value=a;var o=Me(n,e.valueData.specie,c.value,e.valueData.parameterValue,e.valueData.allowedValues);if(void 0===o)t.emit("valueDelete",{id:e.valueId});else{var u="object"===Object(p["a"])(o),l=u?o:O(o);void 0===e.valueId?t.emit("valueInsert",{value:l}):t.emit("valueUpdate",{id:e.valueId,value:l})}c.value=o},changeSingleValue:function(n){var a=O(n);void 0===e.valueId?t.emit("valueInsert",{value:a}):t.emit("valueUpdate",{id:e.valueId,value:a}),c.value=n},emitOpenValueEditorRequest:function(){t.emit("openValueEditorRequest",{valueId:e.valueId,parameterValue:c})}}}};const Pe=T()(Re,[["render",Ue]]);var Ke=Pe;function Ae(e,t){var n={title:"Parameter",key:"name",render:function(e){return Object(a["c"])(xe,{name:e.name,description:e.description})}},i=function(t,n){return void 0===t.id?Object(Ie["a"])({entityEmblem:e.value.entityEmblem,definitionId:n.definitionId,alternativeId:e.value.alternativeId},t):Object(Ie["a"])({entityEmblem:e.value.entityEmblem},t)},r={title:"Value",key:"value",render:function(n){return Object(a["c"])(Ke,{valueData:{allowedSpecies:n.allowedSpecies,specie:n.specie,parameterValue:n.value,allowedValues:n.allowedValues},valueId:n.valueId,onOpenValueEditorRequest:function(a){t.emit("openValueEditorRequest",{value:a.parameterValue,id:a.valueId,entityEmblem:e.value.entityEmblem,parameterName:n.name,definitionId:n.definitionId,alternativeId:e.value.alternativeId})},onCloseValueEditorRequest:function(){t.emit("closeValueEditorRequest",n.name)},onValueInsert:function(e){t.emit("valueInsert",i(e,n))},onValueUpdate:function(e){t.emit("valueUpdate",i(e,n))},onValueDelete:function(e){t.emit("valueDelete",i(e,n))}})}};return[n,r]}var Je=/constant[^.]*\.?$/i,Te=/period[^.]*\.?$/i,ze=/time[^.]*\.?$/i;function Fe(e){var t=Te.test(e),n=ze.test(e),a=Je.test(e)||!t&&!n;return{constant:a,period:t,time:n}}function Be(e,t){return"object"!==Object(p["a"])(e)||null===e||"map"!==e.type&&"array"!==e.type&&!("content"in e)?"constant":"period"===e.index_name&&t.period?"period":"time"===e.index_name&&t.time?"time":"period"}function $e(e,t,n,a){n.forEach((function(n){if(a.isPendingDeletion(e,n.definitionId,t))return n.specie=void 0,void(n.value=void 0);var i=a.pendingValue(e,n.definitionId,t);void 0!==i&&(n.specie=Be(i,n.allowedSpecies),n.value=i)}))}function We(e,t,n){return d["h"]("parameter definitions?",e,t,{class_id:n}).then((function(e){return e.definitions}))}function Xe(e,t,n){return We(e,t,n).then(function(){var n=Object(L["a"])(regeneratorRuntime.mark((function n(a){var i,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=[],r=new Map,a.forEach((function(e){var t={};t.name=e.name,t.description=e.description,t.definitionId=e.id,t.allowedSpecies=Fe(e.description),t.specie="none",e.parameter_value_list_id&&r.set(e.id,e.parameter_value_list_id),i.push(t)})),!(r.size>0)){n.next=8;break}return n.next=6,d["h"]("parameter value lists?",e,t,{value_list_ids:Object(U["a"])(r.values())}).then((function(e){return e.lists}));case 6:c=n.sent,i.forEach((function(e){var t=r.get(e.definitionId);if(t){var n=c.find((function(e){return t===e.id}));e.allowedValues=n.value_list.map((function(e){return JSON.parse(e)}))}}));case 8:return n.abrupt("return",i);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function Ge(e,t,n,a,i,r,c,o,u,l,s){null===e.promise&&(e.promise=Xe(a,i,r)),e.promise.then((function(e){var n=[];e.forEach((function(e){n.push(Object(Ie["a"])({},e))})),void 0===o?($e(c,u,n,l),t.value=n):d["h"]("parameter values?",a,i,{entity_id:o,alternative_id:u}).then(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.values.forEach((function(e){var t=n.find((function(t){return e.parameter_definition_id===t.definitionId})),a=JSON.parse(e.value);null!==a&&"object"===Object(p["a"])(a)&&(a.type=e.type),t.value=a,t.specie=Be(a,t.allowedSpecies),t.valueId=e.id})),$e(c,u,n,l),t.value=n;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){s.value=e.message})).finally((function(){n.value=!1}))}var He={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},entityKey:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],components:{"hand-paper-regular":we["a"],"hand-point-left-regular":ke["a"]},setup:function(e,t){var n=Object(a["f"])(e),i=n.entityKey,r=Object(a["e"])(Ae(i,t)),c=Object(a["e"])([]),o=Object(a["e"])(!1),u=Object(a["e"])(""),l={promise:null},s=Object(a["a"])((function(){return null===e.entityKey?"":"string"===typeof e.entityKey.entityEmblem?e.entityKey.entityEmblem:e.entityKey.entityEmblem.join(" | ")})),d=Object(a["a"])((function(){return null!==e.entityKey?e.entityKey.alternativeName:""}));return Object(a["g"])(i,(function(t){null!==t?(o.value=!0,Ge(l,c,o,e.projectId,e.modelUrl,e.classId,t.entityEmblem,t.entityId,t.alternativeId,e.diff,u)):c.value.length=0})),{columns:r,data:c,loading:o,errorMessage:u,entityName:s,alternativeName:d,rowKey:function(e){return e.definitionId}}}};const Qe=T()(He,[["render",Se]]);var Ye=Qe,Ze={key:0,strong:""},et={key:1};function tt(e,t,n,a,i,c){var o=Object(r["L"])("n-input"),u=Object(r["L"])("n-space");return Object(r["E"])(),Object(r["h"])(u,{vertical:""},{default:Object(r["S"])((function(){return[a.disabled?(Object(r["E"])(),Object(r["j"])("text",et," - ")):(Object(r["E"])(),Object(r["j"])("text",Ze,Object(r["M"])(a.parameterName)+"("+Object(r["M"])(a.indexName)+") ",1)),Object(r["m"])(o,{disabled:a.disabled,value:a.content,type:"textarea",placeholder:"index value",rows:20,"onUpdate:value":a.updateContent},null,8,["disabled","value","onUpdate:value"])]})),_:1})}function nt(e){var t=e.index_name;return void 0!==t?t:"x"}function at(e){if("content"in e)return e.content;var t="";if("map"===e.type)if(Array.isArray(e.data))e.data.forEach((function(e){t=t+"".concat(e[0],"\t").concat(e[1])+"\n"}));else for(var n in e.data)t=t+"".concat(n,"\t").concat(e.data[n])+"\n";else e.data.forEach((function(e){t+="".concat(e,"\n")}));return t}function it(e,t){return{index_name:t,content:e}}var rt={props:{valueData:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["valueUpdate"],setup:function(e,t){var n=Object(a["e"])(!0),i=Object(a["e"])(""),r=Object(a["e"])(""),c=Object(a["e"])("");return Object(a["g"])(Object(a["f"])(e).valueData,(function(t){if(null===t)return n.value=!0,i.value="",r.value="",void(c.value="");n.value=!1,r.value=t.parameterName;var a=e.diff.pendingValue(t.entityEmblem,t.definitionId,t.alternativeId);void 0===a?(i.value=nt(t.value),c.value=at(t.value)):void 0!==a.contest?(i.value=a.index_name,c.value=a.content):(i.value=nt(a),c.value=at(a))})),{disabled:n,indexName:i,parameterName:r,content:c,updateContent:function(n){c.value=n;var a={value:it(n,i.value),id:e.valueData.valueId,entityEmblem:e.valueData.entityEmblem,definitionId:e.valueData.definitionId,alternativeId:e.valueData.alternativeId};t.emit("valueUpdate",a)}}}};const ct=T()(rt,[["render",tt]]);var ot=ct,ut=n("c46e"),lt={props:{indexUrl:String,projectUrl:String,projectName:String,projectId:Number,editUrl:String,classId:Number,className:String,classType:Number,classDescription:String,modelUrl:String},components:{"commit-button":l["a"],"commit-message-editor":s["a"],"entity-list":ge,"indexed-value-editor":ot,"page-path":ut["a"],"parameter-table":Ye},setup:function(e){var t=Object(a["e"])(null),n=Object(a["e"])(null),i=Object(a["e"])(!1),r=Object(a["e"])(""),c=Object(a["e"])(!1),l=Object(a["e"])(!1),s=Object(a["e"])({}),b=new x(e.classId,e.className),m=Object(o["a"])(),f=Object(u["a"])();return{currentEntityKey:t,valueEditorData:n,committing:i,commitErrorMessage:r,showCommitMessageEditor:c,pendingChanges:l,insertedEntities:s,pendingModelChanges:b,changeCurrentParameters:function(e){null===e?(n.value=null,t.value=null):null!==t.value&&e.entityId===t.value.entityId&&e.alternativeId===t.value.alternativeId||(n.value=null,t.value=e)},setValueEditorData:function(e){n.value=e},possiblyClearValueEditor:function(e){n.value&&n.value.parameterName===e&&(n.value=null)},storeEntityInsertion:function(e){b.insertEntity(e),l.value=!0},storeEntityUpdate:function(e){b.updateEntity(e.previousEmblem,e.id,e.entityEmblem),l.value=!0},storeEntityDeletion:function(e){b.deleteEntity(e.id,e.entityEmblem),l.value=b.isPending()},storeValueInsertion:function(e){b.insertValue(e.value,e.entityEmblem,e.definitionId,e.alternativeId),l.value=!0},storeValueUpdate:function(e){b.updateValue(e.value,e.id,e.entityEmblem,e.definitionId,e.alternativeId),l.value=!0},storeValueDeletion:function(e){b.deleteValue(e.id,e.entityEmblem,e.definitionId,e.alternativeId),l.value=b.isPending()},commit:function(t){c.value=!1,i.value=!0;var n=b.makeCommitData();d["b"](n,t,e.projectId,e.modelUrl).then((function(e){e.inserted&&(e.inserted.object?s.value=e.inserted.object:e.inserted.relationship&&(s.value=e.inserted.relationship)),m.success("Commit successful."),l.value=!1})).catch((function(e){f.error({title:"Commit failure",content:e.message})})).finally((function(){b.clearPending(),i.value=!1}))},updateShowCommitMessageEditor:function(e){c.value=e},setRelationshipsClashErrorState:function(e){r.value=e?"Cannot commit: some relationships have the same objects.":""}}}};const st=T()(lt,[["render",c]]);var dt=st,bt=a["b"]({});bt.use(i["a"]),bt.component("entities-app",dt),bt.mount("#entities-app")},c46e:function(e,t,n){"use strict";n("b0c0");var a=n("7a23");function i(e,t,n,i,r,c){var o=Object(a["L"])("n-breadcrumb-item"),u=Object(a["L"])("n-breadcrumb");return Object(a["E"])(),Object(a["h"])(u,null,{default:Object(a["S"])((function(){return[(Object(a["E"])(!0),Object(a["j"])(a["b"],null,Object(a["J"])(n.path,(function(e,t){return Object(a["E"])(),Object(a["h"])(o,{href:e.url,key:t},{default:Object(a["S"])((function(){return[Object(a["l"])(Object(a["M"])(e.name),1)]})),_:2},1032,["href"])})),128)),Object(a["m"])(o,null,{default:Object(a["S"])((function(){return[Object(a["l"])(Object(a["M"])(n.leafName),1)]})),_:1})]})),_:1})}var r={props:{path:Array,leafName:String}},c=n("6b0d"),o=n.n(c);const u=o()(r,[["render",i]]);t["a"]=u},d6ec:function(e,t,n){"use strict";var a=n("7a23"),i=Object(a["l"])(" Create ");function r(e,t,n,r,c,o){var u=Object(a["L"])("n-input"),l=Object(a["L"])("n-button"),s=Object(a["L"])("n-space");return Object(a["E"])(),Object(a["h"])(s,null,{default:Object(a["S"])((function(){return[Object(a["m"])(u,{clearable:"",placeholder:r.placeholder,value:r.currentName,"onUpdate:value":t[0]||(t[0]=function(e){return r.currentName=e}),size:"small"},null,8,["placeholder","value"]),Object(a["m"])(l,{onClick:r.emitCreate,size:"small"},{default:Object(a["S"])((function(){return[i]})),_:1},8,["onClick"])]})),_:1})}n("498a"),n("ac1f"),n("00b4"),n("fb6a");var c=n("f2bf"),o=n("7317"),u={props:{itemName:{type:String,required:!0}},emits:["create"],setup:function(e,t){var n=Object(c["e"])(""),a=Object(c["a"])((function(){return"Enter ".concat(e.itemName," name")})),i=Object(o["a"])();return{currentName:n,placeholder:a,emitCreate:function(){var a=new String(n.value).trim();if(a){var r=/[,]/;if(r.test(a)){var c=e.itemName.charAt(0).toUpperCase()+e.itemName.slice(1);i.error("".concat(c," name contains invalid special characters."))}else t.emit("create",a),n.value=""}else i.error("Please enter name for the new ".concat(e.itemName,"."))}}}},l=n("6b0d"),s=n.n(l);const d=s()(u,[["render",r]]);t["a"]=d},f77a:function(e,t,n){"use strict";var a=n("7a23"),i=Object(a["l"])(" Commit "),r=Object(a["l"])(" There are pending changes. "),c=Object(a["l"])(" Nothing to commit. ");function o(e,t,n,o,u,l){var s=Object(a["L"])("n-button"),d=Object(a["L"])("n-text"),b=Object(a["L"])("n-space");return Object(a["E"])(),Object(a["h"])(b,{align:"baseline"},{default:Object(a["S"])((function(){return[Object(a["m"])(s,{disabled:o.buttonDisabled,loading:n.committing,onClick:o.emitCommitRequest},{default:Object(a["S"])((function(){return[i]})),_:1},8,["disabled","loading","onClick"]),n.errorMessage?(Object(a["E"])(),Object(a["h"])(d,{key:0,type:"error"},{default:Object(a["S"])((function(){return[Object(a["l"])(Object(a["M"])(n.errorMessage),1)]})),_:1})):n.hasPendingChanges?(Object(a["E"])(),Object(a["h"])(d,{key:1},{default:Object(a["S"])((function(){return[r]})),_:1})):(Object(a["E"])(),Object(a["h"])(d,{key:2},{default:Object(a["S"])((function(){return[c]})),_:1}))]})),_:1})}var u=n("f2bf"),l={props:{hasPendingChanges:{type:Boolean,required:!0},committing:{type:Boolean,required:!0},errorMessage:{type:String,required:!1,default:""}},emit:["commitRequest"],setup:function(e,t){var n=Object(u["a"])((function(){return!e.hasPendingChanges||0!==e.errorMessage.length}));return{buttonDisabled:n,emitCommitRequest:function(){t.emit("commitRequest")}}}},s=n("6b0d"),d=n.n(s);const b=d()(l,[["render",o]]);t["a"]=b}});