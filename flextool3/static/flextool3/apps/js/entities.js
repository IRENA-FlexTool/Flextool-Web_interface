(function(e){function t(t){for(var a,c,o=t[0],u=t[1],l=t[2],d=0,b=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);s&&s(t);while(b.length)b.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={entities:0},i=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;i.push([3,"chunk-vendors"]),n()})({"0274":function(e,t,n){"use strict";var a=n("7a23");function r(e,t,n,r,i,c){var o=Object(a["L"])("n-spin"),u=Object(a["L"])("n-result");return"loading"===n.state?(Object(a["E"])(),Object(a["h"])(o,{key:0})):"error"===n.state?(Object(a["E"])(),Object(a["h"])(u,{key:1,status:"error",title:"Error",description:n.errorMessage},null,8,["description"])):"waiting"===n.state?Object(a["K"])(e.$slots,"waiting",{key:2}):Object(a["K"])(e.$slots,"default",{key:3})}var i={props:{state:{type:String,required:!0},errorMessage:{type:String,required:!1,default:""}},state:{loading:"loading",waiting:"waiting",ready:"ready",error:"error"}},c=n("6b0d"),o=n.n(c);const u=o()(i,[["render",r]]);t["a"]=u},"1d6d":function(e,t,n){"use strict";var a=n("7a23");function r(e,t,n,r,i,c){var o=Object(a["L"])("n-input");return Object(a["E"])(),Object(a["h"])(o,{value:r.value,ref:"instance","onUpdate:value":r.updateValue,onBlur:r.cancel,onKeydown:r.handleKey,maxlength:"155",size:"small",clearable:""},null,8,["value","onUpdate:value","onBlur","onKeydown"])}n("b0c0"),n("498a");var i=n("f2bf"),c={props:{name:String},emits:["accept","cancel"],setup:function(e,t){var n=Object(i["e"])(e.name),a=Object(i["e"])(null);return Object(i["d"])((function(){var e;null===(e=a.value)||void 0===e||e.select()})),{instance:a,value:n,cancel:function(){n.value=e.name,t.emit("cancel")},updateValue:function(e){n.value=e},handleKey:function(a){var r=n.value.trim();switch(a.key){case"Enter":r&&r!==e.name?t.emit("accept",r):(n.value=e.name,t.emit("cancel"));break;case"Escape":n.value=e.name,t.emit("cancel");break}}}}},o=n("6b0d"),u=n.n(o);const l=u()(c,[["render",r]]);t["a"]=l},3:function(e,t,n){e.exports=n("c30c")},"315d":function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"k",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"h",(function(){return O})),n.d(t,"m",(function(){return v})),n.d(t,"j",(function(){return j})),n.d(t,"l",(function(){return y}));var a=n("5530");n("ac1f"),n("1276"),n("498a"),n("e9c4"),n("d3b7"),n("d9e2"),n("99af");function r(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var i=r("csrftoken");function c(){return{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":i,"Content-Type":"application/json"}}}function o(e){var t=c();return t["body"]=JSON.stringify({type:"project list?"}),fetch(e,t).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load project list: ".concat(e))}))}))}function u(e,t){var n=c();return n["body"]=JSON.stringify({type:"create project?",name:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to create project: ".concat(e))}))}))}function l(e,t){var n=c();return n["body"]=JSON.stringify({type:"destroy project?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to delete project: ".concat(e))}))}))}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=c();return i["body"]=JSON.stringify(Object(a["a"])({type:e,projectId:t},r)),fetch(n,i).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error("Failed to fetch ".concat(e,": ").concat(t))}))}))}function d(e,t,n,r){var i=c();return i.body=JSON.stringify(Object(a["a"])({type:"commit",projectId:n,message:t},e)),fetch(r,i).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))}))}function b(e,t){var n=c();return n.body=JSON.stringify({type:"current execution?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch current run: ".concat(e))}))}))}function p(e,t,n){var a=c();return a["body"]=JSON.stringify({type:"execute?",projectId:e,scenarios:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to execute: ".concat(e))}))}))}function f(e,t){var n=c();return n["body"]=JSON.stringify({type:"abort?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to abort execution: ".concat(e))}))}))}function m(e,t){var n=c();return n["body"]=JSON.stringify({type:"briefing?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch execution status: ".concat(e))}))}))}function v(e,t,n){var a=c();return a.body=JSON.stringify({type:"summary?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load summary: ".concat(e))}))}))}function j(e,t,n){var a=c();return a.body=JSON.stringify({type:"output directory?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load output directory path: ".concat(e))}))}))}function O(e,t){var n=c();return n.body=JSON.stringify({type:"scenario list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load scenarios: ".concat(e))}))}))}function y(e,t,n){var a=c();return a.body=JSON.stringify({type:"result alternative?",projectId:e,scenarioExecutionId:n}),fetch(t,a).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to result alternative: ".concat(e))}))}))}},"703f":function(e,t,n){"use strict";function a(e){e?addEventListener("beforeunload",r,{capture:!0}):removeEventListener("beforeunload",r,{capture:!0})}function r(e){return e.preventDefault(),e.returnValue="There are uncommitted changes."}n.d(t,"a",(function(){return a}))},"8e39":function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["l"])("Delete");function i(e,t,n,i,c,o){var u=Object(a["L"])("n-button");return Object(a["E"])(),Object(a["h"])(u,{size:"tiny",onClick:i.emitDelete},{default:Object(a["S"])((function(){return[r]})),_:1},8,["onClick"])}var c={props:{emblem:{type:[String,Array],required:!0}},emits:["delete"],setup:function(e,t){return{emitDelete:function(){t.emit("delete",e.emblem)}}}},o=n("6b0d"),u=n.n(o);const l=u()(c,[["render",i]]);t["a"]=l},9973:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),r={class:"page-content"},i={class:"page-content"};function c(e,t,n,c,o,u){var l=Object(a["L"])("navigation-menu"),s=Object(a["L"])("n-card");return Object(a["E"])(),Object(a["j"])(a["b"],null,[Object(a["m"])(s,{size:"small"},{default:Object(a["S"])((function(){return[Object(a["m"])(l,{current:n.name,"index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},null,8,["current","index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])]})),_:1}),Object(a["k"])("div",r,[Object(a["K"])(e.$slots,"header")]),Object(a["k"])("div",i,[Object(a["K"])(e.$slots,"default")])],64)}var o=Object(a["l"])(" Log out ");function u(e,t,n,r,i,c){var u=Object(a["L"])("n-image"),l=Object(a["L"])("n-menu"),s=Object(a["L"])("n-space"),d=Object(a["L"])("n-button");return Object(a["E"])(),Object(a["h"])(s,{justify:"space-between",align:"baseline"},{default:Object(a["S"])((function(){return[Object(a["m"])(s,{align:"start"},{default:Object(a["S"])((function(){return[Object(a["m"])(u,{src:n.logoUrl,alt:"FlexTool",width:90,"preview-disabled":""},null,8,["src"]),Object(a["m"])(l,{"default-value":n.current,mode:"horizontal",options:r.links},null,8,["default-value","options"])]})),_:1}),Object(a["m"])(d,{onClick:r.logout},{default:Object(a["S"])((function(){return[o]})),_:1},8,["onClick"])]})),_:1})}var l=n("f2bf"),s=n("ac88");function d(e,t){return function(){return Object(l["c"])(s["a"],{href:t},(function(){return e}))}}function b(e){var t={Projects:e.indexUrl,"Manage project":e.projectUrl,"Edit model":e.editUrl,Run:e.runUrl,Results:e.resultsUrl},n=[];for(var a in t){var r=t[a],i=null!==r,c=i?d(a,r):a;n.push({label:c,key:a,disabled:!i})}return n}var p={props:{current:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},setup:function(e){var t=Object(l["e"])(b(e)),n=Object(l["e"])(null);return{links:t,activeKey:n,logout:function(){location.assign(e.logoutUrl)}}}},f=n("6b0d"),m=n.n(f);const v=m()(p,[["render",u]]);var j=v,O={props:{name:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"navigation-menu":j}};n("b16f");const y=m()(O,[["render",c]]);t["a"]=y},b16f:function(e,t,n){"use strict";n("c7cb")},c30c:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("f2bf"),r=n("5333"),i=n("7a23");function c(e,t,n,a,r,c){var o=Object(i["L"])("page-path"),u=Object(i["L"])("commit-button"),l=Object(i["L"])("n-h1"),s=Object(i["L"])("n-p"),d=Object(i["L"])("entity-list"),b=Object(i["L"])("n-grid-item"),p=Object(i["L"])("parameter-table"),f=Object(i["L"])("indexed-value-editor"),m=Object(i["L"])("n-grid"),v=Object(i["L"])("page");return Object(i["E"])(),Object(i["h"])(v,{name:"Edit model","index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},{header:Object(i["S"])((function(){return[Object(i["m"])(o,{path:[{name:"Projects",url:n.indexUrl},{name:n.projectName,url:n.projectUrl},{name:"Model",url:n.editUrl}],"leaf-name":n.className},null,8,["path","leaf-name"])]})),default:Object(i["S"])((function(){return[Object(i["m"])(u,{"has-pending-changes":a.pendingChanges,committing:a.committing,"error-message":a.commitErrorMessage,onCommitRequest:a.commit},null,8,["has-pending-changes","committing","error-message","onCommitRequest"]),Object(i["m"])(l,null,{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.className),1)]})),_:1}),Object(i["T"])(Object(i["m"])(s,null,{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.classDescription),1)]})),_:1},512),[[i["P"],"None"!==n.classDescription]]),Object(i["m"])(m,{cols:6,"x-gap":12},{default:Object(i["S"])((function(){return[Object(i["m"])(b,{span:2},{default:Object(i["S"])((function(){return[Object(i["m"])(d,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"class-name":n.className,"class-type":n.classType,inserted:a.insertedEntities,onEntitySelect:a.changeCurrentParameters,onEntityInsert:a.storeEntityInsertion,onEntityUpdate:a.storeEntityUpdate,onEntityDelete:a.storeEntityDeletion,onRelationshipsClash:a.setRelationshipsClashErrorState},null,8,["project-id","model-url","class-id","class-name","class-type","inserted","onEntitySelect","onEntityInsert","onEntityUpdate","onEntityDelete","onRelationshipsClash"])]})),_:1}),Object(i["m"])(b,{span:2},{default:Object(i["S"])((function(){return[Object(i["m"])(p,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"entity-key":a.currentEntityKey,diff:a.pendingModelChanges,onOpenValueEditorRequest:a.setValueEditorData,onCloseValueEditorRequest:a.possiblyClearValueEditor,onValueInsert:a.storeValueInsertion,onValueUpdate:a.storeValueUpdate,onValueDelete:a.storeValueDeletion},null,8,["project-id","model-url","class-id","entity-key","diff","onOpenValueEditorRequest","onCloseValueEditorRequest","onValueInsert","onValueUpdate","onValueDelete"])]})),_:1}),Object(i["m"])(b,{span:2},{default:Object(i["S"])((function(){return[Object(i["m"])(f,{"value-data":a.valueEditorData,diff:a.pendingModelChanges,onValueUpdate:a.storeValueUpdate},null,8,["value-data","diff","onValueUpdate"])]})),_:1})]})),_:1})]})),_:1},8,["index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])}n("a9e3"),n("d3b7");var o=n("7317"),u=n("4d91"),l=n("315d"),s=n("d5e4"),d=n("5364"),b=n("9bd1"),p=n("53ca"),f=n("bee2"),m=n("d4ec");n("a4d3"),n("e01a"),n("4ec9"),n("3ca3"),n("ddb0"),n("159b"),n("ac1f"),n("1276"),n("498a"),n("b0c0"),n("d9e2"),n("10d1");function v(e){if(!e.trim())return null;var t=parseFloat(e);return isNaN(t)?"NAN"===e.toUpperCase()?t:e:t}n("a15b");function j(e,t){return e+"_"+t.join("__")}function O(e,t){return"string"===typeof t?t:j(e,t)}var y=Symbol("insert action"),h=Symbol("delete action"),g=Symbol("update action"),E=Object(f["a"])((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(m["a"])(this,e),this.action=t,this.parameters=new Map}));function S(e,t){var n=e.parameters.get(t);return void 0===n&&(n=new Map,e.parameters.set(t,n)),n}function I(e){if("object"!==Object(p["a"])(e)||!("content"in e))return e;var t=[];return e.content.split("\n").forEach((function(e){if(e=e.trim(),e){var n=e.split(/\s+/);1===n.length?t.push(v(n[0])):t.push([n[0],v(n[1])])}})),!t||t[0].length>1?{type:"map",index_type:"str",index_name:e.index_name,data:t}:{type:"array",value_type:"number"===typeof t[0]?"float":"str",data:t}}var w=new WeakMap,k=new WeakMap,N=new WeakMap,_=function(){function e(t,n){Object(m["a"])(this,e),Object(s["a"])(this,w,{writable:!0,value:void 0}),Object(s["a"])(this,k,{writable:!0,value:void 0}),Object(s["a"])(this,N,{writable:!0,value:void 0}),Object(b["a"])(this,w,t),Object(b["a"])(this,k,n),Object(b["a"])(this,N,new Map)}return Object(f["a"])(e,[{key:"makeCommitData",value:function(){var e=[],t=[],n=[],a=[],r=[],i=[],c=[],o=[],u=[];return Object(d["a"])(this,N).forEach((function(i,l){var s=i.action;if(s)if(s.action===y)void 0===s.objectNames?e.push({name:s.name}):a.push({name:s.name,object_name_list:s.objectNames});else{if(s.action!==g){if(s.action===h)return void n.push(s.id);throw Error("Unknown object action.")}void 0===s.objects?t.push({id:s.id,name:s.name}):r.push({id:s.id,name:s.name,object_name_list:s.objects})}i.parameters.forEach((function(e,t){e.forEach((function(e,n){e.action===y?c.push({entity_name:l,definition_id:t,alternative_id:n,value:I(e.value)}):e.action===g?o.push({id:e.id,value:I(e.value)}):e.action===h&&u.push(e.id)}))}))})),{class_id:Object(d["a"])(this,w),insertions:{object:e,relationship:a,parameter_value:c},updates:{object:t,relationship:r,parameter_value:o},deletions:{object:n,relationship:i,parameter_value:u}}}},{key:"isPending",value:function(){return Object(d["a"])(this,N).size>0}},{key:"clearPending",value:function(){Object(d["a"])(this,N).clear()}},{key:"getPendingEntity",value:function(e){var t=O(Object(d["a"])(this,k),e),n=Object(d["a"])(this,N).get(t);return void 0===n&&(n=new E,Object(d["a"])(this,N).set(t,n)),n}},{key:"insertEntity",value:function(e){if("string"===typeof e)Object(d["a"])(this,N).set(e,new E({action:y,name:e}));else{var t=j(Object(d["a"])(this,k),e);Object(d["a"])(this,N).set(t,new E({action:y,name:t,objectNames:e}))}}},{key:"updateEntity",value:function(e,t,n){var a=function(e,t){return void 0===e||e.action===g&&t!==e.originalName};if("string"===typeof n){var r=Object(d["a"])(this,N).get(e);void 0===r?Object(d["a"])(this,N).set(n,new E({action:g,id:t,name:n,originalName:e})):a(r.action,n)?r.action={action:g,id:t,name:n,originalName:r.action.originalName}:r.action.action===y&&(r.action.name=n)}else{var i=j(Object(d["a"])(this,k),e),c=j(Object(d["a"])(this,k),n),o=Object(d["a"])(this,N).get(i);void 0===o?Object(d["a"])(this,N).set(c,new E({action:g,id:t,name:c,objects:n,originalName:i,originalObjects:e})):a(o.action,c)?o.action={action:g,id:t,name:c,objects:n,originalName:i,originalEmblem:e}:o.action.action===y&&(o.action.name=c,o.action.objectNames=n)}}},{key:"deleteEntity",value:function(e,t){var n=O(Object(d["a"])(this,k),t),a=Object(d["a"])(this,N).get(n);void 0===a?Object(d["a"])(this,N).set(n,new E({action:h,id:e})):void 0===a.action||a.action.action!==y?(a.action={action:h,id:e},a.parameters.clear()):Object(d["a"])(this,N).delete(n)}},{key:"insertValue",value:function(e,t,n,a){var r=O(Object(d["a"])(this,k),t),i=this.getPendingEntity(r),c={action:y,entity_name:r,definition_id:n,alternative_id:a,value:e},o=S(i,n);o.set(a,c)}},{key:"updateValue",value:function(e,t,n,a,r){var i=this.getPendingEntity(n),c=S(i,a),o=void 0;o=void 0===t?{action:y,entity_name:O(Object(d["a"])(this,k),n),definition_id:a,alternative_id:r,value:e}:{action:g,id:t,value:e},c.set(r,o)}},{key:"deleteValue",value:function(e,t,n,a){var r=this.getPendingEntity(t),i=S(r,n);void 0===e?(i.delete(a),0===i.size&&(r.parameters.delete(n),0===r.parameters.size&&void 0===r.action&&Object(d["a"])(this,N).delete(t))):i.set(a,{action:h,id:e})}},{key:"pendingValue",value:function(e,t,n){var a=O(Object(d["a"])(this,k),e),r=Object(d["a"])(this,N).get(a);if(void 0!==r){var i=r.parameters.get(t);if(void 0!==i){var c=i.get(n);return void 0!==c?c.value:void 0}}}},{key:"isPendingDeletion",value:function(e,t,n){var a=O(Object(d["a"])(this,k),e),r=Object(d["a"])(this,N).get(a);if(void 0===r)return!1;var i=r.parameters.get(t);if(void 0===i)return!1;var c=i.get(n);return void 0!==c&&i.get(n).action===h}}]),e}(),U=n("703f"),q=n("f77a");function x(e,t,n,a,r,c){var o=Object(i["L"])("n-tree"),u=Object(i["L"])("new-named-item-row"),l=Object(i["L"])("entity-list-new-relationship-row"),s=Object(i["L"])("n-space"),d=Object(i["L"])("fetchable");return Object(i["E"])(),Object(i["h"])(d,{state:a.state,"error-message":a.errorMessage},{default:Object(i["S"])((function(){return[Object(i["m"])(s,{vertical:""},{default:Object(i["S"])((function(){return[Object(i["m"])(o,{selectable:"","block-node":"",data:a.entityList,"render-label":a.renderLabel,"render-suffix":a.renderSuffix,"selected-keys":a.selectedKeys,"onUpdate:selectedKeys":a.emitEntitySelect},null,8,["data","render-label","render-suffix","selected-keys","onUpdate:selectedKeys"]),1===n.classType?Object(i["T"])((Object(i["E"])(),Object(i["h"])(u,{key:0,"item-name":"object",onCreate:a.addObject},null,8,["onCreate"])),[[i["P"],a.alternatives]]):Object(i["T"])((Object(i["E"])(),Object(i["h"])(l,{key:1,"available-objects":a.availableObjects,onRelationshipCreate:a.addRelationship},null,8,["available-objects","onRelationshipCreate"])),[[i["P"],a.alternatives]])]})),_:1})]})),_:1},8,["state","error-message"])}var C=n("2909"),V=n("1da1");n("96cf"),n("99af"),n("4e82"),n("a434"),n("7db0"),n("c740");function L(e,t){return"string"===typeof e?e===t:D(e,t)}function D(e,t){for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0}var R=n("0274"),M=Object(i["l"])("―");function P(e,t,n,a,r,c){var o=Object(i["L"])("n-text"),u=Object(i["L"])("item-name-input"),l=Object(i["L"])("n-space");return Object(i["E"])(),Object(i["h"])(l,{align:"baseline"},{default:Object(i["S"])((function(){return[a.editing?(Object(i["E"])(),Object(i["h"])(u,{key:1,name:n.objectName,onAccept:a.emitRename,onCancel:a.hideInput},null,8,["name","onAccept","onCancel"])):(Object(i["E"])(),Object(i["h"])(o,{key:0,onDblclick:a.showInput},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.objectName),1)]})),_:1},8,["onDblclick"])),Object(i["m"])(o,null,{default:Object(i["S"])((function(){return[M]})),_:1}),Object(i["m"])(o,{italic:""},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.alternativeName),1)]})),_:1})]})),_:1})}var K=n("1d6d"),A={props:{objectName:{type:String,required:!0},objectId:{type:Number,required:!1},alternativeName:{type:String,required:!0}},emits:["rename"],components:{"item-name-input":K["a"]},setup:function(e,t){var n=Object(a["e"])(!1),r=Object(a["e"])(e.objectName),i=Object(a["e"])(null);return{editing:n,editValue:r,inputInstance:i,showInput:function(){n.value=!0},hideInput:function(){n.value=!1},emitRename:function(a){n.value=!1,t.emit("rename",{id:e.objectId,previousEmblem:e.objectName,entityEmblem:a})}}}},z=n("6b0d"),J=n.n(z);const T=J()(A,[["render",P]]);var F=T,B=Object(i["l"])("―");function $(e,t,n,a,r,c){var o=Object(i["L"])("entity-list-relationship-object"),u=Object(i["L"])("n-text"),l=Object(i["L"])("n-space");return Object(i["E"])(),Object(i["h"])(l,{align:"baseline"},{default:Object(i["S"])((function(){return[(Object(i["E"])(!0),Object(i["j"])(i["b"],null,Object(i["J"])(n.objects,(function(e,t){return Object(i["E"])(),Object(i["h"])(o,{"object-name":e,"object-names-clash":n.objectNamesClash,dimension:t,"available-objects":n.availableObjects[t],key:t,onAccept:a.emitObjectsUpdate},null,8,["object-name","object-names-clash","dimension","available-objects","onAccept"])})),128)),Object(i["m"])(u,null,{default:Object(i["S"])((function(){return[B]})),_:1}),Object(i["m"])(u,{italic:""},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.alternativeName),1)]})),_:1})]})),_:1})}function W(e,t,n,a,r,c){var o=Object(i["L"])("n-tag"),u=Object(i["L"])("entity-list-relationship-object-input");return a.editing?(Object(i["E"])(),Object(i["h"])(u,{key:1,"object-name":n.objectName,"available-objects":n.availableObjects,onAccept:a.accept,onCancel:a.hideInput},null,8,["object-name","available-objects","onAccept","onCancel"])):(Object(i["E"])(),Object(i["h"])(o,{key:0,type:a.tagType,onClick:a.startEditing,size:"small"},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.objectName),1)]})),_:1},8,["type","onClick"]))}function X(e,t,n,a,r,c){var o=Object(i["L"])("n-select");return Object(i["E"])(),Object(i["h"])(o,{value:a.currentObject,"onUpdate:value":t[0]||(t[0]=function(e){return a.currentObject=e}),ref:"instance",filterable:"",options:a.options,size:"small",onBlur:a.accept,onKeydown:a.handleKey},null,8,["value","options","onBlur","onKeydown"])}var G={props:{objectName:{type:String,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept","cancel"],setup:function(e,t){var n=[];e.availableObjects.forEach((function(e){n.push({label:e,value:e})}));var r=Object(a["e"])(n),i=Object(a["e"])(e.objectName),c=Object(a["e"])(null);Object(a["d"])((function(){var e;null===(e=c.value)||void 0===e||e.focus()}));var o=function(){i.value!==e.objectName?t.emit("accept",i.value):t.emit("cancel")},u=function(){t.emit("cancel")};return{options:r,currentObject:i,instance:c,accept:o,cancel:u,handleKey:function(e){switch(e.key){case"Enter":o();break;case"Escape":u();break}}}}};const H=J()(G,[["render",X]]);var Q=H,Y={props:{objectName:{type:String,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1},dimension:{type:Number,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept"],components:{"entity-list-relationship-object-input":Q},setup:function(e,t){var n=Object(a["a"])((function(){return e.objectNamesClash?"error":"default"})),r=Object(a["e"])(!1);return{tagType:n,editing:r,startEditing:function(){r.value=!0},accept:function(n){r.value=!1,t.emit("accept",{dimension:e.dimension,objectName:n})},hideInput:function(){r.value=!1}}}};const Z=J()(Y,[["render",W]]);var ee=Z,te={props:{objects:{type:Array,required:!0},originalObjects:{type:Array,required:!0},relationshipId:{type:Number,required:!1},alternativeName:{type:String,required:!0},availableObjects:{type:Array,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1},groupId:{type:Number,required:!0}},emits:["objectsUpdate"],components:{"entity-list-relationship-object":ee},setup:function(e,t){return{emitObjectsUpdate:function(n){var a=[];e.objects.forEach((function(e,t){t!==n.dimension?a.push(e):a.push(n.objectName)}));var r=null!==e.originalObjects?e.originalObjects:e.objects;t.emit("objectsUpdate",{id:e.relationshipId,previousEmblem:r,entityEmblem:a,groupId:e.groupId})}}}};const ne=J()(te,[["render",$]]);var ae=ne,re=n("8e39"),ie=n("d6ec"),ce=Object(i["l"])(" Create ");function oe(e,t,n,a,r,c){var o=Object(i["L"])("n-select"),u=Object(i["L"])("n-button"),l=Object(i["L"])("n-space");return Object(i["E"])(),Object(i["h"])(l,{align:"baseline",size:"small"},{default:Object(i["S"])((function(){return[(Object(i["E"])(!0),Object(i["j"])(i["b"],null,Object(i["J"])(a.dimensions,(function(e){return Object(i["E"])(),Object(i["h"])(o,{key:e,options:a.options[e],filterable:"",size:"small","onUpdate:value":a.updateSelection},null,8,["options","onUpdate:value"])})),128)),Object(i["m"])(u,{onClick:a.emitRelationshipCreate,size:"small",disabled:!a.wellDefined},{default:Object(i["S"])((function(){return[ce]})),_:1},8,["onClick","disabled"])]})),_:1})}function ue(e){var t=[];return e.forEach((function(e,n){var a=[];e.forEach((function(e){a.push({label:e,value:e,dimension:n})})),t.push(a)})),t}var le={props:{availableObjects:{type:Array,required:!0}},emits:["relationshipCreate"],setup:function(e,t){var n=Object(a["e"])(Object(C["a"])(Array(e.availableObjects.length).keys())),r=Object(a["e"])(ue(e.availableObjects)),i=Array(e.availableObjects.length),c=Object(a["e"])(!1);return{dimensions:n,options:r,wellDefined:c,emitRelationshipCreate:function(){t.emit("relationshipCreate",i)},updateSelection:function(e,t){i[t.dimension]=e,i.forEach((function(e,t){void 0!==e&&t===i.length-1&&(c.value=!0)}))}}}};const se=J()(le,[["render",oe]]);var de=se;function be(e,t){return l["g"]("alternatives?",e,t).then((function(e){return e.alternatives}))}function pe(e,t){return l["g"]("make base alternative",e,t,{}).then((function(e){return e.alternatives}))}function fe(e,t,n,a,r,i,c){var o=be(e,t),u={object_class_id:n};l["g"]("objects?",e,t,u).then(function(){var n=Object(V["a"])(regeneratorRuntime.mark((function n(c){var u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u=c.objects,n.next=3,o;case 3:if(r.value=n.sent,0!==r.value.length){n.next=8;break}return n.next=7,pe(e,t);case 7:r.value=n.sent;case 8:l=[],u.forEach((function(e){r.value.forEach((function(t){l.push({entityEmblem:e.name,entityId:e.id,alternativeName:t.name,alternativeId:t.id,key:"".concat(e.name,":").concat(t.id)})}))})),a.value=l,i.value=R["a"].state.ready;case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){c.value=e.message,i.value=R["a"].state.error}))}function me(e,t,n){var a={relationship_class_id:n};return l["g"]("available relationship objects?",e,t,a).then((function(e){return e.available_objects}))}var ve=0;function je(){return ve+=1,ve}function Oe(e,t,n,a,r,i,c,o){var u=be(e,t),s={relationship_class_id:n};l["g"]("relationships?",e,t,s).then(function(){var o=Object(V["a"])(regeneratorRuntime.mark((function o(l){var s,d,b;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=l.relationships,d=new Map,s.forEach((function(e){var t=d.get(e.id);void 0===t&&(t=[],d.set(e.id,t)),t.push(e.object_name)})),o.next=5,u;case 5:if(i.value=o.sent,0!==i.value.length){o.next=10;break}return o.next=9,pe(e,t);case 9:i.value=o.sent;case 10:return o.next=12,me(e,t,n);case 12:r.value=o.sent,b=[],d.forEach((function(e,t){var n=je();i.value.forEach((function(a){b.push({entityEmblem:e,originalEmblem:Object(C["a"])(e),entityId:t,alternativeName:a.name,alternativeId:a.id,availableObjects:r,objectNamesClash:!1,key:"".concat(e.join(","),":").concat(a.id),groupId:n})}))})),b.sort((function(e,t){for(var n=0;n<e.entityEmblem.length;++n){var a=e.entityEmblem[n].toUpperCase(),r=t.entityEmblem[n].toUpperCase();if(a!==r)return a>r}return!1})),a.value=b,c.value=R["a"].state.ready;case 18:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){o.value=e.message,c.value=R["a"].state.error}))}var ye={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},inserted:{type:Object,required:!1}},emits:["entitySelect","entityInsert","entityUpdate","entityDelete","relationshipsClash"],components:{fetchable:R["a"],"new-named-item-row":ie["a"],"entity-list-new-relationship-row":de},setup:function(e,t){var n=Object(a["e"])(R["a"].state.loading),r=Object(a["e"])([]),i=Object(a["e"])(""),c=Object(a["e"])([]),o=Object(a["e"])([]),l=Object(a["e"])([]),s=Object(u["a"])();Object(a["d"])((function(){1===e.classType?fe(e.projectId,e.modelUrl,e.classId,r,o,n,i):Oe(e.projectId,e.modelUrl,e.classId,r,l,o,n,i)}));var d=function(e){for(var n=void 0,a=r.value.length-1;-1!=a;--a){var i=r.value[a];L(i.entityEmblem,e)&&(n=i.entityId,r.value.splice(a,1))}t.emit("entityDelete",{id:n,entityEmblem:e})},b=function(e){var n=r.value.find((function(t){return e.entityEmblem===t.entityEmblem}));n?s.error({title:"Cannot rename",content:"An object with the same name already exists."}):(r.value.forEach((function(t){t.entityEmblem==e.previousEmblem&&(t.entityEmblem=e.entityEmblem)})),t.emit("entityUpdate",e))},p=function(e){var n=r.value.find((function(t){return D(e.entityEmblem,t.entityEmblem)})),a=void 0!==n;r.value.forEach((function(t){e.groupId===t.groupId&&(t.objectNamesClash=a,t.entityEmblem=e.entityEmblem,a||(t.originalEmblem=Object(C["a"])(e.entityEmblem)))})),t.emit("relationshipsClash",n),n||t.emit("entityUpdate",e)};return Object(a["g"])(Object(a["f"])(e).inserted,(function(n){n&&(r.value.forEach((function(t){var a=O(e.className,t.entityEmblem),r=n[a];void 0!==r&&(t.entityId=r)})),c.value.length=0,t.emit("entitySelect",null))})),{state:n,entityList:r,errorMessage:i,selectedKeys:c,alternatives:o,availableObjects:l,renderLabel:function(t){return 1===e.classType?Object(a["c"])(F,{objectName:t.option.entityEmblem,objectId:t.option.entityId,alternativeName:t.option.alternativeName,onRename:b}):Object(a["c"])(ae,{objects:t.option.entityEmblem,originalObjects:t.option.originalEmblem,relationshipId:t.option.entityId,alternativeName:t.option.alternativeName,availableObjects:t.option.availableObjects,groupId:t.option.groupId,objectNamesClash:t.option.objectNamesClash,onObjectsUpdate:p})},renderSuffix:function(e){return Object(a["c"])(re["a"],{emblem:e.option.entityEmblem,onDelete:d})},emitEntitySelect:function(e,n){var a=n.find((function(t){return t&&t.key===e[0]}));t.emit("entitySelect",a?{entityEmblem:a.entityEmblem,entityId:a.entityId,alternativeName:a.alternativeName,alternativeId:a.alternativeId}:null)},addObject:function(e){var n,a=r.value.find((function(t){return e===t.entityEmblem}));if(a)s.error({title:"Cannot create",content:"An entity with the same name already exists."});else{var i=[];o.value.forEach((function(t){i.push({entityEmblem:e,entityId:void 0,alternativeName:t.name,alternativeId:t.id,key:"".concat(e,":").concat(t.id)})}));var c=r.value.findIndex((function(t){return e<t.entityEmblem}));(n=r.value).splice.apply(n,[c>=0?c:r.value.length,0].concat(i)),t.emit("entityInsert",e)}},addRelationship:function(e){var n,a=r.value.find((function(t){return D(e,t.entityEmblem)}));if(a)s.error({title:"Cannot create relationship",content:"A relationship with the same objects already exists."});else{var i=je(),c=[],u=Object(C["a"])(e);o.value.forEach((function(t){c.push({entityEmblem:u,originalEmblem:Object(C["a"])(u),entityId:void 0,alternativeName:t.name,alternativeId:t.id,availableObjects:l,objectNamesClash:!1,key:"".concat(e.join(","),":").concat(t.id),groupId:i})}));var d=r.value.findIndex((function(t){return e[0]<t.entityEmblem}));(n=r.value).splice.apply(n,[d>=0?d:r.value.length,0].concat(c)),t.emit("entityInsert",u)}}}}};const he=J()(ye,[["render",x]]);var ge=he,Ee=Object(i["l"])("―");function Se(e,t,n,a,r,c){var o=Object(i["L"])("n-text"),u=Object(i["L"])("n-space"),l=Object(i["L"])("hand-point-left-regular"),s=Object(i["L"])("n-icon"),d=Object(i["L"])("n-empty"),b=Object(i["L"])("hand-paper-regular"),p=Object(i["L"])("n-data-table"),f=Object(i["L"])("n-result");return Object(i["E"])(),Object(i["h"])(u,{vertical:""},{default:Object(i["S"])((function(){return[Object(i["m"])(u,null,{default:Object(i["S"])((function(){return[Object(i["m"])(o,{strong:""},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(a.entityName),1)]})),_:1}),Object(i["m"])(o,null,{default:Object(i["S"])((function(){return[Ee]})),_:1}),Object(i["m"])(o,{italic:""},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(a.alternativeName),1)]})),_:1})]})),_:1}),a.errorMessage?(Object(i["E"])(),Object(i["h"])(f,{key:1,status:"error",title:"Error",description:a.errorMessage},null,8,["description"])):(Object(i["E"])(),Object(i["h"])(p,{key:0,size:"small",columns:a.columns,data:a.data,loading:a.loading,"row-key":a.rowKey},{empty:Object(i["S"])((function(){return[null===n.entityKey?(Object(i["E"])(),Object(i["h"])(d,{key:0,description:"Select an entity on the left to load its parameters here."},{icon:Object(i["S"])((function(){return[Object(i["m"])(s,null,{default:Object(i["S"])((function(){return[Object(i["m"])(l)]})),_:1})]})),_:1})):(Object(i["E"])(),Object(i["h"])(d,{key:1,description:"Entity has no parameters."},{icon:Object(i["S"])((function(){return[Object(i["m"])(s,null,{default:Object(i["S"])((function(){return[Object(i["m"])(b)]})),_:1})]})),_:1}))]})),_:1},8,["columns","data","loading","row-key"]))]})),_:1})}var Ie=n("5530"),we=(n("00b4"),n("d81d"),n("35ce")),ke=n("9790");function Ne(e,t,n,a,r,c){var o=Object(i["L"])("n-tooltip");return Object(i["E"])(),Object(i["h"])(o,null,{trigger:Object(i["S"])((function(){return[Object(i["l"])(Object(i["M"])(n.name),1)]})),default:Object(i["S"])((function(){return[Object(i["l"])(" "+Object(i["M"])(n.description),1)]})),_:1})}var _e={props:{name:String,description:String}};const Ue=J()(_e,[["render",Ne]]);var qe=Ue,xe=Object(i["l"])(" Edit ");function Ce(e,t,n,a,r,c){var o=Object(i["L"])("n-select"),u=Object(i["L"])("n-input"),l=Object(i["L"])("n-button"),s=Object(i["L"])("n-space");return Object(i["E"])(),Object(i["h"])(s,null,{default:Object(i["S"])((function(){return[Object(i["m"])(o,{options:a.species,value:a.currentSpecie,size:"small","onUpdate:value":a.changeState},null,8,["options","value","onUpdate:value"]),"single value"===a.state?(Object(i["E"])(),Object(i["h"])(u,{key:0,value:a.currentValue,"onUpdate:value":a.changeSingleValue,size:"small"},null,8,["value","onUpdate:value"])):"value list"===a.state?(Object(i["E"])(),Object(i["h"])(o,{key:1,value:a.currentValue,options:a.valueOptions,size:"small","onUpdate:value":a.changeSingleValue},null,8,["value","options","onUpdate:value"])):"indexed value"===a.state?(Object(i["E"])(),Object(i["h"])(l,{key:2,size:"small",onClick:a.emitOpenValueEditorRequest},{default:Object(i["S"])((function(){return[xe]})),_:1},8,["onClick"])):Object(i["i"])("",!0)]})),_:1})}function Ve(e){var t=[{label:"none",value:"none"}];return e.constant&&t.push({label:"constant",value:"constant"}),e.period&&t.push({label:"period",value:"period"}),e.time&&t.push({label:"time",value:"time"}),t}function Le(e,t){return"none"===e?"empty":"constant"===e?t?"value list":"single value":"indexed value"}function De(e){if(e){var t=[];return e.forEach((function(e){t.push({label:e,value:e})})),t}}function Re(e,t,n,a,r){if("none"!==e){if("constant"!==e)return"object"===Object(p["a"])(n)?n:"object"===Object(p["a"])(a)?a:{type:"map",index_type:"str",index_name:e,data:[["T0001",0]]};switch(Object(p["a"])(n)){case"string":return n;case"number":return new String(n);default:return"constant"===t?null!==a?new String(a):"":r?r[0]:""}}}var Me={props:{valueData:{type:Object,required:!0},valueId:{type:Number,required:!1}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],setup:function(e,t){var n=Object(a["e"])(Ve(e.valueData.allowedSpecies)),r=Object(a["e"])(Le(e.valueData.specie,e.valueData.allowedValues)),i=Object(a["e"])(e.valueData.specie),c=Object(a["e"])(Re(e.valueData.specie,e.valueData.specie,e.valueData.parameterValue,e.valueData.parameterValue,e.valueData.allowedValues)),o=Object(a["e"])(De(e.valueData.allowedValues));return Object(a["g"])(Object(a["f"])(e).valueData,(function(e){n.value=Ve(e.allowedSpecies),r.value=Le(e.specie,e.allowedValues),i.value=e.specie,c.value=Re(e.specie,e.specie,e.parameterValue,e.parameterValue,e.allowedValues),o.value=De(e.allowedValues)})),{species:n,state:r,currentSpecie:i,currentValue:c,valueOptions:o,changeState:function(n){i.value=n;var a=Le(n,e.valueData.allowedValues);"indexed value"===r.value&&t.emit("closeValueEditorRequest"),r.value=a;var o=Re(n,e.valueData.specie,c.value,e.valueData.parameterValue,e.valueData.allowedValues);if(void 0===o)t.emit("valueDelete",{id:e.valueId});else{var u="object"===Object(p["a"])(o),l=u?o:v(o);void 0===e.valueId?t.emit("valueInsert",{value:l}):t.emit("valueUpdate",{id:e.valueId,value:l})}c.value=o},changeSingleValue:function(n){var a=v(n);void 0===e.valueId?t.emit("valueInsert",{value:a}):t.emit("valueUpdate",{id:e.valueId,value:a}),c.value=n},emitOpenValueEditorRequest:function(){t.emit("openValueEditorRequest",{valueId:e.valueId,parameterValue:c})}}}};const Pe=J()(Me,[["render",Ce]]);var Ke=Pe;function Ae(e,t){var n={title:"Parameter",key:"name",render:function(e){return Object(a["c"])(qe,{name:e.name,description:e.description})}},r=function(t,n){return void 0===t.id?Object(Ie["a"])({entityEmblem:e.value.entityEmblem,definitionId:n.definitionId,alternativeId:e.value.alternativeId},t):Object(Ie["a"])({entityEmblem:e.value.entityEmblem},t)},i={title:"Value",key:"value",render:function(n){return Object(a["c"])(Ke,{valueData:{allowedSpecies:n.allowedSpecies,specie:n.specie,parameterValue:n.value,allowedValues:n.allowedValues},valueId:n.valueId,onOpenValueEditorRequest:function(a){t.emit("openValueEditorRequest",{value:a.parameterValue,valueId:a.valueId,entityEmblem:e.value.entityEmblem,parameterName:n.name,definitionId:n.definitionId,alternativeId:e.value.alternativeId})},onCloseValueEditorRequest:function(){t.emit("closeValueEditorRequest",n.name)},onValueInsert:function(e){t.emit("valueInsert",r(e,n))},onValueUpdate:function(e){t.emit("valueUpdate",r(e,n))},onValueDelete:function(e){t.emit("valueDelete",r(e,n))}})}};return[n,i]}var ze=/constant[^.]*\.?$/i,Je=/period[^.]*\.?$/i,Te=/time[^.]*\.?$/i;function Fe(e){var t=Je.test(e),n=Te.test(e),a=ze.test(e)||!t&&!n;return{constant:a,period:t,time:n}}function Be(e,t){return"object"!==Object(p["a"])(e)||null===e||"map"!==e.type&&"array"!==e.type&&!("content"in e)?"constant":"period"===e.index_name&&t.period?"period":"time"===e.index_name&&t.time?"time":"period"}function $e(e,t,n,a){n.forEach((function(n){if(a.isPendingDeletion(e,n.definitionId,t))return n.specie=void 0,void(n.value=void 0);var r=a.pendingValue(e,n.definitionId,t);void 0!==r&&(n.specie=Be(r,n.allowedSpecies),n.value=r)}))}function We(e,t,n){return l["g"]("parameter definitions?",e,t,{class_id:n}).then((function(e){return e.definitions}))}function Xe(e,t,n){return We(e,t,n).then(function(){var n=Object(V["a"])(regeneratorRuntime.mark((function n(a){var r,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=[],i=new Map,a.forEach((function(e){var t={};t.name=e.name,t.description=e.description,t.definitionId=e.id,t.allowedSpecies=Fe(e.description),t.specie="none",e.parameter_value_list_id&&i.set(e.id,e.parameter_value_list_id),r.push(t)})),!(i.size>0)){n.next=8;break}return n.next=6,l["g"]("parameter value lists?",e,t,{value_list_ids:Object(C["a"])(i.values())}).then((function(e){return e.lists}));case 6:c=n.sent,r.forEach((function(e){var t=i.get(e.definitionId);if(t){var n=c.find((function(e){return t===e.id}));e.allowedValues=n.value_list.map((function(e){return JSON.parse(e)}))}}));case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function Ge(e,t,n,a,r,i,c,o,u,s,d){null===e.promise&&(e.promise=Xe(a,r,i)),e.promise.then((function(e){var n=[];e.forEach((function(e){n.push(Object(Ie["a"])({},e))})),void 0===o?($e(c,u,n,s),t.value=n):l["g"]("parameter values?",a,r,{entity_id:o,alternative_id:u}).then(function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.values.forEach((function(e){var t=n.find((function(t){return e.parameter_definition_id===t.definitionId})),a=JSON.parse(e.value);null!==a&&"object"===Object(p["a"])(a)&&(a.type=e.type),t.value=a,t.specie=Be(a,t.allowedSpecies),t.valueId=e.id})),$e(c,u,n,s),t.value=n;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){d.value=e.message})).finally((function(){n.value=!1}))}var He={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},entityKey:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],components:{"hand-paper-regular":we["a"],"hand-point-left-regular":ke["a"]},setup:function(e,t){var n=Object(a["f"])(e),r=n.entityKey,i=Object(a["e"])(Ae(r,t)),c=Object(a["e"])([]),o=Object(a["e"])(!1),u=Object(a["e"])(""),l={promise:null},s=Object(a["a"])((function(){return null===e.entityKey?"":"string"===typeof e.entityKey.entityEmblem?e.entityKey.entityEmblem:e.entityKey.entityEmblem.join(" | ")})),d=Object(a["a"])((function(){return null!==e.entityKey?e.entityKey.alternativeName:""}));return Object(a["g"])(r,(function(t){null!==t?(o.value=!0,Ge(l,c,o,e.projectId,e.modelUrl,e.classId,t.entityEmblem,t.entityId,t.alternativeId,e.diff,u)):c.value.length=0})),{columns:i,data:c,loading:o,errorMessage:u,entityName:s,alternativeName:d,rowKey:function(e){return e.definitionId}}}};const Qe=J()(He,[["render",Se]]);var Ye=Qe,Ze={key:0,strong:""},et={key:1};function tt(e,t,n,a,r,c){var o=Object(i["L"])("n-input"),u=Object(i["L"])("n-space");return Object(i["E"])(),Object(i["h"])(u,{vertical:""},{default:Object(i["S"])((function(){return[a.disabled?(Object(i["E"])(),Object(i["j"])("text",et," - ")):(Object(i["E"])(),Object(i["j"])("text",Ze,Object(i["M"])(a.parameterName)+"("+Object(i["M"])(a.indexName)+") ",1)),Object(i["m"])(o,{disabled:a.disabled,value:a.content,type:"textarea",placeholder:"index value",rows:20,"onUpdate:value":a.updateContent},null,8,["disabled","value","onUpdate:value"])]})),_:1})}function nt(e){var t=e.index_name;return void 0!==t?t:"x"}function at(e){if("content"in e)return e.content;var t="";if("map"===e.type)if(Array.isArray(e.data))e.data.forEach((function(e){t=t+"".concat(e[0],"\t").concat(e[1])+"\n"}));else for(var n in e.data)t=t+"".concat(n,"\t").concat(e.data[n])+"\n";else e.data.forEach((function(e){t+="".concat(e,"\n")}));return t}function rt(e,t){return{index_name:t,content:e}}var it={props:{valueData:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["valueUpdate"],setup:function(e,t){var n=Object(a["e"])(!0),r=Object(a["e"])(""),i=Object(a["e"])(""),c=Object(a["e"])("");return Object(a["g"])(Object(a["f"])(e).valueData,(function(t){if(null===t)return n.value=!0,r.value="",i.value="",void(c.value="");n.value=!1,i.value=t.parameterName;var a=e.diff.pendingValue(t.entityEmblem,t.definitionId,t.alternativeId);void 0===a?(r.value=nt(t.value),c.value=at(t.value)):void 0!==a.contest?(r.value=a.index_name,c.value=a.content):(r.value=nt(a),c.value=at(a))})),{disabled:n,indexName:r,parameterName:i,content:c,updateContent:function(n){c.value=n;var a={value:rt(n,r.value),id:e.valueData.valueId,entityEmblem:e.valueData.entityEmblem,definitionId:e.valueData.definitionId,alternativeId:e.valueData.alternativeId};t.emit("valueUpdate",a)}}}};const ct=J()(it,[["render",tt]]);var ot=ct,ut=n("9973"),lt=n("c46e"),st={props:{indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!0},projectName:{type:String,required:!0},projectId:{type:Number,required:!0},editUrl:{type:String,required:!0},runUrl:{type:String,required:!0},resultsUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},classDescription:{type:String,required:!0},modelUrl:{type:String,required:!0},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"commit-button":q["a"],"entity-list":ge,"indexed-value-editor":ot,page:ut["a"],"page-path":lt["a"],"parameter-table":Ye},setup:function(e){var t=Object(a["e"])(null),n=Object(a["e"])(null),r=Object(a["e"])(!1),i=Object(a["e"])(""),c=Object(a["e"])(!1),s=Object(a["e"])({}),d=new _(e.classId,e.className),b=Object(o["a"])(),p=Object(u["a"])();return Object(a["g"])(c,U["a"]),{currentEntityKey:t,valueEditorData:n,committing:r,commitErrorMessage:i,pendingChanges:c,insertedEntities:s,pendingModelChanges:d,changeCurrentParameters:function(e){null===e?(n.value=null,t.value=null):null!==t.value&&e.entityId===t.value.entityId&&e.alternativeId===t.value.alternativeId||(n.value=null,t.value=e)},setValueEditorData:function(e){n.value=e},possiblyClearValueEditor:function(e){n.value&&n.value.parameterName===e&&(n.value=null)},storeEntityInsertion:function(e){d.insertEntity(e),c.value=!0},storeEntityUpdate:function(e){d.updateEntity(e.previousEmblem,e.id,e.entityEmblem),c.value=!0},storeEntityDeletion:function(e){d.deleteEntity(e.id,e.entityEmblem),c.value=d.isPending()},storeValueInsertion:function(e){d.insertValue(e.value,e.entityEmblem,e.definitionId,e.alternativeId),c.value=!0},storeValueUpdate:function(e){d.updateValue(e.value,e.id,e.entityEmblem,e.definitionId,e.alternativeId),c.value=!0},storeValueDeletion:function(e){d.deleteValue(e.id,e.entityEmblem,e.definitionId,e.alternativeId),c.value=d.isPending()},commit:function(){r.value=!0;var t=d.makeCommitData();l["b"](t,"Modified entities.",e.projectId,e.modelUrl).then((function(e){e.inserted&&(e.inserted.object?s.value=e.inserted.object:e.inserted.relationship&&(s.value=e.inserted.relationship)),b.success("Commit successful."),c.value=!1})).catch((function(e){p.error({title:"Commit failure",content:e.message})})).finally((function(){d.clearPending(),r.value=!1}))},setRelationshipsClashErrorState:function(e){i.value=e?"Cannot commit: some relationships have the same objects.":""}}}};const dt=J()(st,[["render",c]]);var bt=dt,pt=a["b"]({});pt.use(r["a"]),pt.component("entities-app",bt),pt.mount("#entities-app")},c46e:function(e,t,n){"use strict";n("b0c0");var a=n("7a23");function r(e,t,n,r,i,c){var o=Object(a["L"])("n-breadcrumb-item"),u=Object(a["L"])("n-breadcrumb");return Object(a["E"])(),Object(a["h"])(u,null,{default:Object(a["S"])((function(){return[(Object(a["E"])(!0),Object(a["j"])(a["b"],null,Object(a["J"])(n.path,(function(e,t){return Object(a["E"])(),Object(a["h"])(o,{href:e.url,key:t},{default:Object(a["S"])((function(){return[Object(a["l"])(Object(a["M"])(e.name),1)]})),_:2},1032,["href"])})),128)),Object(a["m"])(o,null,{default:Object(a["S"])((function(){return[Object(a["l"])(Object(a["M"])(n.leafName),1)]})),_:1})]})),_:1})}var i={props:{path:Array,leafName:String}},c=n("6b0d"),o=n.n(c);const u=o()(i,[["render",r]]);t["a"]=u},c7cb:function(e,t,n){},d6ec:function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["l"])(" Create ");function i(e,t,n,i,c,o){var u=Object(a["L"])("n-input"),l=Object(a["L"])("n-button"),s=Object(a["L"])("n-space");return Object(a["E"])(),Object(a["h"])(s,null,{default:Object(a["S"])((function(){return[Object(a["m"])(u,{clearable:"",placeholder:i.placeholder,value:i.currentName,"onUpdate:value":t[0]||(t[0]=function(e){return i.currentName=e}),size:"small"},null,8,["placeholder","value"]),Object(a["m"])(l,{onClick:i.emitCreate,size:"small"},{default:Object(a["S"])((function(){return[r]})),_:1},8,["onClick"])]})),_:1})}n("498a"),n("ac1f"),n("00b4"),n("fb6a");var c=n("f2bf"),o=n("7317"),u={props:{itemName:{type:String,required:!0}},emits:["create"],setup:function(e,t){var n=Object(c["e"])(""),a=Object(c["a"])((function(){return"Enter ".concat(e.itemName," name")})),r=Object(o["a"])();return{currentName:n,placeholder:a,emitCreate:function(){var a=new String(n.value).trim();if(a){var i=/[,]/;if(i.test(a)){var c=e.itemName.charAt(0).toUpperCase()+e.itemName.slice(1);r.error("".concat(c," name contains invalid special characters."))}else t.emit("create",a),n.value=""}else r.error("Please enter name for the new ".concat(e.itemName,"."))}}}},l=n("6b0d"),s=n.n(l);const d=s()(u,[["render",i]]);t["a"]=d},f77a:function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["l"])(" Commit "),i=Object(a["l"])(" There are pending changes. "),c=Object(a["l"])(" Nothing to commit. ");function o(e,t,n,o,u,l){var s=Object(a["L"])("n-button"),d=Object(a["L"])("n-text"),b=Object(a["L"])("n-space");return Object(a["E"])(),Object(a["h"])(b,{align:"baseline"},{default:Object(a["S"])((function(){return[Object(a["m"])(s,{disabled:o.buttonDisabled,loading:n.committing,onClick:o.emitCommitRequest},{default:Object(a["S"])((function(){return[r]})),_:1},8,["disabled","loading","onClick"]),n.errorMessage?(Object(a["E"])(),Object(a["h"])(d,{key:0,type:"error"},{default:Object(a["S"])((function(){return[Object(a["l"])(Object(a["M"])(n.errorMessage),1)]})),_:1})):n.hasPendingChanges?(Object(a["E"])(),Object(a["h"])(d,{key:1},{default:Object(a["S"])((function(){return[i]})),_:1})):(Object(a["E"])(),Object(a["h"])(d,{key:2},{default:Object(a["S"])((function(){return[c]})),_:1}))]})),_:1})}var u=n("f2bf"),l={props:{hasPendingChanges:{type:Boolean,required:!0},committing:{type:Boolean,required:!0},errorMessage:{type:String,required:!1,default:""}},emit:["commitRequest"],setup:function(e,t){var n=Object(u["a"])((function(){return!e.hasPendingChanges||0!==e.errorMessage.length}));return{buttonDisabled:n,emitCommitRequest:function(){t.emit("commitRequest")}}}},s=n("6b0d"),d=n.n(s);const b=d()(l,[["render",o]]);t["a"]=b}});